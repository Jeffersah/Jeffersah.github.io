(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{73:function(t,s,i){"use strict";i.d(s,"a",(function(){return e}));class e{constructor(t,s){this.x=t,this.y=s}LengthSq(){return e.Dot(this,this)}Length(){return Math.sqrt(this.LengthSq())}Clone(){return new e(this.x,this.y)}Negate(){return new e(-this.x,-this.y)}NegateInPlace(){return this.x=-this.x,this.y=-this.y,this}static Dot(t,s){return t.x*s.x+t.y*s.y}DotWith(t){return e.Dot(this,t)}Direction(){return Math.atan2(this.y,this.x)}AddWith(t,s){const i=void 0===s?t.x:t,e=void 0===s?t.y:s;return this.x+=i,this.y+=e,this}MultWith(t,s){const i=void 0===s?t.x:t,e=void 0===s?t.y:s;return this.x*=i,this.y*=e,this}SubtractWith(t,s){const i=void 0===s?t.x:t,e=void 0===s?t.y:s;return this.x-=i,this.y-=e,this}DivideWith(t,s){const i=void 0===s?t.x:t,e=void 0===s?t.y:s;return this.x/=i,this.y/=e,this}Equals(t){return this.x===t.x&&this.y===t.y}static Add(t,s){return new e(t.x+s.x,t.y+s.y)}static Multiply(t,s,i){return void 0!==i?new e(t.x*s,t.y*i):void 0!==s.x?new e(t.x*s.x,t.y*s.y):new e(t.x*s,t.y*s)}}},76:function(t,s,i){"use strict";i.d(s,"a",(function(){return h}));class e{constructor(t,s){this.keys=t,this.changes=s}isKeyDown(t){return-1!==this.keys.indexOf(t)}isKeyUp(t){return-1===this.keys.indexOf(t)}}class n{constructor(t,s){this.attachedElement=t,this.logKeyNames=s,void 0===this.logKeyNames&&(this.logKeyNames=!1),t.addEventListener("keydown",t=>this.onKeyDown(t)),t.addEventListener("keyup",t=>this.onKeyUp(t)),this.downKeys=[],this.changes=[]}onKeyDown(t){this.logKeyNames&&console.log(t.key);-1===this.downKeys.indexOf(t.key)&&(this.changes.push({key:t.key,change:"press"}),this.downKeys.push(t.key))}onKeyUp(t){this.changes.push({key:t.key,change:"release"});const s=this.downKeys.indexOf(t.key);this.downKeys.splice(s,1)}Update(){const t=this.downKeys,s=this.changes;return this.downKeys=t.slice(),this.changes=[],new e(t,s)}}class h{constructor(t,s){this.watcher=new n(t,s),this.prvState=this.currentState=this.watcher.Update()}update(){this.prvState=this.currentState,this.currentState=this.watcher.Update()}isKeyDown(t){return this.currentState.isKeyDown(t)}isKeyUp(t){return this.currentState.isKeyUp(t)}isKeyPressed(t){return this.currentState.isKeyDown(t)&&this.prvState.isKeyUp(t)}isKeyReleased(t){return this.currentState.isKeyUp(t)&&this.prvState.isKeyDown(t)}changes(){return this.currentState.changes}}},89:function(t,s,i){"use strict";i.d(s,"a",(function(){return e}));class e{constructor(t){t.h||t.s||t.v?(this.hsv=t,this.rgb=void 0):(this.rgb=t,this.hsv=void 0)}static rgb(t,s,i){return new e({r:t,g:s,b:i})}static hsv(t,s,i){return new e({h:t,s:s,v:i})}r(t){if(this.reqRgb(),void 0===t)return this.rgb.r;this.rgb.r=t,this.hsv=void 0}g(t){if(this.reqRgb(),void 0===t)return this.rgb.g;this.rgb.g=t,this.hsv=void 0}b(t){if(this.reqRgb(),void 0===t)return this.rgb.b;this.rgb.b=t,this.hsv=void 0}h(t){if(this.reqHsv(),void 0===t)return this.hsv.h;this.hsv.h=t,this.hsv=void 0}s(t){if(this.reqHsv(),void 0===t)return this.hsv.s;this.hsv.s=t,this.hsv=void 0}v(t){if(this.reqHsv(),void 0===t)return this.hsv.v;this.hsv.v=t,this.hsv=void 0}componentToRgb(t){const s=(t+6*this.hsv.h)%6;return this.hsv.v-this.hsv.v*this.hsv.s*Math.max(Math.min(s,4-s,1),0)}reqRgb(){void 0===this.rgb&&this.calcRgb()}calcRgb(){this.rgb={r:this.componentToRgb(5),g:this.componentToRgb(3),b:this.componentToRgb(1)}}reqHsv(){void 0===this.hsv&&this.calcHsv()}calcHsv(){const{r:t,g:s,b:i}=this.rgb,e=Math.max(t,s,i),n=Math.min(t,s,i);let h=e===n?0:e===t?(s-i)/(e-n):e===s?2+(i-t)/(e-n):4+(t-s)/(e-n);for(h/=6;h<0;)h++;this.hsv={h:h,s:e===n?0:(e-n)/e,v:e}}toString(){return this.reqRgb(),"rgb("+this.toByte(this.rgb.r)+", "+this.toByte(this.rgb.g)+", "+this.toByte(this.rgb.b)+")"}toByte(t){return Math.floor(255*t)}}},92:function(t,s,i){"use strict";i.r(s),i.d(s,"default",(function(){return W}));var e=i(24),n=1e3,h=800,r=i(26),o=i(13),a=i(25),l=i.p+"12a4e8650485f6c9e051cf30dfcfc746.png",c=i(73);const u=2*Math.PI;class y{static normalize(t){return(t%=u)<0&&(t+=u),t}static relativeNormalize(t){return(t%=u)>Math.PI?t-=u:t<-Math.PI&&(t+=u),t}static relativeAngle(t,s){return y.relativeNormalize(t-s)}}const g=.2,d=20,f=.998,v=.99,p=.06,m=.002,x=.004,w=.98,b=.003,M=120;class D{constructor(t){this.sprites=t,this.position=new c.a(0,0),this.velocity=new c.a(0,0),this.angularVelocity=0,this.rotation=0,this.engineDeflect=0,this.tgtDeflect=0}tick(t){t.isKeyDown("w")?this.isEngineOn=!0:this.isEngineOn=!1,t.isKeyDown("a")?this.tgtDeflect=1:t.isKeyDown("d")?this.tgtDeflect=-1:this.tgtDeflect=0,this.tgtDeflect>=this.engineDeflect?this.engineDeflect=Math.min(this.engineDeflect+p,this.tgtDeflect):this.engineDeflect=Math.max(this.engineDeflect-p,this.tgtDeflect);const s=Math.atan2(this.velocity.y,this.velocity.x),i=y.relativeAngle(this.rotation,s),e=i/Math.PI;this.angularVelocity*=w,this.angularVelocity-=this.tgtDeflect*m+this.engineDeflect*x*(this.isEngineOn?1:0),this.rotation+=this.angularVelocity;const n=(1-Math.abs(e))*f+Math.abs(e)*v;this.velocity.MultWith(n,n),this.isEngineOn&&(this.velocity.x+=g*Math.cos(this.rotation),this.velocity.y+=g*Math.sin(this.rotation));let h=this.velocity.Length(),r=this.velocity.Direction();h>=d&&(h=d);let o=Math.sin(i);o*=Math.min(h/M,1),o*=b,r+=o,this.velocity.x=Math.cos(r)*h,this.velocity.y=Math.sin(r)*h,this.position.AddWith(this.velocity)}render(t){t.save(),Object(o.c)(t,this.position.x,this.position.y,4,8,this.rotation+Math.PI/2),this.isEngineOn&&this.sprites.rotrender(t,4,11,8,16,Math.floor(4*Math.random()),1,this.engineDeflect*Math.PI/4,4,2),this.tgtDeflect>0?this.sprites.rotrender(t,7,4,8,16,Math.floor(2*Math.random()),2,0,3,4):this.tgtDeflect<0&&this.sprites.rotrender(t,1,4,8,16,2+Math.floor(2*Math.random()),2,0,6,4),this.sprites.render(t,0,0,8,16,0,0),t.restore()}}var k,K=i(76);!function(t){t[t.ally=0]="ally",t[t.enemy=1]="enemy",t[t.neutral=2]="neutral"}(k||(k={}));class E{constructor(t){this.Player=t,this.Entities={},this.Entities[k.neutral]=[],this.Entities[k.ally]=[],this.Entities[k.enemy]=[],this.Effects=[]}tick(){for(let t=this.Effects.length-1;t>=0;t--)this.Effects[t].tick()&&this.Effects.splice(t,1)}draw(t){for(let s=0;s<this.Effects.length;s++)this.Effects[s].draw(t)}}class R{constructor(t,s){this.range=t,this.timingFunction=s}}class S{constructor(t){this.totalTime=t,this.elapsedTime=0}tick(){return this.elapsedTime++,this.elapsedTime>=this.totalTime}sample(t){return t.range.sample(t.timingFunction(this.elapsedTime/this.totalTime))}}class I{constructor(t,s,i,e,n){this.position=t,this.outerRadius=s,this.innerRadius=i,this.fillColor=e,this.timing=new S(n)}tick(){return this.timing.tick()}draw(t){const s=this.timing.sample(this.outerRadius),i=this.timing.sample(this.innerRadius),e=this.timing.sample(this.fillColor);t.beginPath(),t.arc(this.position.x,this.position.y,s,0,2*Math.PI,!1),i>=0&&t.arc(this.position.x,this.position.y,i,0,2*Math.PI,!0),t.closePath(),t.fillStyle=e.toString(),t.fill()}}const O={linear:t=>t,clamp:t=>Math.max(Math.min(t,1),0),fastIn:q(0,.8,1),fastOut:q(0,.2,1)};function q(...t){return s=>function t(s,i,e,n){return 1===n?i[e]:t(s,i,e,n-1)*(1-s)+t(s,i,e+1,n-1)*s}(s,t,0,t.length)}var B=i(89);const P=(t,s,i)=>t+(s-t)*i,V=(t,s,i)=>B.a.rgb(P(t.r(),s.r(),i),P(t.g(),s.g(),i),P(t.b(),s.b(),i));function T(t,...s){void 0===t.arguments&&(s.splice(0,0,t),t=void 0);let i=1/(s.length-1),e=new A(s[0],t);for(let t=1;t<s.length;t++)e.addKeyFrame(i*t,s[t]);return e}class A{constructor(t,s){if(void 0===s)if("number"==typeof t)this.interpolator=P;else{if(void 0===t.r)throw"No default interpolator found";this.interpolator=V}else this.interpolator=s;this.keys=[{time:0,value:t}]}addKeyFrame(t,s){for(let i=0;i<this.keys.length;i++)if(t<this.keys[i].time)return void this.keys.splice(i,0,{time:t,value:s});this.keys.push({time:t,value:s})}sample(t){if(1===this.keys.length)return this.keys[0].value;for(var s=0;this.keys[s+1].time<t&&s+2<this.keys.length;)s++;let i=this.keys[s+1].time-this.keys[s].time,e=(t-this.keys[s].time)/i;return this.interpolator(this.keys[s].value,this.keys[s+1].value,e)}}class U{constructor(t,s,i,e,n,h,r){this.position=t,this.burstXVariance=s,this.burstYVariance=i,this.numBursts=e,this.burstDelay=n,this.burstLifetime=h,this.burstOuterRadius=r,this.currentBurstDelay=0,this.maxExplosionIndex=0;const o=Math.floor(e.GetValue(Math.random()));this.explosions=new Array(o),this.triggerExplosions()}triggerExplosions(){for(;0===this.currentBurstDelay&&this.maxExplosionIndex<this.explosions.length;)this.currentBurstDelay=this.burstDelay,this.spawnBurst()}spawnBurst(){const t=this.position.x+this.burstXVariance.GetValue(Math.random()),s=this.position.y+this.burstYVariance.GetValue(Math.random()),i=this.burstLifetime.GetValue(Math.random()),e=this.burstOuterRadius.GetValue(Math.random()),n=e/4;this.explosions[this.maxExplosionIndex++]=new I(new c.a(t,s),new R(T(n,e),O.linear),new R(T(-n,e),O.fastOut),new R(T(B.a.rgb(1,1,.5),B.a.rgb(1,0,0),B.a.rgb(.2,.2,0)),O.linear),i)}tick(){let t=!1;for(let s=0;s<this.maxExplosionIndex;s++)null!==this.explosions[s]&&void 0!==this.explosions[s]&&(this.explosions[s].tick()?this.explosions[s]=null:t=!0);return this.currentBurstDelay--,0===this.currentBurstDelay&&this.triggerExplosions(),!t&&this.maxExplosionIndex===this.explosions.length}draw(t){for(let s=0;s<this.maxExplosionIndex;s++)null!==this.explosions[s]&&void 0!==this.explosions[s]&&this.explosions[s].draw(t)}}var L=i(15);let N;function W(){const t=new e.a,s=new a.a(8,16,l,t.registerAssetLoadCallback());t.onAllFinished(()=>function(t){const s=document.getElementById("canvas"),i=s.getContext("2d");N=new r.a(s,i,n,h,!0,()=>{}),Object(o.a)(i);const e=new K.a(document.body,!1),a=new D(t),l=new E(a);l.Effects.push(new I(new c.a(0,0),new R(T(0,30),O.linear),new R(T(-10,30),O.fastOut),new R(T(B.a.rgb(1,1,.5),B.a.rgb(1,0,0),B.a.rgb(.2,.2,0)),O.linear),120)),l.Effects.push(new U(new c.a(100,0),new L.c(-30,30),new L.c(-30,30),new L.c(30,30),4,new L.c(20,40),new L.c(20,60))),function t(s,i,e,r,a){e.update(),s.tick(),i.tick(e),function(t,s,i,e){Object(o.a)(e),e.fillStyle="black",e.fillRect(0,0,n,h),e.save();const r=c.a.Add(s.position,c.a.Multiply(s.velocity,10));e.translate(-(r.x-n/2),-(r.y-h/2)),e.fillStyle="gray";for(let t=400*Math.floor((r.y-h/2)/400);t<=400*Math.floor((r.y+h/2)/400);t+=400)e.fillRect(r.x-n/2,t,n,3);for(let t=400*Math.floor((r.x-n/2)/400);t<=400*Math.floor((r.x+n/2)/400);t+=400)e.fillRect(t,r.y-h/2,3,h);s.render(e),t.draw(e),e.restore()}(s,i,0,a),requestAnimationFrame(()=>t(s,i,e,r,a))}(l,a,e,s,i)}(s))}}}]);
//# sourceMappingURL=bullets.bundle.js.map