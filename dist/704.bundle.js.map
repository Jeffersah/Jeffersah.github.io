{"version":3,"file":"704.bundle.js","mappings":"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","sources":["webpack://trading-game/./src/projects/common/position/Point.ts","webpack://trading-game/./src/projects/recurshooter/map/MapObstruction.ts","webpack://trading-game/./src/projects/recurshooter/map/MapInfo.ts","webpack://trading-game/./src/projects/recurshooter/RunGameScreen.ts","webpack://trading-game/./src/projects/recurshooter/Runner.ts","webpack://trading-game/./src/views/projects/recurshooter/RecursiveShooterComponent.tsx"],"sourcesContent":["export default class Point {\r\n\r\n    static zero(): Point  {\r\n        return new Point(0,0);\r\n    }\r\n\r\n    constructor(public x: number, public y: number) {\r\n\r\n    }\r\n\r\n    public static fromAngle(angle: number, distance?: number) : Point {\r\n        return new Point(Math.cos(angle) * (distance ?? 1), Math.sin(angle) * (distance ?? 1));\r\n    }\r\n\r\n    public lengthSq(): number {\r\n        return Point.dot(this, this);\r\n    }\r\n\r\n    public length(): number {\r\n        return Math.sqrt(this.lengthSq());\r\n    }\r\n\r\n    public clone(): Point {\r\n        return new Point(this.x, this.y);\r\n    }\r\n\r\n    public negate(): Point {\r\n        return new Point(-this.x, -this.y);\r\n    }\r\n\r\n    public negateInPlace(): this {\r\n        this.x = -this.x;\r\n        this.y = -this.y;\r\n        return this;\r\n    }\r\n\r\n    public static dot(p1: Point, p2: Point): number {\r\n        return p1.x * p2.x + p1.y * p2.y;\r\n    }\r\n\r\n    public dotWith(other: Point): number {\r\n        return Point.dot(this, other);\r\n    }\r\n\r\n    public normalize(): Point {\r\n        let len = this.length();\r\n        return Point.multiply(this, 1 / len);\r\n    }\r\n\r\n    public direction(): number {\r\n        return Math.atan2(this.y, this.x);\r\n    }\r\n\r\n    public truncate(): Point {\r\n        return new Point(Math.trunc(this.x), Math.trunc(this.y));\r\n    }\r\n\r\n    public addWith(x: number, y: number): this;\r\n    public addWith(other: Point): this;\r\n    public addWith(other: number|Point, y?: number): this {\r\n        const {x: nx, y: ny} = splitArgs(other, y);\r\n        this.x += nx;\r\n        this.y += ny;\r\n        return this;\r\n    }\r\n\r\n    public multWith(s: number): this;\r\n    public multWith(x: number, y: number): this;\r\n    public multWith(other: Point): this;\r\n    public multWith(other: number|Point, y?: number): this {\r\n        const {x: nx, y: ny} = splitArgsOrSingle(other, y);\r\n        this.x *= nx;\r\n        this.y *= ny;\r\n        return this;\r\n    }\r\n\r\n    public subtractWith(x: number, y: number): this;\r\n    public subtractWith(other: Point): this;\r\n    public subtractWith(other: number|Point, y?: number): this {\r\n        const {x: nx, y: ny} = splitArgs(other, y);\r\n        this.x -= nx;\r\n        this.y -= ny;\r\n        return this;\r\n    }\r\n\r\n    public divideWith(x: number, y: number): this;\r\n    public divideWith(other: Point): this;\r\n    public divideWith(other: number|Point, y?: number): this {\r\n        const {x: nx, y: ny} = splitArgs(other, y);\r\n        this.x /= nx;\r\n        this.y /= ny;\r\n        return this;\r\n    }\r\n\r\n    public equals(other: Point): boolean {\r\n        return this.x === other.x && this.y === other.y;\r\n    }\r\n\r\n    \r\n    static add(src: Point, x: number, y: number): Point;\r\n    static add(src: Point, other: Point): Point;\r\n    static add(src: Point, other: number|Point, y?: number): Point {\r\n        const {x: nx, y: ny} = splitArgs(other, y);\r\n        return new Point(src.x + nx, src.y + ny);\r\n    }\r\n\r\n    static subtract(src: Point, x: number, y: number): Point;\r\n    static subtract(src: Point, other: Point): Point;\r\n    static subtract(src: Point, other: number|Point, y?: number): Point {\r\n        const {x: nx, y: ny} = splitArgs(other, y);\r\n        return new Point(src.x - nx, src.y - ny);\r\n    }\r\n\r\n    static multiply(a: Point, s: number, sy?: number): Point;\r\n    static multiply(a: Point, b: Point): Point;\r\n    static multiply(a: Point, b: Point|number, sy ?: number): Point {\r\n        if (sy !== undefined) {\r\n            return new Point(a.x * (b as number), a.y * sy);\r\n        }\r\n        else if ((b as any).x !== undefined) {\r\n            return new Point(a.x * (b as Point).x, a.y * (b as Point).y);\r\n        } else {\r\n            return new Point(a.x * (b as number), a.y * (b as number));\r\n        }\r\n    }\r\n\r\n    static interpolate(a: Point, b: Point, p: number): Point {\r\n        if(p === 0) return a;\r\n        if(p === 1) return b;\r\n        return new Point(a.x + (b.x - a.x) * p, a.y + (b.y - a.y) * p);\r\n    }\r\n\r\n    static componentMin(a: Point, b: Point): Point {\r\n        if(a.x <= b.x && a.y <= b.y) return a;\r\n        if(b.x <= a.x && b.y <= a.y) return b;\r\n        return new Point(Math.min(a.x, b.x), Math.min(a.y, b.y));\r\n    }\r\n    \r\n    static componentMax(a: Point, b: Point): Point {\r\n        if(a.x >= b.x && a.y >= b.y) return a;\r\n        if(b.x >= a.x && b.y >= a.y) return b;\r\n        return new Point(Math.max(a.x, b.x), Math.max(a.y, b.y));\r\n    }\r\n\r\n    static Bezier(pts: Point[], t: number): Point {\r\n        if(pts.length === 1) return pts[0];\r\n        else if(pts.length === 2) return Point.add(Point.multiply(pts[1], t), Point.multiply(pts[0], 1-t));\r\n        return Point.add(\r\n            Point.multiply(Point.Bezier(pts.slice(1), t), t),\r\n            Point.multiply(Point.Bezier(pts.slice(0, pts.length - 1), t), 1-t));\r\n    }\r\n\r\n    rotate(theta: number): Point {\r\n        const angle = Math.atan2(this.y, this.x);\r\n        const len = this.length();\r\n        return Point.fromAngle(angle + theta, len);\r\n    }\r\n}\r\n\r\nfunction splitArgs(x: Point|number, y ?: number): {x: number, y: number} {\r\n    if(y === undefined) return { x: (<Point>x).x, y: (<Point>x).y };\r\n    return {x: <number>x, y};\r\n}\r\n\r\nfunction splitArgsOrSingle(x: Point|number, y ?: number): {x: number, y: number} {\r\n    if(y === undefined)\r\n    {\r\n        if((x as Point).x !== undefined) {\r\n            return { x: (<Point>x).x, y: (<Point>x).y };\r\n        }\r\n        return { x: x as number, y: x as number };\r\n    } \r\n    return {x: <number>x, y};\r\n}","import Point from \"../../common/position/Point\";\r\n\r\nexport default class MapObstruction {\r\n    constructor(public bounds: Point[], public blockMove: boolean, public blockBullets: boolean) {\r\n\r\n    }\r\n}","import Point from \"../../common/position/Point\";\r\nimport MapObstruction from \"./MapObstruction\";\r\n\r\nexport class MapInfo {\r\n    constructor(public recursePosition: { center: Point, scale: number, rotation: number }, public obstructions: MapObstruction[]) {\r\n    }\r\n}\r\n\r\nconst defaultMap = new MapInfo(\r\n    { center: new Point(400, 300), scale: 0.25, rotation: 0},\r\n    [\r\n        new MapObstruction([new Point(0, 0), new Point(100, 0), new Point(100, 600), new Point(0, 600)], true, true),\r\n        new MapObstruction([new Point(700, 0), new Point(800, 0), new Point(800, 600), new Point(700, 600)], true, true),\r\n    ]\r\n);\r\nexport default defaultMap;","import { ResizeCanvas } from \"../common/CanvasHelpers\";\r\nimport Point from \"../common/position/Point\";\r\nimport IScreen from \"./IScreen\";\r\nimport {MapInfo} from \"./map/MapInfo\";\r\n\r\nconst USE_CACHED_RENDER = true;\r\n\r\nexport default class RunGameScreen implements IScreen {\r\n\r\n    private offscreenCanvas: HTMLCanvasElement;\r\n    private offscreenCtx: CanvasRenderingContext2D;\r\n\r\n    private recursionArgs: {\r\n        offset: Point,\r\n        rotation: number,\r\n        scale: number\r\n    };\r\n\r\n    constructor(private map: MapInfo) {\r\n    }\r\n\r\n    update(): void {\r\n        \r\n    }\r\n\r\n    initOffscreenCanvas(canvas: HTMLCanvasElement) {\r\n        this.offscreenCanvas = document.createElement('canvas');\r\n        ResizeCanvas(this.offscreenCanvas, canvas.width, canvas.height);\r\n        this.offscreenCtx = this.offscreenCanvas.getContext('2d');\r\n    }\r\n    \r\n    draw(canvas: HTMLCanvasElement, ctx: CanvasRenderingContext2D): void {\r\n        if(this.offscreenCanvas === null || this.offscreenCanvas === undefined)\r\n            this.initOffscreenCanvas(canvas);\r\n        if(USE_CACHED_RENDER)\r\n            this.renderWorld(this.offscreenCanvas, this.offscreenCtx);\r\n        ctx.save();\r\n        this.recursiveRender(this.offscreenCanvas, canvas, ctx);\r\n        ctx.restore();\r\n    }\r\n\r\n    recursiveRender(src: HTMLCanvasElement, canvas: HTMLCanvasElement, ctx: CanvasRenderingContext2D) {\r\n        for(let i = 0; i < 8; i++){\r\n            if(USE_CACHED_RENDER)\r\n                ctx.drawImage(src, 0, 0, canvas.width, canvas.height);\r\n            else\r\n                this.renderWorld(canvas, ctx);\r\n            ctx.translate(-400, -300);\r\n            ctx.scale(this.map.recursePosition.scale, this.map.recursePosition.scale);\r\n            ctx.rotate(this.map.recursePosition.rotation);\r\n\r\n            const tgtPoint = this.map.recursePosition.center.rotate(-this.map.recursePosition.rotation).multWith(1/this.map.recursePosition.scale, 1/this.map.recursePosition.scale);\r\n\r\n            ctx.translate(tgtPoint.x, tgtPoint.y);\r\n        }\r\n    }\r\n\r\n    renderWorld(canvas: HTMLCanvasElement, ctx: CanvasRenderingContext2D) {\r\n        ctx.save();\r\n        ctx.fillStyle = 'black';\r\n        ctx.fillRect(0, 0, 800, 600);\r\n        ctx.beginPath();\r\n        for(const obstruction of this.map.obstructions) {\r\n            ctx.moveTo(obstruction.bounds[0].x, obstruction.bounds[0].y);\r\n            for(let i = 1; i <= obstruction.bounds.length; i++) {\r\n                ctx.lineTo(obstruction.bounds[i % obstruction.bounds.length].x, obstruction.bounds[i % obstruction.bounds.length].y);\r\n            }\r\n        }\r\n        ctx.fillStyle = '#006';\r\n        ctx.strokeStyle = 'blue';\r\n        ctx.fill();\r\n        ctx.stroke();\r\n        ctx.restore();\r\n    }\r\n\r\n}","import { ResizeCanvas } from \"../common/CanvasHelpers\";\r\nimport IScreen from \"./IScreen\";\r\nimport defaultMap from \"./map/MapInfo\";\r\nimport RunGameScreen from \"./RunGameScreen\";\r\n\r\nexport default class Runner {\r\n    ctx: CanvasRenderingContext2D;\r\n    private repaintTimer: number;\r\n    private screen: IScreen;\r\n\r\n    constructor(public canvas: HTMLCanvasElement) {\r\n        ResizeCanvas(canvas, 800, 600);\r\n        this.ctx = canvas.getContext('2d');\r\n        this.repaintTimer = -1;\r\n\r\n        this.screen = new RunGameScreen(defaultMap);\r\n    }\r\n\r\n    start() {\r\n        this.runTick();\r\n    }\r\n\r\n    private runTick() {\r\n        this.tick();\r\n        this.repaintTimer = requestAnimationFrame(this.runTick.bind(this));\r\n    }\r\n\r\n    tick() {\r\n        this.screen.update(s => {\r\n            this.screen = s;\r\n        });\r\n        this.ctx.save();\r\n        this.ctx.fillStyle = 'black';\r\n        this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\r\n        this.screen.draw(this.canvas, this.ctx);\r\n        this.ctx.restore();\r\n    }\r\n\r\n    stop() {\r\n        if(this.repaintTimer !== -1) {\r\n            cancelAnimationFrame(this.repaintTimer);\r\n        }\r\n    }\r\n}","import * as React from 'react';\r\nimport Runner from '../../../projects/recurshooter/Runner';\r\n\r\nexport default function RecursiveShooterComponent() {\r\n    const ref = React.useRef<HTMLCanvasElement>();\r\n    React.useEffect(()=>{\r\n        const runner = new Runner(ref.current);\r\n        runner.start();\r\n        return ()=>runner.stop();\r\n    }, [ref.current]);\r\n    return <canvas ref={ref} />;\r\n}\r\n"],"names":["Point","constructor","x","y","static","angle","distance","Math","cos","sin","lengthSq","dot","this","length","sqrt","clone","negate","negateInPlace","p1","p2","dotWith","other","normalize","len","multiply","direction","atan2","truncate","trunc","addWith","nx","ny","splitArgs","multWith","undefined","splitArgsOrSingle","subtractWith","divideWith","equals","src","a","b","sy","p","min","max","pts","t","add","Bezier","slice","rotate","theta","fromAngle","MapObstruction","bounds","blockMove","blockBullets","recursePosition","obstructions","center","scale","rotation","RunGameScreen","map","update","initOffscreenCanvas","canvas","offscreenCanvas","document","createElement","width","height","offscreenCtx","getContext","draw","ctx","renderWorld","save","recursiveRender","restore","i","drawImage","translate","tgtPoint","fillStyle","fillRect","beginPath","obstruction","moveTo","lineTo","strokeStyle","fill","stroke","Runner","repaintTimer","screen","start","runTick","tick","requestAnimationFrame","bind","s","stop","cancelAnimationFrame","RecursiveShooterComponent","ref","runner","current"],"sourceRoot":""}