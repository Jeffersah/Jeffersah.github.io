{"version":3,"file":"rpgTest.bundle.js","mappings":"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","sources":["webpack://trading-game/./src/projects/common-assets/arrows.png","webpack://trading-game/./src/projects/common/input/KeyState.ts","webpack://trading-game/./src/projects/common/input/KeyWatcher.ts","webpack://trading-game/./src/projects/common/input/KeyboardManager.ts","webpack://trading-game/./src/projects/common/position/Direction.ts","webpack://trading-game/./src/projects/common/position/Point.ts","webpack://trading-game/./src/projects/common/position/Rectangle.ts","webpack://trading-game/./src/projects/rpgt/Constants.ts","webpack://trading-game/./src/projects/common-assets/rpg1.png","webpack://trading-game/./src/projects/common-assets/wizard16.png","webpack://trading-game/./src/projects/common/Iterate.ts","webpack://trading-game/./src/projects/rpgt/world/World.ts","webpack://trading-game/./src/projects/rpgt/SheetGraphic.ts","webpack://trading-game/./src/projects/rpgt/world/Cell.ts","webpack://trading-game/./src/projects/common/assets/FileResource.ts","webpack://trading-game/./src/projects/rpgt/index.ts"],"sourcesContent":["export default __webpack_public_path__ + \"bbb298f00b41bbd627d27aa0529a20ba.png\";","import { IKeyChange } from './KeyWatcher';\n\nexport default class KeyState {\n    constructor(public keys: string[], public changes: IKeyChange[]) {\n\n    }\n\n    public isKeyDown(key: string) {\n        return this.keys.indexOf(key) !== -1;\n    }\n\n    public isKeyUp(key: string) {\n        return this.keys.indexOf(key) === -1;\n    }\n}","import KeyState from './KeyState';\n\nexport interface IKeyChange {\n    key: string;\n    change: 'press'|'release';\n}\n\nexport default class KeyWatcher {\n    downKeys: string[];\n    changes: IKeyChange[];\n\n    constructor(public attachedElement: HTMLElement, private logKeyNames?: boolean) {\n        if  (this.logKeyNames === undefined) {\n            this.logKeyNames = false;\n        }\n        attachedElement.addEventListener('keydown', k => this.onKeyDown(k));\n        attachedElement.addEventListener('keyup', k => this.onKeyUp(k));\n\n        this.downKeys = [];\n        this.changes = [];\n    }\n\n    private onKeyDown(key: KeyboardEvent) {\n        if (this.logKeyNames) {\n            // tslint:disable-next-line: no-console\n            console.log(key.key);\n        }\n        const idx = this.downKeys.indexOf(key.key);\n        if (idx === -1) {\n            this.changes.push({ key: key.key, change: 'press' });\n            this.downKeys.push(key.key);\n        }\n    }\n\n    private onKeyUp(key: KeyboardEvent) {\n        this.changes.push({ key: key.key, change: 'release' });\n        const idx = this.downKeys.indexOf(key.key);\n        this.downKeys.splice(idx, 1);\n    }\n\n    public Update(): KeyState {\n        const storeKeys = this.downKeys;\n        const storeChanges = this.changes;\n\n        this.downKeys = storeKeys.slice();\n        this.changes = [];\n\n        return new KeyState(storeKeys, storeChanges);\n    }\n}","import KeyWatcher, { IKeyChange } from './KeyWatcher';\nimport KeyState from './KeyState';\n\nexport default class KeyboardManager {\n\n    watcher: KeyWatcher;\n    prvState: KeyState;\n    currentState: KeyState;\n\n    constructor(element: HTMLElement, logKeyNames?: boolean) {\n        this.watcher = new KeyWatcher(element, logKeyNames);\n        this.prvState = this.currentState = this.watcher.Update();\n    }\n\n    public update(): void {\n        this.prvState = this.currentState;\n        this.currentState = this.watcher.Update();\n    }\n\n    public isKeyDown(key: string): boolean {\n        return this.currentState.isKeyDown(key);\n    }\n\n    public isKeyUp(key: string): boolean {\n        return this.currentState.isKeyUp(key);\n    }\n\n    public isKeyPressed(key: string): boolean {\n        return this.currentState.isKeyDown(key) && this.prvState.isKeyUp(key);\n    }\n\n    public isKeyReleased(key: string): boolean {\n        return this.currentState.isKeyUp(key) && this.prvState.isKeyDown(key);\n    }\n\n    public changes(): IKeyChange[] {\n        return this.currentState.changes;\n    }\n}","import Point from './Point';\n\nexport enum Direction {\n    Up = 0,\n    UpRight,\n    Right,\n    DownRight,\n    Down,\n    DownLeft,\n    Left,\n    UpLeft,\n}\n\nexport type ECardinalDirection = Direction.Up | Direction.Right | Direction.Down | Direction.Left;\nexport type EDiagonalDirection = Direction.UpRight | Direction.DownRight | Direction.DownLeft | Direction.UpLeft;\n\nexport const directionValues: Point[] = [\n    new Point(0, -1),\n    new Point(1, -1),\n    new Point(1, 0),\n    new Point(1, 1),\n    new Point(0, 1),\n    new Point(-1, 1),\n    new Point(-1, 0),\n    new Point(-1, -1),\n];\n\nexport const allDirections: Direction[] = [\n    Direction.Up,\n    Direction.UpRight,\n    Direction.Right,\n    Direction.DownRight,\n    Direction.Down,\n    Direction.DownLeft,\n    Direction.Left,\n    Direction.UpLeft,\n];\nexport const cardinalDirections: ECardinalDirection[] = [\n    Direction.Up,\n    Direction.Right,\n    Direction.Down,\n    Direction.Left\n];\nexport const diagonalDirections: EDiagonalDirection[] = [\n    Direction.UpRight,\n    Direction.DownRight,\n    Direction.DownLeft,\n    Direction.UpLeft,\n];\n\nexport function ToPoint(direction: Direction): Point {\n    return directionValues[direction];\n}","export default class Point {\n\n    static zero(): Point  {\n        return new Point(0,0);\n    }\n\n    constructor(public x: number, public y: number) {\n\n    }\n\n    public static fromAngle(angle: number, distance?: number) : Point {\n        return new Point(Math.cos(angle) * (distance ?? 1), Math.sin(angle) * (distance ?? 1));\n    }\n\n    public lengthSq(): number {\n        return Point.dot(this, this);\n    }\n\n    public length(): number {\n        return Math.sqrt(this.lengthSq());\n    }\n\n    public clone(): Point {\n        return new Point(this.x, this.y);\n    }\n\n    public negate(): Point {\n        return new Point(-this.x, -this.y);\n    }\n\n    public negateInPlace(): this {\n        this.x = -this.x;\n        this.y = -this.y;\n        return this;\n    }\n\n    public static dot(p1: Point, p2: Point): number {\n        return p1.x * p2.x + p1.y * p2.y;\n    }\n\n    public dotWith(other: Point): number {\n        return Point.dot(this, other);\n    }\n\n    public normalize(): Point {\n        let len = this.length();\n        return Point.multiply(this, 1 / len);\n    }\n\n    public direction(): number {\n        return Math.atan2(this.y, this.x);\n    }\n\n    public truncate(): Point {\n        return new Point(Math.trunc(this.x), Math.trunc(this.y));\n    }\n\n    public addWith(x: number, y: number): this;\n    public addWith(other: Point): this;\n    public addWith(other: number|Point, y?: number): this {\n        const {x: nx, y: ny} = splitArgs(other, y);\n        this.x += nx;\n        this.y += ny;\n        return this;\n    }\n\n    public multWith(s: number): this;\n    public multWith(x: number, y: number): this;\n    public multWith(other: Point): this;\n    public multWith(other: number|Point, y?: number): this {\n        const {x: nx, y: ny} = splitArgsOrSingle(other, y);\n        this.x *= nx;\n        this.y *= ny;\n        return this;\n    }\n\n    public subtractWith(x: number, y: number): this;\n    public subtractWith(other: Point): this;\n    public subtractWith(other: number|Point, y?: number): this {\n        const {x: nx, y: ny} = splitArgs(other, y);\n        this.x -= nx;\n        this.y -= ny;\n        return this;\n    }\n\n    public divideWith(x: number, y: number): this;\n    public divideWith(other: Point): this;\n    public divideWith(other: number|Point, y?: number): this {\n        const {x: nx, y: ny} = splitArgs(other, y);\n        this.x /= nx;\n        this.y /= ny;\n        return this;\n    }\n\n    public equals(other: Point): boolean {\n        return this.x === other.x && this.y === other.y;\n    }\n\n    \n    static add(src: Point, x: number, y: number): Point;\n    static add(src: Point, other: Point): Point;\n    static add(src: Point, other: number|Point, y?: number): Point {\n        const {x: nx, y: ny} = splitArgs(other, y);\n        return new Point(src.x + nx, src.y + ny);\n    }\n\n    static subtract(src: Point, x: number, y: number): Point;\n    static subtract(src: Point, other: Point): Point;\n    static subtract(src: Point, other: number|Point, y?: number): Point {\n        const {x: nx, y: ny} = splitArgs(other, y);\n        return new Point(src.x - nx, src.y - ny);\n    }\n\n    static multiply(a: Point, s: number, sy?: number): Point;\n    static multiply(a: Point, b: Point): Point;\n    static multiply(a: Point, b: Point|number, sy ?: number): Point {\n        if (sy !== undefined) {\n            return new Point(a.x * (b as number), a.y * sy);\n        }\n        else if ((b as any).x !== undefined) {\n            return new Point(a.x * (b as Point).x, a.y * (b as Point).y);\n        } else {\n            return new Point(a.x * (b as number), a.y * (b as number));\n        }\n    }\n\n    static interpolate(a: Point, b: Point, p: number): Point {\n        if(p === 0) return a;\n        if(p === 1) return b;\n        return new Point(a.x + (b.x - a.x) * p, a.y + (b.y - a.y) * p);\n    }\n\n    static componentMin(a: Point, b: Point): Point {\n        if(a.x <= b.x && a.y <= b.y) return a;\n        if(b.x <= a.x && b.y <= a.y) return b;\n        return new Point(Math.min(a.x, b.x), Math.min(a.y, b.y));\n    }\n    \n    static componentMax(a: Point, b: Point): Point {\n        if(a.x >= b.x && a.y >= b.y) return a;\n        if(b.x >= a.x && b.y >= a.y) return b;\n        return new Point(Math.max(a.x, b.x), Math.max(a.y, b.y));\n    }\n\n    static Bezier(pts: Point[], t: number): Point {\n        if(pts.length === 1) return pts[0];\n        else if(pts.length === 2) return Point.add(Point.multiply(pts[1], t), Point.multiply(pts[0], 1-t));\n        return Point.add(\n            Point.multiply(Point.Bezier(pts.slice(1), t), t),\n            Point.multiply(Point.Bezier(pts.slice(0, pts.length - 1), t), 1-t));\n    }\n\n    rotate(theta: number): Point {\n        const angle = Math.atan2(this.y, this.x);\n        const len = this.length();\n        return Point.fromAngle(angle + theta, len);\n    }\n}\n\nfunction splitArgs(x: Point|number, y ?: number): {x: number, y: number} {\n    if(y === undefined) return { x: (<Point>x).x, y: (<Point>x).y };\n    return {x: <number>x, y};\n}\n\nfunction splitArgsOrSingle(x: Point|number, y ?: number): {x: number, y: number} {\n    if(y === undefined)\n    {\n        if((x as Point).x !== undefined) {\n            return { x: (<Point>x).x, y: (<Point>x).y };\n        }\n        return { x: x as number, y: x as number };\n    } \n    return {x: <number>x, y};\n}","import Point from './Point';\nimport { Direction, ECardinalDirection, EDiagonalDirection } from './Direction';\n\nexport default class Rect {\n    constructor(public x: number, public y: number, public w: number, public h: number) { }\n\n    shift(x: number, y: number): Rect;\n    shift(p: Point): Rect;\n    shift(xp: number | Point, y?: number): Rect {\n        if (y === undefined) {\n            return new Rect(this.x + (xp as Point).x, this.y + (xp as Point).y, this.w, this.h);\n        }\n        return new Rect(this.x + (xp as number), this.y + y, this.w, this.h);\n    }\n\n    shiftBy(x: number, y: number): void;\n    shiftBy(p: Point): void;\n    shiftBy(xp: number | Point, y?: number): void {\n        if (y === undefined) {\n            this.x += (xp as Point).x;\n            this.y += (xp as Point).y;\n        } else {\n            this.x += (xp as number);\n            this.y += y;\n        }\n    }\n\n    edge(direction: ECardinalDirection): number {\n        switch (direction) {\n            case Direction.Up: return this.y;\n            case Direction.Down: return this.y + this.h;\n            case Direction.Left: return this.x;\n            case Direction.Right: return this.x + this.w;\n        }\n    }\n\n    corner(direction: EDiagonalDirection): Point {\n        switch (direction) {\n            case Direction.UpRight: return new Point(this.x, this.y);\n            case Direction.DownRight: return new Point(this.x, this.y);\n            case Direction.DownLeft: return new Point(this.x, this.y);\n            case Direction.UpLeft: return new Point(this.x, this.y);\n        }\n    }\n\n    equals(r: Rect) {\n        return r.x === this.x && r.y === this.y && r.w === this.w && r.h === this.h;\n    }\n}","export const TILES_WIDE = 28;\nexport const TILES_HIGH = 28;\nexport const TILE_SIZE = 16;","export default __webpack_public_path__ + \"42ace1eb95edbc899165c10bb9cc20ab.png\";","export default __webpack_public_path__ + \"e5352b303b79e08de36a8c4248cdbb28.png\";","\nexport interface ILoopControl {\n    break(): void;\n}\n\nexport function IterateRange(start: number, end: number, handle: (value: number, control: ILoopControl) => void): void {\n    let breakIteration = false;\n    const loopControl = {\n        break: () => {\n            breakIteration = true;\n        }\n    };\n\n    if (end === start) {\n        handle(start, loopControl);\n        return;\n    }\n\n    const direction = end > start ? 1 : -1;\n    const finalValue = end + direction;\n\n    for (let i = start; i !== finalValue && !breakIteration; i += direction) {\n        handle(i, loopControl);\n    }\n}","import Cell from './Cell';\nimport Rect from '../../common/position/Rectangle';\nimport Point from '../../common/position/Point';\nimport { Direction } from '../../common/position/Direction';\nimport { IterateRange } from '../../common/Iterate';\nimport * as Const from '../Constants';\nimport { createContext } from 'react';\nimport { ResizeCanvas } from '../../common/CanvasHelpers';\n\nexport default class World {\n    cells: Cell[][];\n\n    public prerender: HTMLCanvasElement;\n\n    constructor(public width: number, public height: number, generateCell: () => Cell) {\n        this.cells = [];\n        for (let x = 0; x < width; x++) {\n            const col = [];\n            for (let y = 0; y < height; y++) {\n                col.push(generateCell());\n            }\n            this.cells.push(col);\n        }\n\n        this.prerender = document.getElementById('world_prerender') as HTMLCanvasElement;\n    }\n\n    updatePrerender() {\n        ResizeCanvas(this.prerender, Const.TILE_SIZE * this.width, Const.TILE_SIZE * this.height);\n        const pctx = this.prerender.getContext('2d');\n        for (let x = 0; x < this.width; x++) {\n            for (let y = 0; y < this.height; y++) {\n                this.cells[x][y].paint(pctx, x * Const.TILE_SIZE, y * Const.TILE_SIZE);\n            }\n        }\n    }\n\n    tryMoveEntity(pos: Rect, vel: Point, onChecked?: (x: number, y: number) => void): void {\n        const xDirection = vel.x >= 0 ? Direction.Right : Direction.Left;\n        const yDirection = vel.y >= 0 ? Direction.Down : Direction.Up;\n        if (vel.x !== 0) {\n            const startXTile = Math.floor(pos.edge(xDirection) / Const.TILE_SIZE);\n            const endXTile = Math.floor((pos.edge(xDirection) + vel.x) / Const.TILE_SIZE);\n            const startYTile = Math.floor(pos.edge(Direction.Up) / Const.TILE_SIZE);\n            const endYTile = Math.floor((pos.edge(Direction.Down) - 1) / Const.TILE_SIZE);\n\n            let xColision: number | undefined;\n            IterateRange(startXTile, endXTile, (x, ctrl) => {\n                for (let y = startYTile; y <= endYTile; y++) {\n                    if (x < 0 || x >= this.width) {\n                        xColision = x;\n                        ctrl.break();\n                        return;\n                    }\n                    if (onChecked) onChecked(x, y);\n                    if (!this.cells[x][y].pathable) {\n                        ctrl.break();\n                        xColision = x;\n                    }\n                }\n            });\n\n            if (xColision === undefined) {\n                pos.x += vel.x;\n            } else {\n                if (vel.x >= 0) pos.x = xColision * Const.TILE_SIZE - pos.w;\n                else pos.x = (xColision + 1) * Const.TILE_SIZE;\n            }\n        }\n        if (vel.y !== 0) {\n            const startYTile = Math.floor(pos.edge(yDirection) / Const.TILE_SIZE);\n            const endYTile = Math.floor((pos.edge(yDirection) + vel.y) / Const.TILE_SIZE);\n            const startXTile = Math.floor(pos.edge(Direction.Left) / Const.TILE_SIZE);\n            const endXTile = Math.floor((pos.edge(Direction.Right) - 1) / Const.TILE_SIZE);\n\n            let yColision: number | undefined;\n            IterateRange(startYTile, endYTile, (y, ctrl) => {\n                for (let x = startXTile; x <= endXTile; x++) {\n                    if (y < 0 || y >= this.height) {\n                        yColision = y;\n                        ctrl.break();\n                        return;\n                    }\n                    if (onChecked) onChecked(x, y);\n                    if (!this.cells[x][y].pathable) {\n                        ctrl.break();\n                        yColision = y;\n                    }\n                }\n            });\n\n            if (yColision === undefined) {\n                pos.y += vel.y;\n            } else {\n                if (vel.y >= 0) pos.y = yColision * Const.TILE_SIZE - pos.h;\n                else pos.y = (yColision + 1) * Const.TILE_SIZE;\n            }\n        }\n    }\n}","import { IGraphic } from './IGraphic';\nimport { SpriteSheet } from '../common/assets/SpriteSheet';\n\nexport default class SheetGraphic implements IGraphic {\n\n    width: number;\n    height: number;\n\n    constructor(public sheet: SpriteSheet, private tileX: number, private tileY: number) {\n        this.width = sheet.spriteWidth;\n        this.height = sheet.spriteHeight;\n    }\n\n    paint(ctx: CanvasRenderingContext2D, tx: number, ty: number, tw: number, th: number): void {\n        this.sheet.render(ctx, tx, ty, tw, th, this.tileX, this.tileY);\n    }\n\n}","import { IGraphic } from '../IGraphic';\nimport * as Const from '../Constants';\nimport { SpriteSheet } from '../../common/assets/SpriteSheet';\nimport SheetGraphic from '../SheetGraphic';\n\nconst GRASS_TILES: [number, number][] =\n[\n    [10, 0],\n    [10, 0],\n    [10, 0],\n    [10, 0],\n    [10, 0],\n    [7, 1],\n    [7, 1],\n    [10, 1],\n    [10, 2],\n    [9, 2]\n];\n\nexport default class Cell {\n    constructor(public pathable: boolean, public graphic: IGraphic) {\n\n    }\n\n    paint(ctx: CanvasRenderingContext2D, tx: number, ty: number) {\n        this.graphic.paint(ctx, tx, ty, Const.TILE_SIZE, Const.TILE_SIZE);\n    }\n\n    static GrassFloor(sheet: SpriteSheet): Cell {\n        const grassCoords = GRASS_TILES[Math.floor(Math.random() * GRASS_TILES.length)];\n        return new Cell(true, new SheetGraphic(sheet, grassCoords[0], grassCoords[1]));\n    }\n\n    static RockWall(sheet: SpriteSheet): Cell {\n        return new Cell(false, new SheetGraphic(sheet, 7, 24));\n    }\n}","import Axios from 'axios-observable';\n\nexport class FileResource<T> {\n    public body: T;\n    constructor(fileUrl: string, private onload: () => void) {\n        Axios.get(fileUrl).subscribe(data => {\n            this.body = data.data as T;\n            this.onload();\n        });\n    }\n}","import * as Const from './Constants';\nimport AssetLoader from '../common/assets/AssetLoader';\nimport { SpriteSheet } from '../common/assets/SpriteSheet';\nimport arrowsUrl from '../common-assets/arrows.png';\nimport tilesUrl from '../common-assets/rpg1.png';\nimport wizardUrl from '../common-assets/wizard16.png';\nimport { NearestNeighborScaling, ResizeCanvas } from '../common/CanvasHelpers';\nimport NearestNeighborScalingHelper from '../common/NearestNeighborScalingHelper';\nimport World from './world/World';\nimport Cell from './world/Cell';\nimport Rect from '../common/position/Rectangle';\nimport KeyboardManager from '../common/input/KeyboardManager';\nimport Point from '../common/position/Point';\nimport { FileResource } from '../common/assets/FileResource';\n\nconst CAMERA_SLOWDOWN_FACTOR = 3;\n\nlet assets: {\n    tiles: SpriteSheet,\n    wizard: SpriteSheet,\n    arrows: SpriteSheet,\n    tilesets: FileResource<any>\n};\n\nlet ctx: CanvasRenderingContext2D;\n\nlet world: World;\n\nlet keys: KeyboardManager;\n\nexport default function Run() {\n    const assetLoader = new AssetLoader();\n    assets = {\n        tiles: new SpriteSheet(16, 16, tilesUrl, assetLoader.registerAssetLoadCallback()),\n        wizard: new SpriteSheet(16, 16, wizardUrl, assetLoader.registerAssetLoadCallback()),\n        arrows: new SpriteSheet(16, 16, arrowsUrl, assetLoader.registerAssetLoadCallback()),\n        tilesets: new FileResource('../dist/assets/rpgtest/tilesets.json', assetLoader.registerAssetLoadCallback()),\n    };\n    keys = new KeyboardManager(document.body);\n    assetLoader.onAllFinished(assetLoadDone);\n}\n\nfunction assetLoadDone() {\n    world = new World(Const.TILES_WIDE * 2, Const.TILES_HIGH * 2, () => {\n        if (Math.random() <= 0.15) {\n            return Cell.RockWall(assets.tiles);\n        }\n        else {\n            return Cell.GrassFloor(assets.tiles);\n        }\n    });\n    world.updatePrerender();\n    const canvas = document.getElementById('mainCanvas') as HTMLCanvasElement;\n    ctx = canvas.getContext('2d');\n    const scaleHelper = new NearestNeighborScalingHelper(canvas, ctx, Const.TILE_SIZE * Const.TILES_WIDE, Const.TILE_SIZE * Const.TILES_HIGH, true, () => { return; });\n    tick();\n}\n\nconst camPos = new Point(0, 0);\nconst playerPos = new Rect(0, 0, 14, 14);\nlet toggle = false;\nfunction tick() {\n    ctx.clearRect(0, 0, Const.TILES_WIDE * Const.TILE_SIZE, Const.TILES_HIGH * Const.TILE_SIZE);\n    NearestNeighborScaling(ctx);\n    ctx.save();\n    let cx = 0;\n    let cy = 0;\n    if (world.width > Const.TILES_WIDE) {\n        cx = Math.max(0, Math.min((world.width - Const.TILES_WIDE) * Const.TILE_SIZE, playerPos.x - (Const.TILE_SIZE * Const.TILES_WIDE / 2)));\n    }\n    if (world.height > Const.TILES_HIGH) {\n        cy = Math.max(0, Math.min((world.height - Const.TILES_HIGH) * Const.TILE_SIZE, playerPos.y - (Const.TILE_SIZE * Const.TILES_HIGH / 2)));\n    }\n\n    camPos.multWith(CAMERA_SLOWDOWN_FACTOR, CAMERA_SLOWDOWN_FACTOR)\n          .addWith(cx, cy)\n          .divideWith(CAMERA_SLOWDOWN_FACTOR + 1, CAMERA_SLOWDOWN_FACTOR + 1);\n\n    ctx.translate(-camPos.x, -camPos.y);\n    ctx.drawImage(world.prerender, 0, 0);\n    keys.update();\n\n    ctx.fillStyle = 'blue';\n    ctx.fillRect(playerPos.x, playerPos.y, playerPos.w, playerPos.h);\n    const vel = new Point(0, 0);\n    if (keys.isKeyDown('a')) {\n        vel.x = -3;\n    }\n    if (keys.isKeyDown('d')) {\n        vel.x = 3;\n    }\n    if (keys.isKeyDown('w')) {\n        vel.y = -3;\n    }\n    if (keys.isKeyDown('s')) {\n        vel.y = 3;\n    }\n    ctx.fillStyle = 'yellow';\n    ctx.globalAlpha = 0.6;\n    world.tryMoveEntity(playerPos, vel, (tx, ty) => {\n        ctx.fillRect(tx * Const.TILE_SIZE, ty * Const.TILE_SIZE, Const.TILE_SIZE, Const.TILE_SIZE);\n    });\n    ctx.globalAlpha = 1;\n\n    toggle = !toggle;\n    if (toggle) {\n        ctx.fillStyle = 'white';\n        ctx.fillRect(0, 0, 10, 10);\n    }\n    ctx.restore();\n    requestAnimationFrame(() => tick());\n}"],"names":["KeyState","constructor","keys","changes","isKeyDown","key","this","indexOf","isKeyUp","KeyWatcher","attachedElement","logKeyNames","undefined","addEventListener","k","onKeyDown","onKeyUp","downKeys","console","log","push","change","idx","splice","Update","storeKeys","storeChanges","slice","KeyboardManager","element","watcher","prvState","currentState","update","isKeyPressed","isKeyReleased","Direction","directionValues","allDirections","Up","UpRight","Right","DownRight","Down","DownLeft","Left","UpLeft","ToPoint","direction","Point","x","y","static","angle","distance","Math","cos","sin","lengthSq","dot","length","sqrt","clone","negate","negateInPlace","p1","p2","dotWith","other","normalize","len","multiply","atan2","truncate","trunc","addWith","nx","ny","splitArgs","multWith","splitArgsOrSingle","subtractWith","divideWith","equals","src","a","b","sy","p","min","max","pts","t","add","Bezier","rotate","theta","fromAngle","Rect","w","h","shift","xp","shiftBy","edge","corner","r","TILE_SIZE","IterateRange","start","end","handle","breakIteration","loopControl","break","finalValue","i","World","width","height","generateCell","cells","col","prerender","document","getElementById","updatePrerender","pctx","getContext","paint","tryMoveEntity","pos","vel","onChecked","xDirection","yDirection","startXTile","floor","endXTile","startYTile","endYTile","xColision","ctrl","pathable","yColision","SheetGraphic","sheet","tileX","tileY","spriteWidth","spriteHeight","ctx","tx","ty","tw","th","render","GRASS_TILES","Cell","graphic","grassCoords","random","FileResource","fileUrl","onload","subscribe","data","body","assets","world","Run","assetLoader","AssetLoader","tiles","SpriteSheet","registerAssetLoadCallback","wizard","arrows","tilesets","onAllFinished","assetLoadDone","RockWall","GrassFloor","canvas","NearestNeighborScalingHelper","tick","camPos","playerPos","toggle","clearRect","save","cx","cy","CAMERA_SLOWDOWN_FACTOR","translate","drawImage","fillStyle","fillRect","globalAlpha","restore","requestAnimationFrame"],"sourceRoot":""}