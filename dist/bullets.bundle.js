(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{63:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));class s{constructor(t,e){this.x=t,this.y=e}LengthSq(){return s.Dot(this,this)}Length(){return Math.sqrt(this.LengthSq())}Clone(){return new s(this.x,this.y)}Negate(){return new s(-this.x,-this.y)}NegateInPlace(){return this.x=-this.x,this.y=-this.y,this}static Dot(t,e){return t.x*e.x+t.y*e.y}DotWith(t){return s.Dot(this,t)}Direction(){return Math.atan2(this.y,this.x)}AddWith(t,e){const i=void 0===e?t.x:t,s=void 0===e?t.y:e;return this.x+=i,this.y+=s,this}MultWith(t,e){const i=void 0===e?t.x:t,s=void 0===e?t.y:e;return this.x*=i,this.y*=s,this}SubtractWith(t,e){const i=void 0===e?t.x:t,s=void 0===e?t.y:e;return this.x-=i,this.y-=s,this}DivideWith(t,e){const i=void 0===e?t.x:t,s=void 0===e?t.y:e;return this.x/=i,this.y/=s,this}Equals(t){return this.x===t.x&&this.y===t.y}static Add(t,e){return new s(t.x+e.x,t.y+e.y)}static Multiply(t,e,i){return void 0!==i?new s(t.x*e,t.y*i):void 0!==e.x?new s(t.x*e.x,t.y*e.y):new s(t.x*e,t.y*e)}}},69:function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));class s{constructor(t,e){this.keys=t,this.changes=e}isKeyDown(t){return-1!==this.keys.indexOf(t)}isKeyUp(t){return-1===this.keys.indexOf(t)}}class n{constructor(t,e){this.attachedElement=t,this.logKeyNames=e,void 0===this.logKeyNames&&(this.logKeyNames=!1),t.addEventListener("keydown",t=>this.onKeyDown(t)),t.addEventListener("keyup",t=>this.onKeyUp(t)),this.downKeys=[],this.changes=[]}onKeyDown(t){this.logKeyNames&&console.log(t.key);-1===this.downKeys.indexOf(t.key)&&(this.changes.push({key:t.key,change:"press"}),this.downKeys.push(t.key))}onKeyUp(t){this.changes.push({key:t.key,change:"release"});const e=this.downKeys.indexOf(t.key);this.downKeys.splice(e,1)}Update(){const t=this.downKeys,e=this.changes;return this.downKeys=t.slice(),this.changes=[],new s(t,e)}}class h{constructor(t,e){this.watcher=new n(t,e),this.prvState=this.currentState=this.watcher.Update()}update(){this.prvState=this.currentState,this.currentState=this.watcher.Update()}isKeyDown(t){return this.currentState.isKeyDown(t)}isKeyUp(t){return this.currentState.isKeyUp(t)}isKeyPressed(t){return this.currentState.isKeyDown(t)&&this.prvState.isKeyUp(t)}isKeyReleased(t){return this.currentState.isKeyUp(t)&&this.prvState.isKeyDown(t)}changes(){return this.currentState.changes}}},79:function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return O}));var s=i(16),n=1e3,h=800,r=i(20),o=i(9),a=i(17),c=i.p+"12a4e8650485f6c9e051cf30dfcfc746.png",l=i(63);const y=2*Math.PI;class u{static normalize(t){return(t%=y)<0&&(t+=y),t}static relativeNormalize(t){return(t%=y)>Math.PI?t-=y:t<-Math.PI&&(t+=y),t}static relativeAngle(t,e){return u.relativeNormalize(t-e)}}const d=.2,g=20,f=.998,w=.99,p=.06,v=.002,x=.004,D=.98,M=.003,K=120;class k{constructor(t){this.sprites=t,this.position=new l.a(0,0),this.velocity=new l.a(0,0),this.angularVelocity=0,this.rotation=0,this.engineDeflect=0,this.tgtDeflect=0}tick(t){t.isKeyDown("w")?this.isEngineOn=!0:this.isEngineOn=!1,t.isKeyDown("a")?this.tgtDeflect=1:t.isKeyDown("d")?this.tgtDeflect=-1:this.tgtDeflect=0,this.tgtDeflect>=this.engineDeflect?this.engineDeflect=Math.min(this.engineDeflect+p,this.tgtDeflect):this.engineDeflect=Math.max(this.engineDeflect-p,this.tgtDeflect);const e=Math.atan2(this.velocity.y,this.velocity.x),i=u.relativeAngle(this.rotation,e),s=i/Math.PI;this.angularVelocity*=D,this.angularVelocity-=this.tgtDeflect*v+this.engineDeflect*x*(this.isEngineOn?1:0),this.rotation+=this.angularVelocity;const n=(1-Math.abs(s))*f+Math.abs(s)*w;this.velocity.MultWith(n,n),this.isEngineOn&&(this.velocity.x+=d*Math.cos(this.rotation),this.velocity.y+=d*Math.sin(this.rotation));let h=this.velocity.Length(),r=this.velocity.Direction();h>=g&&(h=g);let o=Math.sin(i);o*=Math.min(h/K,1),o*=M,r+=o,this.velocity.x=Math.cos(r)*h,this.velocity.y=Math.sin(r)*h,this.position.AddWith(this.velocity)}render(t){t.save(),Object(o.c)(t,this.position.x,this.position.y,4,8,this.rotation+Math.PI/2),this.isEngineOn&&this.sprites.rotrender(t,4,11,8,16,Math.floor(4*Math.random()),1,this.engineDeflect*Math.PI/4,4,2),this.tgtDeflect>0?this.sprites.rotrender(t,7,4,8,16,Math.floor(2*Math.random()),2,0,3,4):this.tgtDeflect<0&&this.sprites.rotrender(t,1,4,8,16,2+Math.floor(2*Math.random()),2,0,6,4),this.sprites.render(t,0,0,8,16,0,0),t.restore()}}var m=i(69);let S;function O(){const t=new s.a,e=new a.a(8,16,c,t.registerAssetLoadCallback());t.onAllFinished(()=>function(t){const e=document.getElementById("canvas"),i=e.getContext("2d");S=new r.a(e,i,n,h,!0,()=>{}),Object(o.a)(i);const s=new m.a(document.body,!1);!function t(e,i,s,r){i.update(),e.tick(i),function(t,e,i){Object(o.a)(i),i.fillStyle="black",i.fillRect(0,0,n,h),i.save();const s=l.a.Add(t.position,l.a.Multiply(t.velocity,10));i.translate(-(s.x-n/2),-(s.y-h/2)),i.fillStyle="gray";for(let t=400*Math.floor((s.y-h/2)/400);t<=400*Math.floor((s.y+h/2)/400);t+=400)i.fillRect(s.x-n/2,t,n,3);for(let t=400*Math.floor((s.x-n/2)/400);t<=400*Math.floor((s.x+n/2)/400);t+=400)i.fillRect(t,s.y-h/2,3,h);t.render(i),i.restore()}(e,0,r),requestAnimationFrame(()=>t(e,i,s,r))}(new k(t),s,e,i)}(e))}}}]);
//# sourceMappingURL=bullets.bundle.js.map