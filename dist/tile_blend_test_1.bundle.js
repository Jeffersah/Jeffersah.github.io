"use strict";(self.webpackChunktrading_game=self.webpackChunktrading_game||[]).push([[384],{2126:(e,t,i)=>{i.r(t),i.d(t,{default:()=>w});var s=i(127),o=i(3486),l=i(5901);const n=i.p+"e6ca7ebcac9136ce5511288e898c8371.png",r=i.p+"f1cd5c392c5447559f3a20ac58e20646.png";var d,f=i(615);!function(e){e[e.Rock=0]="Rock",e[e.Lava=1]="Lava"}(d||(d={}));class a{constructor(e,t){this.tilesWide=e,this.tilesHigh=t,this.tiles=new Array(t*e);for(let i=0;i<e*t;i++)this.tiles[i]=d.Rock;this.subTileIds=new Array(t*e*4);for(let i=0;i<e*t*4;i++)this.subTileIds[i]=0;for(let i=0;i<e;i++)for(let e=0;e<t;e++)this.updateTile(i,e)}fixCoords(e,t){return e+t*this.tilesWide}fixSubCoords(e,t,i){return 4*e+t*this.tilesWide*4+(i-f.Nm.UpRight)/2}getTile(e,t){return e<0||t<0||e>=this.tilesWide||t>=this.tilesWide?d.Lava:(this.fixCoords(e,t),this.tiles[this.fixCoords(e,t)])}getSubTileId(e,t,i){if(e<0||t<0||e>=this.tilesWide||t>=this.tilesWide)return 0;const s=this.fixSubCoords(e,t,i);return this.subTileIds[s]}setTile(e,t,i){if(e<0||t<0||e>=this.tilesWide||t>=this.tilesWide)return;const s=this.fixCoords(e,t);this.tiles[s]!==i&&(this.tiles[s]=i,this.updateSelfAndAdjacent(e,t))}updateSelfAndAdjacent(e,t){for(let i=-1;i<=1;i++)for(let s=-1;s<=1;s++)this.updateTile(e+i,t+s)}updateTile(e,t){if(e<0||t<0||e>=this.tilesWide||t>=this.tilesWide)return;const i=this.fixCoords(e,t),s=this.tiles[i];let o=0;f.Dz.forEach(((i,l)=>{const n=1<<l,r=(0,f.jR)(i);this.getTile(r.x+e,r.y+t)!==s&&(o|=n)})),this.subTileIds[this.fixSubCoords(e,t,f.Nm.UpRight)]=7&o,this.subTileIds[this.fixSubCoords(e,t,f.Nm.DownRight)]=o>>2&7,this.subTileIds[this.fixSubCoords(e,t,f.Nm.DownLeft)]=o>>4&7,this.subTileIds[this.fixSubCoords(e,t,f.Nm.UpLeft)]=o>>6|(1&o)<<2&7}}var h=i(8785);let c,u,g,x,b;function v(){const e=document.getElementById("canvas");x=new a(20,20),(0,l.f5)(e,16*x.tilesWide*3,16*x.tilesHigh*3),b=e.getContext("2d"),(0,l.Ci)(b),function(e,t,i){for(let s=0;s<t.tilesWide;s++)for(let o=0;o<t.tilesHigh;o++)T(e,t,i,s,o)}(b,x,c),e.addEventListener("mousemove",C),e.addEventListener("mouseleave",p),e.addEventListener("mousedown",m)}function T(e,t,i,s,o){for(let l=0;l<4;l++){const n=f.Nm.UpRight+2*l,r=t.getSubTileId(s,o,n);let a=l;t.getTile(s,o)===d.Lava&&(a+=4);const h=16*s+(1===(0,f.jR)(n).x?8:0),c=16*o+(1===(0,f.jR)(n).y?8:0);i.render(e,3*h,3*c,24,24,r,a)}}function C(e){const t=new h.Z(Math.floor(e.offsetX/48),Math.floor(e.offsetY/48));void 0!==g?t.equals(g)||(T(b,x,c,g.x,g.y),u.render(b,16*t.x*3,16*t.y*3,48,48,1,0),g=t):(u.render(b,16*t.x*3,16*t.y*3,48,48,1,0),g=t)}function p(e){void 0!==g&&(g=void 0)}function m(e){const t=new h.Z(Math.floor(e.offsetX/48),Math.floor(e.offsetY/48)),i=x.getTile(t.x,t.y);x.setTile(t.x,t.y,i===d.Lava?d.Rock:d.Lava);for(let e=-1;e<=1;e++)for(let t=-1;t<=1;t++)T(b,x,c,g.x+e,g.y+t);u.render(b,16*t.x*3,16*t.y*3,48,48,1,0)}const w=function(){const e=new s.Z;c=new o.V(8,8,n,e.registerAssetLoadCallback()),u=new o.V(16,16,r,e.registerAssetLoadCallback()),g=void 0,e.onAllFinished(v)}}}]);
//# sourceMappingURL=tile_blend_test_1.bundle.js.map