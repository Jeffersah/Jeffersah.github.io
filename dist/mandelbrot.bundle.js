(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{85:function(t,e,s){"use strict";s.r(e),s.d(e,"default",(function(){return l}));var i=s(70);class n{constructor(t,e){this.canvasWidth=t,this.canvasHeight=e,this.finished=!1,this.scale=this.maxScale=1<<this.fastLog2(Math.min(t,e)),this.x=this.y=0}fastLog2(t){let e=0;for(;t>0;)e++,t>>=1;return e}X(){return this.x*this.scale}Y(){return this.y*this.scale}Scale(){return this.scale}Advance(){if(this.x++,this.x*this.scale>=this.canvasWidth&&(this.x=0,this.y++,this.y*this.scale>=this.canvasHeight)){if(this.y=0,1===this.scale)return this.finished=!0,!0;this.scale/=2}return!1}Reset(){this.finished=!1,this.scale=this.maxScale,this.x=this.y=0}}const h=new i.a(0,255,0,200,0,0);class a{constructor(t,e){this.canvas=t,this.func=e,this.repainter=new n(800,800),this.ctx=t.getContext("2d"),this.screenRange=new i.d(new i.c(0,t.offsetWidth),new i.c(0,t.offsetHeight))}Paint(t){for(let e=0;e<16e3&&!this.repainter.finished;e++){const e=this.repainter.X(),s=this.repainter.Y(),i=this.repainter.Scale(),n=this.screenRange.ConvertTo({x:e,y:s},t);this.ctx.fillStyle=this.CalcColor(n),this.ctx.fillRect(e,s,i,i),this.repainter.Advance()}}CalcColor(t){const e=new i.b(t.x,t.y);let s=new i.b(t.x,t.y),n=0;for(;n<255&&s.absSq()<this.func.MaxAbsSq();)s=this.func.Iterate(s,e),n++;if(s.absSq()<this.func.MaxAbsSq())return"white";const a=n/255;return h.ToColor(a)}ResetPaint(){this.repainter.Reset()}}class r{Iterate(t,e){return t.multiplyWith(t),t.addWith(e),t}MaxAbsSq(){return 2}}class o{constructor(t){this.c=t,this.radius=(Math.sqrt(4*t.abs()+1)+1)/2}Iterate(t,e){return t.multiplyWith(t),t.addWith(this.c),t}MaxAbsSq(){return this.radius}}class c{constructor(t,e,s,n){this.control=t,this.paintWindow=e,this.renderer=s,this.onSelect=n,t.addEventListener("mousedown",this.handleMouseDown.bind(this)),t.addEventListener("mouseup",this.handleMouseUp.bind(this)),t.addEventListener("mouseleave",this.handleMouseLeave.bind(this)),t.addEventListener("mousemove",this.handleMouseMove.bind(this)),t.addEventListener("wheel",this.handleScroll.bind(this)),this.screenBounds=new i.d(new i.c(0,t.offsetWidth),new i.c(0,t.offsetHeight))}reset(){this.paintWindow=new i.d(new i.c(-1,1),new i.c(-1,1)),this.renderer.ResetPaint()}handleMouseDown(t){if(0===t.button)this.grabX=t.offsetX,this.grabY=t.offsetY,this.isGrabbed=!0,t.preventDefault();else if(1===t.button){const e=this.screenBounds.ConvertTo({x:t.offsetX,y:t.offsetY},this.paintWindow);this.onSelect(e.x,e.y),t.preventDefault()}}handleMouseUp(){this.isGrabbed=!1}handleMouseLeave(){this.isGrabbed=!1}handleMouseMove(t){if(4===t.buttons){const e=this.screenBounds.ConvertTo({x:t.offsetX,y:t.offsetY},this.paintWindow);this.onSelect(e.x,e.y),t.preventDefault()}if(!this.isGrabbed)return;const e=t.offsetX-this.grabX,s=t.offsetY-this.grabY,i=this.screenBounds.GetPercentage(e,s);this.paintWindow.ShiftByPercentage(-i.x,-i.y),this.assertBounds(),this.renderer.ResetPaint(),this.grabX=t.offsetX,this.grabY=t.offsetY}handleScroll(t){const e=t.deltaY/3,s=Math.pow(1.1,e),i=this.screenBounds.GetPercentage(t.offsetX,t.offsetY);this.paintWindow.AspectScale(s,i.x,i.y),this.assertBounds(),this.renderer.ResetPaint(),t.preventDefault()}assertBounds(){(this.paintWindow.xRange.Length()>4||this.paintWindow.yRange.Length()>4)&&(this.paintWindow.xRange.ScaleTo(4,.5),this.paintWindow.yRange.ScaleTo(4,.5)),this.assertRangeBounds(this.paintWindow.xRange),this.assertRangeBounds(this.paintWindow.yRange)}assertRangeBounds(t){t.min<-2&&t.Shift(-2-t.min),t.max>2&&t.Shift(2-t.max)}Tick(){this.renderer.Paint(this.paintWindow)}}let d,u;function l(){const t=document.getElementById("mainCanvas"),e=document.getElementById("subCanvas");t.setAttribute("width","800"),t.setAttribute("height","800"),t.style.width="800px",t.style.height="800px",e.setAttribute("width","800"),e.setAttribute("height","800"),e.style.width="800px",e.style.height="800px",d=new c(t,new i.d(new i.c(-1,1),new i.c(-1,1)),new a(t,new r),f),u=new c(e,new i.d(new i.c(-1,1),new i.c(-1,1)),new a(e,new o(new i.b(0,0))),(t,e)=>{}),setTimeout(w,0)}function f(t,e){u.renderer.func=new o(new i.b(t,e)),u.reset()}function w(){d.Tick(),u.Tick(),requestAnimationFrame(w)}}}]);
//# sourceMappingURL=mandelbrot.bundle.js.map