"use strict";(self.webpackChunktrading_game=self.webpackChunktrading_game||[]).push([[76],{711:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var l=n(7363),o=n(127),i=n(3486),r=n(7604),g=n(5907);function s(e){var t;return null!==(t=e.top)&&void 0!==t?t:e.edges.map((e=>2===e?"any":[e]))}function f(e){var t;return null!==(t=e.bottom)&&void 0!==t?t:e.edges.map((e=>0===e?"any":[e]))}function u(e,t){for(let n=0;n<e.length;n++)if("any"!==e[n]&&"any"!==t[n]){if(0===e[n].length||0===t[n].length)return!1;if(!h(e[n],t[n]))return!1}return!0}function h(e,t){for(let n=0;n<e.length;n++)if(-1!==t.indexOf(e[n]))return!0;return!1}const a=[{tile:[0,0],edges:[2,2,2,2]},{tile:[1,0],edges:[1,0,1,0]},{tile:[2,0],edges:[0,1,0,1]},{tile:[3,0],edges:[1,0,0,0],bottom:[[1,2],"any",[1,2],"any"],top:[[],[],[],[]]},{tile:[4,0],edges:[0,0,1,0],bottom:[[1,2],"any",[1,2],"any"],top:[[],[],[],[]]},{tile:[5,0],edges:[0,1,0,0],bottom:["any",[1,2],"any",[1,2]],top:[[],[],[],[]]},{tile:[6,0],edges:[0,0,0,1],bottom:["any",[1,2],"any",[1,2]],top:[[],[],[],[]]},{tile:[7,0],edges:[1,1,1,1]},{tile:[0,1],edges:[1,1,0,1]},{tile:[1,1],edges:[1,1,1,0]},{tile:[2,1],edges:[0,1,1,1]},{tile:[3,1],edges:[1,0,1,1]},{tile:[4,1],edges:[1,1,0,0]},{tile:[5,1],edges:[0,1,1,0]},{tile:[6,1],edges:[0,0,1,1]},{tile:[7,1],edges:[1,0,0,1]},{tile:[0,2],edges:[1,0,2,0]},{tile:[1,2],edges:[0,1,0,2]},{tile:[2,2],edges:[2,0,1,0]},{tile:[3,2],edges:[0,2,0,1]},{tile:[4,2],edges:[1,0,1,0],bottom:[[1,2],[1,2],[1,2],[1,2]]},{tile:[5,2],edges:[0,1,0,1],bottom:[[1,2],[1,2],[1,2],[1,2]]},{tile:[5,3],edges:[0,0,0,0]}],d=[{x:1,y:0,z:0},{x:0,y:1,z:0},{x:-1,y:0,z:0},{x:0,y:-1,z:0},{x:0,y:0,z:1},{x:0,y:0,z:-1}],c=n.p+"c169d19bb90720608b4e6ba8299edfb4.png";function p(e,t,n,l){if(b(n))return null;let o=[];y(t).forEach((t=>{e[t].neighbors[l].forEach((e=>{-1===o.indexOf(e)&&o.push(e)}))}));let i=y(n),r=!1;for(var g=i.length-1;g>=0;g--)-1===o.indexOf(i[g])&&(i.splice(g,1),r=!0);return r?1===i.length?i[0]:0===i.length?o[0]:i:null}function y(e){return b(e)?[e]:e}function b(e){return"number"==typeof e}let m;function x(){const e=new o.Z;m=new i.V(32,32,c,e.registerAssetLoadCallback()),e.onAllFinished((()=>function(){const e=function(e){const t=[];return e.forEach((n=>{let l={id:t.length,neighbors:[[],[],[],[],[],[]]};for(let t=0;t<e.length;t++){let o=e[t];for(let e=0;e<4;e++)o.edges[(e+2)%4]===n.edges[e]&&l.neighbors[e].push(t);u(s(o),f(n))&&l.neighbors[4].push(t),u(s(n),f(o))&&l.neighbors[5].push(t)}for(var o=0;o<l.neighbors.length;o++)l.neighbors[o].sort(((e,t)=>e-t));t.push(l)})),t}(a),t=document.getElementById("canvas"),n=t.getContext("2d");let l=function(e,t,n,l){let o=[];for(let t=0;t<e.length;t++)o.push(t);let i=[];for(let e=0;e<t;e++){let e=[];for(let t=0;t<n;t++){let t=[];for(let e=0;e<l;e++)t.push([...o]);e.push(t)}i.push(e)}return i}(e,40,40,1);new r.Z(t,n,1200,800,!0,(()=>v(a,m,l,n))),z(a,e,m,l,n)}()))}function z(e,t,n,l,o){v(e,n,l,o),function(e,t){let n=1/0,l=[];for(let e=0;e<t.length;e++)for(let o=0;o<t[e].length;o++)for(let i=0;i<t[e][o].length;i++)if(!b(t[e][o][i])){let r=t[e][o][i].length;r<n?(n=r,l=[{x:e,y:o,z:i}]):r===n&&l.push({x:e,y:o,z:i})}if(!isFinite(n))return!0;let o=Math.floor(Math.random()*l.length),{x:i,y:r,z:g}=l[o],s=y(t[i][r][g]),f=s[Math.floor(Math.random()*s.length)];return t[i][r][g]=f,function(e,t,n,l,o){let i=[{x:n,y:l,z:o}];for(;i.length>0;){let{x:n,y:l,z:o}=i.pop(),r=t[n][l][o];for(let g=0;g<6;g++){let s=d[g];if(n+s.x<0||l+s.y<0||o+s.z<0||n+s.x>=t.length||l+s.y>=t[n].length||o+s.z>=t[n][l].length)continue;let f=p(e,r,t[n+s.x][l+s.y][o+s.z],g);null!==f&&(t[n+s.x][l+s.y][o+s.z]=f,i.push({x:n+s.x,y:l+s.y,z:o+s.z}))}}}(e,t,i,r,g),!1}(t,l)||requestAnimationFrame((()=>z(e,t,n,l,o)))}function v(e,t,n,l){l.clearRect(0,0,1200,800);let o=[600,800];for(let i=0;i<n[0][0].length;i++)for(let r=n.length-1;r>=0;r--)for(let s=n[r].length-1;s>=0;s--){let f=y(n[r][s][i]);if(f.length<=12){if(0===f.length)continue;l.globalAlpha=1/f.length;let n=16*(r-s),u=8*-(r+s)-16*i;for(const i of f){let r=e[i];t.getSprite(r.tile[0],r.tile[1],32,32).draw(l,new g.Z(n+o[0],u+o[1],32,32),0)}}}}function w(){return l.useEffect((()=>x())),l.createElement("div",{style:{top:0,bottom:0,left:0,right:0,position:"absolute"}},l.createElement("canvas",{id:"canvas",style:{top:0,bottom:0,left:0,right:0,position:"absolute"}}))}}}]);
//# sourceMappingURL=wave-collapse.bundle.js.map