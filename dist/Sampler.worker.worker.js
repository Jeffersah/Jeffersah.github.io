(()=>{"use strict";function t(t,e){return t.map(((t,r)=>t+e[r]))}function e(t,e){return[t[0]*e[0]-t[1]*e[1]-t[2]*e[2]-t[3]*e[3],t[0]*e[1]+t[1]*e[0]-t[2]*e[3]+t[3]*e[2],t[0]*e[2]+t[1]*e[3]+t[2]*e[0]-t[3]*e[1],t[0]*e[3]-t[1]*e[2]+t[2]*e[1]+t[3]*e[0]]}function r(t,e){return t.map(((t,r)=>t*e[r])).reduce(((t,e)=>t+e))}const o=new class{constructor(){this.Name="Burning Ship",this.ShaderCode="\n        vec4 zabs = abs(z);\n        return c_mult(zabs, zabs) + c;\n    ",this.MaxAmplitude=16}Iterate(r,o){let n=r.map(Math.abs);return t(e(n,n),o)}},n=[new class{constructor(){this.Name="Mandelbrot",this.ShaderCode="return c_mult(z, z) + c;",this.MaxAmplitude=2}Iterate(r,o){return t(e(r,r),o)}},o,new class{constructor(){this.Name="Tricorn",this.ShaderCode="vec4 j = c_conj(z); return c_mult(j, j) + c;",this.MaxAmplitude=2}Iterate(r,o){let n=[(s=r)[0],-s[1],-s[2],-s[3]];var s;return t(e(n,n),o)}}],s=self;function a(t,e,o,n,s){let a=[0,0,0,0],l=[e,-o,n,0];for(let e=0;e<=s;e++){if(r(a,a)>t.MaxAmplitude)return(e-1)/s;a=t.Iterate(a,l)}return 1}s.addEventListener("message",(t=>{var e;const r=t.data;console.log("Beginning sampler req for "+r.fractalName);const o=n.find((t=>t.Name===r.fractalName));let l=[],u=r.from.map(((t,e)=>r.to[e]-t));for(let t=0;t<r.resolution;t++)for(let n=0;n<r.resolution;n++)for(let s=0;s<r.resolution;s++){const c=r.from[0]+t*u[0]/r.resolution,i=r.from[1]+n*u[1]/r.resolution,m=r.from[2]+s*u[2]/r.resolution;null!==(e=a(o,c,i,m,100)<r.sampleFloor)&&void 0!==e&&e||l.push(c,i,m,a(o,c,i,m,100))}console.log("Done sampler req");const c={data:new Float32Array(l),resolution:r.resolution};s.postMessage(c)}))})();
//# sourceMappingURL=Sampler.worker.worker.js.map