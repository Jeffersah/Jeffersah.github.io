{"version":3,"sources":["webpack:///./src/projects/glsl-fracaudio/AmplitudeMode.ts","webpack:///./src/projects/glsl-fracaudio/ColorFunctions/FireColor.ts","webpack:///./src/projects/glsl-fracaudio/ColorFunctions/GrayscaleColor.ts","webpack:///./src/projects/glsl-fracaudio/ColorFunctions/HueColor.ts","webpack:///./src/projects/glsl-fracaudio/ColorFunctions/PaperColor.ts","webpack:///./src/projects/glsl-fracaudio/FractalAudioPlayer.ts","webpack:///./src/projects/glsl-fracaudio/Fractals/BurningShip.ts","webpack:///./src/projects/glsl-fracaudio/Fractals/Feather.ts","webpack:///./src/projects/glsl-fracaudio/Fractals/Mandelbrot.ts","webpack:///./src/projects/glsl-fracaudio/Fractals/Square.ts","webpack:///./src/projects/glsl-fracaudio/ShaderCode.ts","webpack:///./src/projects/glsl-fracaudio/GlslFrameRenderer.ts","webpack:///./src/projects/glsl-fracaudio/RendererWrapperComponent.ts","webpack:///./src/views/projects/glsl-fracaudio/GlslFractalAudioComponent.tsx","webpack:///./src/projects/common/position/Point.ts","webpack:///./node_modules/react-dropdown/dist/index.js","webpack:///./node_modules/classnames/index.js","webpack:///./src/projects/common/3d/GlslHelpers.ts","webpack:///./src/views/common/ObjDropdownComponent.tsx"],"names":["Name","min","max","fractal","range","subtract","real","imaginary","deltaSize","delta","add","MaxAmplitude","shaderFunction","canvas","amplitude","clientWidth","clientHeight","this","ctx","getContext","audio","AudioContext","gain","createGain","value","connect","destination","close","point","currentAudio","stop","clearRect","width","height","strokeStyle","start","beginPath","Complex","maxBounds","negate","minBounds","i","arr","length","xp","yp","tgtX","tgtY","moveTo","lineTo","stroke","Array","sampleRate","init","z","Init","Infinity","Iterate","Math","result","GetAmplitude","tgt","buffer","createBuffer","upsampleRate","source","createBufferSource","channelData","getChannelData","index","prev","floor","interpReal","ceil","interpImaginary","ShaderCode","c","tx","ty","abs","div","mult","multiplyWith","scalarMultiply","addWith","dotz","absSq","dotc","GENERAL_SHADER","color","bounds","onMiddleClick","cursor_anchor","mm_down","gl","touch_anchors","canvasRange","windowRange","fragment_code","replace","CreateShaderCode","clearColor","clear","COLOR_BUFFER_BIT","initProgram","program","renderFrame","addEventListener","e","button","Point","offsetX","offsetY","perc","GetPercentage","GetValue","x","y","undefined","preventDefault","dx","dy","panCameraByScreenDelta","scalePercentage","deltaY","scalePerc","pow","AspectScale","ev","targetTouches","touch","item","identifier","touchOffset","touches","moves","pos","oldPos","push","dragStart","Multiply","dragEnd","worldPos","SubtractWith","scaleAmt","Length","ShiftByPercentage","uniform1f","getUniformLocation","uniform2fv","xRange","yRange","target","getBoundingClientRect","pageX","left","pageY","top","colorFunction","audioPlayer","mandelbrot","w","h","jpt","playSound","run","cleanup","pt","Play","fractals","colors","GlslFractalAudioComponent","overlayCanvas","frac","setFrac","setAmplitude","setColor","current","renderer","Cleanup","className","style","position","ref","pointerEvents","background","ObjDropdownComponent","options","getName","f","onChange","a","bottom","textAlign","href","angle","distance","cos","sin","Dot","sqrt","LengthSq","p1","p2","other","len","atan2","nx","ny","splitArgs","splitArgsOrSingle","src","b","sy","p","pts","t","Bezier","slice","theta","fromAngle","Object","defineProperty","exports","_react","obj","__esModule","_typeof","cache","_getRequireWildcardCache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_interopRequireWildcard","_reactDom","_interopRequireDefault","_classnames","WeakMap","Symbol","iterator","constructor","_defineProperty","enumerable","configurable","writable","_defineProperties","props","descriptor","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_assertThisInitialized","self","ReferenceError","_setPrototypeOf","Dropdown","_Component","_this","instance","Constructor","TypeError","_classCallCheck","state","selected","parseValue","label","placeholder","isOpen","mounted","handleDocumentClick","bind","fireChangeEvent","protoProps","staticProps","subClass","superClass","create","_inherits","newProps","setState","document","removeEventListener","event","onFocus","type","stopPropagation","disabled","option","num","match","items","filter","newState","_classes","isSelected","classes","concat","baseClassName","optionClass","createElement","onMouseDown","setValue","onClick","role","_this2","_this$props","ops","map","groupTitle","name","_options","renderOption","tabIndex","findDOMNode","contains","_classNames","_classNames2","_classNames3","_classNames4","_classNames5","_this$props2","controlClassName","placeholderClassName","menuClassName","arrowClassName","arrowClosed","arrowOpen","disabledClass","placeHolderValue","dropdownClass","controlClass","placeholderClass","isValueSelected","menuClass","arrowClass","menu","buildMenu","handleMouseDown","onTouchEnd","Component","defaultProps","_default","hasOwn","classNames","arguments","arg","argType","isArray","inner","apply","join","module","default","loadShader","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","console","error","alert","VERTEX_SHADER","FRAGMENT_SHADER","getShaderInfoLog","deleteShader","initShaderProgram","vertexShaderSource","fragmentShaderSource","vertexShader","fragmentShader","shaderProgram","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","shaderDrawMultiple","positionBuffer","positionNumComponents","renderMode","drawCounts","getGeom","bindUniforms","clearDepth","enable","DEPTH_TEST","depthFunc","LEQUAL","DEPTH_BUFFER_BIT","FLOAT","normalize","stride","offset","bindBuffer","ARRAY_BUFFER","vertexAttribPointer","getAttribLocation","enableVertexAttribArray","useProgram","bufferOffset","bufferCount","drawArrays","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","fragmentShaderOnlyDraw","numComponents","fragmentShaderOnlyInitBuffer","right","l","r","positions","bufferData","Float32Array","STATIC_DRAW","initGLBuffer","components","defaultVertexShader","names","chng","find","v"],"mappings":"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","file":"13.bundle.js","sourcesContent":["import { Complex } from \"../common\";\r\nimport { IFractal } from \"./Fractals/IFractal\";\r\n\r\nexport interface IAmplitudeFunction {\r\n    Name: string;\r\n    GetAmplitude(min: Complex, max: Complex, fractal: IFractal): { min: Complex, max: Complex };\r\n}\r\n\r\nclass DefaultAmplitudeFunction implements IAmplitudeFunction {\r\n    Name: string = 'Fill';\r\n    GetAmplitude(min: Complex, max: Complex, fractal: IFractal): {min: Complex, max: Complex}\r\n    {\r\n        return {min, max};\r\n    }\r\n}\r\n\r\nclass FixedAspectAmplitudeFunction implements IAmplitudeFunction {\r\n    Name: string = 'Square';\r\n    GetAmplitude(min: Complex, max: Complex, fractal: IFractal): {min: Complex, max: Complex}\r\n    {\r\n        const range = Complex.subtract(max, min);\r\n        if(range.real === range.imaginary) return {min, max};\r\n        if(range.real > range.imaginary) {\r\n            var deltaSize = (range.real - range.imaginary)/2;\r\n            var delta = new Complex(0, deltaSize);\r\n\r\n            return { min: Complex.subtract(min, delta), max: Complex.add(max, delta) };\r\n        }\r\n        else {\r\n            var deltaSize = (range.imaginary - range.real)/2;\r\n            var delta = new Complex(deltaSize, 0);\r\n\r\n            return { min: Complex.subtract(min, delta), max: Complex.add(max, delta) };\r\n        }\r\n    }\r\n}\r\n\r\nclass AbsoluteAmplitudeFunction implements IAmplitudeFunction {\r\n    Name: string = 'Absolute';\r\n    GetAmplitude(min: Complex, max: Complex, fractal: IFractal): {min: Complex, max: Complex}\r\n    {\r\n        return {\r\n            min: new Complex(-fractal.MaxAmplitude, -fractal.MaxAmplitude),\r\n            max: new Complex(fractal.MaxAmplitude, fractal.MaxAmplitude)\r\n        };\r\n    }\r\n}\r\n\r\nconst AllAspectFunctions = [ new DefaultAmplitudeFunction(), new FixedAspectAmplitudeFunction(), new AbsoluteAmplitudeFunction() ];\r\nexport default AllAspectFunctions;","import { IColorFunction } from \"./IColorFunction\";\r\n\r\nclass FireColor implements IColorFunction {\r\n    Name = 'Fire';\r\n    shaderFunction = `\r\nvec3 floatToColor(float perc) {\r\n    if(perc <= 0.5) {\r\n        return vec3(perc * 2.0, perc, 0.0);\r\n    }\r\n    perc = (perc - 0.5) * 2.0;\r\n    return vec3(1.0, 0.5 + perc / 2.0, perc);\r\n}\r\n    `;\r\n}\r\n\r\nconst fireColor = new FireColor();\r\nexport default fireColor;","import { IColorFunction } from \"./IColorFunction\";\r\n\r\nclass GrayscaleColor implements IColorFunction {\r\n    Name = 'Grayscale';\r\n    shaderFunction = `\r\nvec3 floatToColor(float perc) {\r\n    return vec3(perc, perc, perc);\r\n}\r\n    `;\r\n}\r\n\r\nconst grayscaleColor = new GrayscaleColor();\r\nexport default grayscaleColor;","import { IColorFunction } from \"./IColorFunction\";\r\n\r\nclass HueColor implements IColorFunction {\r\n    Name = 'Hue';\r\n    shaderFunction = `\r\n\r\nfloat fmod(float a, float b) {\r\n    return a - (b * floor(a/b));\r\n}\r\n\r\nfloat hsvComponentToRgb(vec3 hsv, float n) {\r\n    float k = fmod((n + hsv.x * 6.0), 6.0);\r\n    return hsv.z - hsv.z * hsv.y * max(min(min(k, 4.0-k),1.0), 0.0);\r\n}\r\n\r\nvec3 floatToColor(float perc) {\r\n    if(perc == 1.0) {\r\n        return vec3(0, 0, 0);\r\n    }\r\n    vec3 hsv = vec3(perc, 1.0, 1.0);\r\n    return vec3(\r\n        hsvComponentToRgb(hsv, 5.0),\r\n        hsvComponentToRgb(hsv, 3.0),\r\n        hsvComponentToRgb(hsv, 1.0)\r\n    );\r\n}\r\n    `;\r\n}\r\n\r\nconst hueColor = new HueColor();\r\nexport default hueColor;","import { IColorFunction } from \"./IColorFunction\";\r\n\r\nclass PaperColor implements IColorFunction {\r\n    Name = 'Paper';\r\n    shaderFunction = `\r\nvec3 floatToColor(float perc) {\r\n    if(perc == 1.0) {\r\n        return vec3(0, 0, 0);\r\n    }\r\n    return vec3(0.8, 0.8, 0.8) - (perc * 0.8);\r\n}\r\n    `;\r\n}\r\n\r\nconst pueColor = new PaperColor();\r\nexport default pueColor;","import { start } from \"repl\";\r\nimport { ResizeCanvas } from \"../common/CanvasHelpers\";\r\nimport { Complex } from \"../common/Complex\";\r\nimport { IAmplitudeFunction } from \"./AmplitudeMode\";\r\nimport { IFractal } from \"./Fractals/IFractal\";\r\n\r\nconst sampleRate = 8820; // 44100;\r\nconst upsampleRate = 8820;\r\nconst sampleTimeSeconds = 1;\r\nconst GAIN = 0.3;\r\n\r\nexport default class FractalAudioPlayer {\r\n    private ctx: CanvasRenderingContext2D;\r\n    private currentAudio: PlayingAudio;\r\n    private audio: AudioContext;\r\n    private gain: GainNode;\r\n\r\n    constructor(private canvas: HTMLCanvasElement, private amplitude: IAmplitudeFunction)\r\n    {\r\n        ResizeCanvas(canvas, canvas.clientWidth, canvas.clientHeight);\r\n        this.ctx = canvas.getContext('2d');\r\n        this.audio = new AudioContext();\r\n        this.gain = this.audio.createGain();\r\n        this.gain.gain.value = GAIN;\r\n        this.gain.connect(this.audio.destination);\r\n    }\r\n\r\n    public Cleanup() {\r\n        this.audio.close();\r\n    }\r\n\r\n    public Play(point: Complex, fractal: IFractal){\r\n        this.currentAudio?.stop();\r\n        this.currentAudio = new PlayingAudio(this.audio, point, fractal, this.amplitude);\r\n        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n        this.ctx.strokeStyle = 'red';\r\n\r\n        this.currentAudio.start(this.gain);\r\n\r\n        this.ctx.beginPath();\r\n        const range = Complex.add(this.currentAudio.maxBounds, Complex.negate(this.currentAudio.minBounds));\r\n        for(let i = 0; i < this.currentAudio.arr.length; i++) {\r\n            const xp = (this.currentAudio.arr[i].real - this.currentAudio.minBounds.real) / range.real;\r\n            const yp = (this.currentAudio.arr[i].imaginary - this.currentAudio.minBounds.imaginary) / range.imaginary ;\r\n            \r\n            const tgtX = xp * this.canvas.width;\r\n            const tgtY = yp * this.canvas.height;\r\n            if(i === 0) this.ctx.moveTo(tgtX, tgtY);\r\n            else this.ctx.lineTo(tgtX, tgtY);\r\n        }\r\n        this.ctx.stroke();\r\n    }\r\n}\r\n\r\nclass PlayingAudio {\r\n    arr: Complex[];\r\n    minBounds: Complex;\r\n    maxBounds: Complex;\r\n    source: AudioBufferSourceNode;\r\n    constructor(private audio: AudioContext, private point: Complex, private fractal: IFractal, private amplitude: IAmplitudeFunction) {\r\n        this.arr = new Array(sampleRate * sampleTimeSeconds);\r\n\r\n        const init = point;\r\n        let z = fractal.Init(init);\r\n        this.minBounds = new Complex(Infinity,Infinity);\r\n        this.maxBounds = new Complex(-Infinity,-Infinity);\r\n        for(let i = 0; i < this.arr.length; i++) {\r\n            z = fractal.Iterate(z, init);\r\n            this.arr[i] = new Complex(z.real, z.imaginary);\r\n            this.minBounds.real = Math.min(this.minBounds.real, z.real);\r\n            this.minBounds.imaginary = Math.min(this.minBounds.imaginary, z.imaginary);\r\n            \r\n            this.maxBounds.real = Math.max(this.maxBounds.real, z.real);\r\n            this.maxBounds.imaginary = Math.max(this.maxBounds.imaginary, z.imaginary);\r\n        }\r\n\r\n        const result = amplitude.GetAmplitude(this.minBounds, this.maxBounds, fractal);\r\n        this.minBounds = result.min;\r\n        this.maxBounds = result.max;\r\n    }\r\n\r\n    start(tgt: GainNode) {\r\n        const buffer = this.audio.createBuffer(2, upsampleRate * sampleTimeSeconds, upsampleRate);\r\n        const source = this.audio.createBufferSource();\r\n\r\n        const channelData = [buffer.getChannelData(0), buffer.getChannelData(1)];\r\n        const range = Complex.add(this.maxBounds, Complex.negate(this.minBounds));\r\n        for(let i = 0; i < channelData[0].length; i++) {\r\n\r\n            const index = (i * sampleRate)/upsampleRate;\r\n            const prev = Math.max(0, Math.floor(index));\r\n            const next = Math.min(this.arr.length - 1, Math.ceil(index));\r\n            const percent = index % 1;\r\n\r\n            const interpReal = upsampleRate != sampleRate ? interp(this.arr[prev].real, this.arr[next].real, percent) : this.arr[prev].real;\r\n            const interpImaginary = upsampleRate != sampleRate ? interp(this.arr[prev].imaginary, this.arr[next].imaginary, percent) : this.arr[prev].imaginary;\r\n\r\n            const xp = (interpReal - this.minBounds.real) / range.real;\r\n            const yp = (interpImaginary - this.minBounds.imaginary) / range.imaginary;\r\n \r\n            channelData[0][i] = xp * 2 - 1; \r\n            channelData[1][i] = yp * 2 - 1;\r\n        }\r\n\r\n        source.buffer = buffer;\r\n\r\n        source.connect(tgt);\r\n        source.start();\r\n\r\n        this.source = source;\r\n    }\r\n\r\n    stop() {\r\n        this.source?.stop();\r\n    }\r\n}\r\n\r\n\r\nfunction interp(prev: number, next: number, perc: number)\r\n{\r\n    perc = (-Math.cos(perc) + 1) / 2;\r\n    return prev * (1-perc) + next * perc;\r\n}","import { Complex } from \"../../common\";\r\nimport { IFractal } from \"./IFractal\";\r\n\r\nclass BurningShip implements IFractal\r\n{\r\n    Name: string = 'Burning Ship';\r\n    ShaderCode: string = `\r\n    vec2 init_fractal(vec2 coords) {\r\n        return vec2(0,0);\r\n    }\r\n\r\n    vec2 step_fractal(vec2 v, vec2 c) {\r\n        float tx = v.x * v.x - v.y * v.y - c.x;\r\n        float ty = 2.0 * abs(v.x * v.y) - c.y;\r\n        return vec2(tx, ty);\r\n    }\r\n    `;\r\n\r\n    MaxAmplitude: number = 16;\r\n\r\n    Init (c: Complex):Complex{\r\n        return c;\r\n    }\r\n\r\n    Iterate(z: Complex, c: Complex): Complex\r\n    {\r\n        const tx = z.real * z.real - z.imaginary * z.imaginary - c.real;\r\n        const ty = 2 * Math.abs(z.real * z.imaginary) - c.imaginary;\r\n        return new Complex(tx, ty);\r\n    }\r\n}\r\n\r\nconst burningShip = new BurningShip();\r\nexport default burningShip;","import { Complex } from \"../../common\";\r\nimport { IFractal } from \"./IFractal\";\r\n\r\nclass FeatherFractal implements IFractal\r\n{\r\n    Name: string = 'Feather';\r\n    ShaderCode: string = `\r\n    vec2 init_fractal(vec2 coords) {\r\n        return coords;\r\n    }\r\n\r\n    vec2 step_fractal(vec2 v, vec2 c) {\r\n        vec2 denom = scalar_mult(v, v);\r\n        denom.x += 1.0;\r\n        vec2 num = cplx_mult(cplx_mult(v, v), v);\r\n        vec2 result = cplx_div(num, denom);\r\n        return result + c;\r\n    }\r\n    `;\r\n\r\n    MaxAmplitude: number = 32;\r\n\r\n    Init (c: Complex):Complex{\r\n        return c;\r\n    }\r\n\r\n    Iterate(z: Complex, c: Complex): Complex\r\n    {\r\n        return Complex.div(\r\n            Complex.mult(z, z).multiplyWith(z),\r\n            Complex.scalarMultiply(z, z).addWith(new Complex(1, 0))\r\n        ).addWith(c);\r\n    }\r\n}\r\n\r\nconst featherFractal = new FeatherFractal();\r\nexport default featherFractal;","import { Complex } from \"../../common\";\r\nimport { IFractal } from \"./IFractal\";\r\n\r\nclass Mandelbrot implements IFractal\r\n{\r\n    Name: string = 'Mandelbrot';\r\n    ShaderCode: string = `\r\n    vec2 init_fractal(vec2 coords) {\r\n        return coords;\r\n    }\r\n\r\n    vec2 step_fractal(vec2 v, vec2 c) {\r\n        return cplx_mult(v, v) + c;\r\n    }\r\n    `;\r\n\r\n    MaxAmplitude: number = 2;\r\n\r\n    Init (c: Complex):Complex{\r\n        return c;\r\n    }\r\n\r\n    Iterate(z: Complex, c: Complex): Complex\r\n    {\r\n        return Complex.mult(z, z).addWith(c);\r\n    }\r\n}\r\n\r\nconst mandelbrot = new Mandelbrot();\r\nexport default mandelbrot;","import { Complex } from \"../../common\";\r\nimport { IFractal } from \"./IFractal\";\r\n\r\nclass SqureFractal implements IFractal\r\n{\r\n    Name: string = 'Square';\r\n    ShaderCode: string = `\r\n    vec2 init_fractal(vec2 coords) {\r\n        return coords;\r\n    }\r\n\r\n    vec2 step_fractal(vec2 v, vec2 c) {\r\n        float dotz = dot(v, v);\r\n        vec2 scalarc = scalar_mult(c, c);\r\n        return v * dotz - cplx_mult(v, scalarc);\r\n    }\r\n    `;\r\n\r\n    MaxAmplitude: number = 32;\r\n\r\n    Init (c: Complex):Complex{\r\n        return c;\r\n    }\r\n\r\n    Iterate(z: Complex, c: Complex): Complex\r\n    {\r\n        const dotz = z.absSq();\r\n        const dotc = Complex.scalarMultiply(c, c);\r\n        return Complex.subtract(\r\n            Complex.scalarMultiply(z, dotz, dotz),\r\n            Complex.mult(c, dotc)\r\n        );\r\n    }\r\n}\r\n\r\nconst squareFractal = new SqureFractal();\r\nexport default squareFractal;","import { IColorFunction } from \"./ColorFunctions/IColorFunction\";\r\nimport { IFractal } from \"./Fractals/IFractal\";\r\n\r\nexport function CreateShaderCode(fractal: IFractal, color: IColorFunction): string {\r\n    return GENERAL_SHADER\r\n        .replace(\"[[[FRACTAL_CODE]]]\", fractal.ShaderCode)\r\n        .replace(\"[[[COLOR_CODE]]]\", color.shaderFunction);;\r\n}\r\n\r\nexport const GENERAL_SHADER = `\r\nprecision highp float;\r\nvarying vec3 vPos;\r\nuniform vec2 window_pos;\r\nuniform vec2 window_size;\r\nuniform float MAX_ABSSQ;\r\n\r\nconst int MAX_ITER = 256;\r\n\r\nvec2 cplx_mult(vec2 a, vec2 b) {\r\n    return vec2(a.x * b.x - a.y * b.y, a.x * b.y + a.y * b.x);\r\n}\r\n\r\nvec2 cplx_div(vec2 a, vec2 b) {\r\n    float denom = dot(b, b);\r\n    return vec2 (\r\n        (a.x * b.x + a.y * b.y) / denom,\r\n        (a.y * b.x - a.x * b.y) / denom \r\n    );\r\n}\r\n\r\nvec2 scalar_mult(vec2 a, vec2 b) {\r\n    return vec2( a.x * b.x, a.y * b.y);\r\n}\r\n\r\nfloat cplx_abssq(vec2 v) {\r\n    return dot(v, v);\r\n}\r\n\r\n[[[FRACTAL_CODE]]]\r\n\r\nfloat calcIterations(vec2 coords) {\r\n    vec2 roll = init_fractal(coords);\r\n    for(int iter = 0; iter < MAX_ITER; iter++) {\r\n        roll = step_fractal(roll, coords);\r\n        if (cplx_abssq(roll) >= MAX_ABSSQ) {\r\n            return float(iter)/float(MAX_ITER);\r\n        }\r\n    }\r\n    return 1.0;\r\n}\r\n\r\n[[[COLOR_CODE]]]\r\n\r\nvoid main() {\r\n    vec2 adjpos = vPos.xy;\r\n    adjpos += 1.0;\r\n    adjpos /= 2.0;\r\n    // adjpos is now 0, 1\r\n    // Convert that to world-space\r\n    adjpos = window_pos + adjpos * window_size;\r\n\r\n    float mb_perc = calcIterations(adjpos);\r\n    gl_FragColor = vec4(floatToColor(mb_perc), 1.0);\r\n}`;","import { Range, Range2d } from \"../common\";\r\nimport * as GLSL from \"../common/3d/GlslHelpers\";\r\nimport { ResizeCanvas } from \"../common/CanvasHelpers\";\r\nimport Point from \"../common/position/Point\";\r\nimport Rect from \"../common/position/Rectangle\";\r\nimport { IColorFunction } from \"./ColorFunctions/IColorFunction\";\r\nimport { IFractal } from \"./Fractals/IFractal\";\r\nimport { CreateShaderCode } from \"./ShaderCode\";\r\n\r\nconst SCROLL_DIV = 8;\r\nconst SCROLL_POW = 1.1;\r\n\r\nexport default class GlslFrameRenderer {\r\n    protected gl: WebGLRenderingContext;\r\n    protected program: WebGLProgram;\r\n    protected buffer: WebGLBuffer;\r\n\r\n    private cursor_anchor: Point | null;\r\n    private mm_down: boolean;\r\n\r\n    protected canvasRange: Range2d;\r\n    protected windowRange: Range2d;\r\n\r\n    private fragment_code:string;\r\n\r\n    private touch_anchors: { [key: number]: Point }\r\n\r\n    constructor(private canvas: HTMLCanvasElement, private fractal: IFractal, private color: IColorFunction, private bounds: { x: number, y: number, w: number, h: number}, private onMiddleClick?: (pt: Point) => void) {\r\n        ResizeCanvas(canvas, canvas.clientWidth, canvas.clientHeight);\r\n        this.cursor_anchor = null;\r\n        this.mm_down = false;\r\n        this.gl = canvas.getContext('webgl');\r\n        this.touch_anchors = {};\r\n        \r\n        this.canvasRange = new Range2d(new Range(0, canvas.clientWidth), new Range(0, canvas.clientHeight));\r\n        this.windowRange = new Range2d(new Range(-1, 1), new Range(-1, (canvas.height / canvas.width)));\r\n\r\n        this.fragment_code = CreateShaderCode(fractal, color);\r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n        this.gl.clearColor(0.0, 0.0, 0.0, 1.0);\r\n        this.gl.clear(this.gl.COLOR_BUFFER_BIT);\r\n        this.initProgram();\r\n    }\r\n\r\n    initProgram() {\r\n        this.program = GLSL.initShaderProgram(this.gl, GLSL.defaultVertexShader, this.fragment_code);\r\n        this.buffer = GLSL.fragmentShaderOnlyInitBuffer(this.gl);\r\n    }\r\n\r\n    run() {\r\n        this.renderFrame();\r\n\r\n        this.canvas.addEventListener('mousedown', e => {\r\n            if(e.button === 0) {\r\n                this.cursor_anchor = new Point(e.offsetX, e.offsetY);\r\n            }\r\n            else if(e.button === 1) {\r\n                this.mm_down = true;\r\n                let perc = this.canvasRange.GetPercentage(e.offsetX, e.offsetY);\r\n                perc = this.windowRange.GetValue(perc.x, 1-perc.y);\r\n                if(this.onMiddleClick !== undefined) {\r\n                    this.onMiddleClick(new Point(perc.x, perc.y));\r\n                }\r\n            }\r\n            e.preventDefault();\r\n        });\r\n        this.canvas.addEventListener('mouseup', e => {\r\n            if(e.button === 0)\r\n                this.cursor_anchor = null;\r\n            else if(e.button === 1)\r\n                this.mm_down = false;\r\n            e.preventDefault();\r\n        });\r\n        this.canvas.addEventListener('mousemove', e => {\r\n            if(this.cursor_anchor != null) {\r\n                const dx = e.offsetX - this.cursor_anchor.x;\r\n                const dy = e.offsetY - this.cursor_anchor.y;\r\n                this.panCameraByScreenDelta(new Point(dx, dy));\r\n                this.cursor_anchor = new Point(e.offsetX, e.offsetY);\r\n                this.renderFrame();\r\n                e.preventDefault();\r\n            }\r\n            if(this.mm_down && this.onMiddleClick !== undefined){\r\n                let perc = this.canvasRange.GetPercentage(e.offsetX, e.offsetY);\r\n                perc = this.windowRange.GetValue(perc.x, 1-perc.y);\r\n                this.onMiddleClick(new Point(perc.x, perc.y));\r\n            }\r\n        });\r\n        this.canvas.addEventListener('wheel', e => {\r\n            const scalePercentage = e.deltaY / SCROLL_DIV;\r\n            const scalePerc = Math.pow(SCROLL_POW, scalePercentage);\r\n            const perc = this.canvasRange.GetPercentage(e.offsetX, e.offsetY);\r\n\r\n            this.windowRange.AspectScale(scalePerc, perc.x, 1-perc.y);\r\n            this.renderFrame();\r\n            e.preventDefault();\r\n        });\r\n        this.canvas.addEventListener('touchstart', ev => { \r\n            if(ev.targetTouches.length >= 3 || ev.targetTouches.length === 0) return;\r\n            for(let i = 0; i < ev.targetTouches.length; i++){\r\n                const touch = ev.targetTouches.item(i);\r\n                this.touch_anchors[touch.identifier] = touchOffset(touch);\r\n            }\r\n            ev.preventDefault();\r\n        });\r\n        this.canvas.addEventListener('touchmove', ev => {\r\n            if(ev.touches.length >= 3 || ev.touches.length === 0) return;\r\n            const moves: [Point, Point][] = [];\r\n            for(let i = 0; i < ev.targetTouches.length; i++){\r\n                const touch = ev.targetTouches.item(i);\r\n                const pos = touchOffset(touch);\r\n                const oldPos = this.touch_anchors[touch.identifier];\r\n                if(oldPos === undefined) return;\r\n                moves.push([oldPos, pos]);\r\n                this.touch_anchors[touch.identifier] = pos;\r\n            }\r\n\r\n            if(moves.length === 1) {\r\n                // Just pan the camera\r\n                this.panCameraByScreenDelta(Point.subtract(moves[0][1], moves[0][0]));\r\n            }\r\n            else if(moves.length === 2) {\r\n                // Average the start + End positions to find the move amt\r\n                const dragStart = Point.Multiply(Point.add(moves[0][0], moves[1][0]), 0.5, 0.5);\r\n                const dragEnd = Point.Multiply(Point.add(moves[0][1], moves[1][1]), 0.5, 0.5);\r\n                const worldPos = this.panCameraByScreenDelta(dragEnd.SubtractWith(dragStart));\r\n                const startDist = Point.subtract(moves[0][0], moves[1][0]).Length();\r\n                const endDist = Point.subtract(moves[0][1], moves[1][1]).Length();\r\n                const scaleAmt = startDist / endDist;\r\n                this.windowRange.AspectScale(scaleAmt, worldPos.x, 1-worldPos.y);\r\n            }\r\n\r\n            this.renderFrame();\r\n            ev.preventDefault();\r\n        });\r\n        this.canvas.addEventListener('touchend', ev => {\r\n            this.touch_anchors = {};\r\n            ev.preventDefault();\r\n        });\r\n        this.canvas.addEventListener('touchcancel', ev => {\r\n            this.touch_anchors = {};\r\n            ev.preventDefault();\r\n        });\r\n    }\r\n\r\n    private panCameraByScreenDelta(delta: Point) {\r\n        const perc = this.canvasRange.GetPercentage(delta.x, delta.y);\r\n        this.windowRange.ShiftByPercentage(-perc.x, perc.y);\r\n        return perc;\r\n    }\r\n\r\n    renderFrame() {\r\n        GLSL.fragmentShaderOnlyDraw(this.gl, this.program, this.buffer, gl => {\r\n            gl.uniform1f(gl.getUniformLocation(this.program, 'MAX_ABSSQ'), this.fractal.MaxAmplitude);\r\n            gl.uniform2fv(gl.getUniformLocation(this.program, 'window_pos'), [this.windowRange.xRange.min, this.windowRange.yRange.min]);\r\n            gl.uniform2fv(gl.getUniformLocation(this.program, 'window_size'), [this.windowRange.xRange.Length(), this.windowRange.yRange.Length()]);\r\n        });\r\n    }\r\n\r\n    cleanup() {\r\n        \r\n    }\r\n}\r\n\r\nfunction touchOffset(touch: Touch): Point {\r\n    const tgt = (touch.target as HTMLElement).getBoundingClientRect();\r\n    return new Point(touch.pageX - tgt.left, touch.pageY - tgt.top);\r\n}","import { Complex, Range, Range2d } from \"../common\";\r\nimport * as GLSL from \"../common/3d/GlslHelpers\";\r\nimport { ResizeCanvas } from \"../common/CanvasHelpers\";\r\nimport Point from \"../common/position/Point\";\r\nimport { IColorFunction } from \"./ColorFunctions/IColorFunction\";\r\nimport FractalAudioPlayer from \"./FractalAudioPlayer\";\r\nimport { IFractal } from \"./Fractals/IFractal\";\r\nimport GlslFrameRenderer from \"./GlslFrameRenderer\";\r\nimport { CreateShaderCode } from \"./ShaderCode\";\r\n\r\nexport default class RendererWrapperComponent {\r\n    private mandelbrot: GlslFrameRenderer;\r\n\r\n    constructor(private canvas: HTMLCanvasElement, fractal: IFractal, private colorFunction: IColorFunction, private audioPlayer: FractalAudioPlayer) {\r\n\r\n        this.mandelbrot = new GlslFrameRenderer(canvas, fractal, colorFunction, { x: -2, y: -2, w: 4, h:4 }, (jpt) => {\r\n            this.playSound(jpt, fractal);\r\n        });\r\n        this.mandelbrot.run();\r\n    }\r\n\r\n    cleanup() {\r\n        this.mandelbrot.cleanup();\r\n    }\r\n\r\n    playSound(pt: Point, fractal: IFractal)\r\n    {\r\n        this.audioPlayer.Play(new Complex(pt.x, pt.y), fractal);\r\n    }\r\n}","import * as React from 'react';\r\nimport AllAmplitudeFunctions, { IAmplitudeFunction } from '../../../projects/glsl-fracaudio/AmplitudeMode';\r\nimport fireColor from '../../../projects/glsl-fracaudio/ColorFunctions/FireColor';\r\nimport grayscaleColor from '../../../projects/glsl-fracaudio/ColorFunctions/GrayscaleColor';\r\nimport hueColor from '../../../projects/glsl-fracaudio/ColorFunctions/HueColor';\r\nimport paperColor from '../../../projects/glsl-fracaudio/ColorFunctions/PaperColor';\r\nimport { IColorFunction } from '../../../projects/glsl-fracaudio/ColorFunctions/IColorFunction';\r\nimport FractalAudioPlayer from '../../../projects/glsl-fracaudio/FractalAudioPlayer';\r\nimport burningShip from '../../../projects/glsl-fracaudio/Fractals/BurningShip';\r\nimport featherFractal from '../../../projects/glsl-fracaudio/Fractals/Feather';\r\nimport { IFractal } from '../../../projects/glsl-fracaudio/Fractals/IFractal';\r\nimport mandelbrot from '../../../projects/glsl-fracaudio/Fractals/Mandelbrot';\r\nimport squareFractal from '../../../projects/glsl-fracaudio/Fractals/Square';\r\nimport RendererWrapperComponent from '../../../projects/glsl-fracaudio/RendererWrapperComponent';\r\nimport { ObjDropdownComponent } from '../../common/ObjDropdownComponent';\r\n\r\nconst fractals: IFractal[] = [\r\n    mandelbrot,\r\n    burningShip,\r\n    featherFractal,\r\n    squareFractal\r\n];\r\nconst colors: IColorFunction[] = [\r\n    grayscaleColor,\r\n    fireColor,\r\n    hueColor,\r\n    paperColor\r\n];\r\n\r\nexport default function GlslFractalAudioComponent() {\r\n    const canvas = React.useRef<HTMLCanvasElement>();\r\n    const overlayCanvas = React.useRef<HTMLCanvasElement>();\r\n    const [frac, setFrac] = React.useState<IFractal>(mandelbrot);\r\n    const [amplitude, setAmplitude] = React.useState<IAmplitudeFunction>(AllAmplitudeFunctions[0]);\r\n    const [color, setColor] = React.useState<IColorFunction>(fireColor);\r\n\r\n    React.useEffect(() => {\r\n        const audio = new FractalAudioPlayer(overlayCanvas.current, amplitude);\r\n        const renderer = new RendererWrapperComponent(canvas.current, frac, color, audio);\r\n        return () => \r\n        {\r\n            renderer.cleanup();\r\n            audio.Cleanup();\r\n        }\r\n    }, [canvas, frac, amplitude, color]);\r\n\r\n\r\n    return <div className='conway conway_body full_body'>\r\n        <div style={{ width: '80%', height: '100%', position: 'absolute' }}>\r\n            <canvas ref={canvas} style={{ position: 'absolute', width: '100%', height: '100%', top:0, left:0 }}></canvas>\r\n            <canvas ref={overlayCanvas} style={{ position: 'absolute', width: '100%', height: '100%', pointerEvents: 'none', top:0, left:0}}></canvas>\r\n        </div>\r\n        <div style={{ width: '20%', height: '100%', background: '#333', position: 'absolute', left: '80%' }}>\r\n            <label>Fractal:</label>\r\n            <ObjDropdownComponent options={fractals} value={frac} getName={f => f.Name} onChange={f => setFrac(f)} />\r\n            <label>Color:</label>\r\n            <ObjDropdownComponent options={colors} value={color} getName={c => c.Name} onChange={c => setColor(c)} />\r\n            <label>Amplitude Function:</label>\r\n            <ObjDropdownComponent options={AllAmplitudeFunctions} value={amplitude} getName={a => a.Name} onChange={a => setAmplitude(a)} />\r\n\r\n            <div style={{ bottom: 0, position: 'absolute', color: '#999', textAlign: 'center', width: '100%' }}>Inspired by <a href='https://www.youtube.com/watch?v=GiAj9WW1OfQ'>this video</a></div>\r\n        </div>\r\n    </div>;\r\n}","export default class Point {\r\n\r\n    static zero(): Point  {\r\n        return new Point(0,0);\r\n    }\r\n\r\n    constructor(public x: number, public y: number) {\r\n\r\n    }\r\n\r\n    public static fromAngle(angle: number, distance?: number) : Point {\r\n        return new Point(Math.cos(angle) * (distance ?? 1), Math.sin(angle) * (distance ?? 1));\r\n    }\r\n\r\n    public LengthSq(): number {\r\n        return Point.Dot(this, this);\r\n    }\r\n\r\n    public Length(): number {\r\n        return Math.sqrt(this.LengthSq());\r\n    }\r\n\r\n    public Clone(): Point {\r\n        return new Point(this.x, this.y);\r\n    }\r\n\r\n    public Negate(): Point {\r\n        return new Point(-this.x, -this.y);\r\n    }\r\n\r\n    public NegateInPlace(): this {\r\n        this.x = -this.x;\r\n        this.y = -this.y;\r\n        return this;\r\n    }\r\n\r\n    public static Dot(p1: Point, p2: Point): number {\r\n        return p1.x * p2.x + p1.y * p2.y;\r\n    }\r\n\r\n    public DotWith(other: Point): number {\r\n        return Point.Dot(this, other);\r\n    }\r\n\r\n    public normalize(): Point {\r\n        let len = this.Length();\r\n        return Point.Multiply(this, 1 / len);\r\n    }\r\n\r\n    public Direction(): number {\r\n        return Math.atan2(this.y, this.x);\r\n    }\r\n\r\n    public AddWith(x: number, y: number): this;\r\n    public AddWith(other: Point): this;\r\n    public AddWith(other: number|Point, y?: number): this {\r\n        const {x: nx, y: ny} = splitArgs(other, y);\r\n        this.x += nx;\r\n        this.y += ny;\r\n        return this;\r\n    }\r\n\r\n    public MultWith(s: number): this;\r\n    public MultWith(x: number, y: number): this;\r\n    public MultWith(other: Point): this;\r\n    public MultWith(other: number|Point, y?: number): this {\r\n        const {x: nx, y: ny} = splitArgsOrSingle(other, y);\r\n        this.x *= nx;\r\n        this.y *= ny;\r\n        return this;\r\n    }\r\n\r\n    public SubtractWith(x: number, y: number): this;\r\n    public SubtractWith(other: Point): this;\r\n    public SubtractWith(other: number|Point, y?: number): this {\r\n        const {x: nx, y: ny} = splitArgs(other, y);\r\n        this.x -= nx;\r\n        this.y -= ny;\r\n        return this;\r\n    }\r\n\r\n    public DivideWith(x: number, y: number): this;\r\n    public DivideWith(other: Point): this;\r\n    public DivideWith(other: number|Point, y?: number): this {\r\n        const {x: nx, y: ny} = splitArgs(other, y);\r\n        this.x /= nx;\r\n        this.y /= ny;\r\n        return this;\r\n    }\r\n\r\n    public Equals(other: Point): boolean {\r\n        return this.x === other.x && this.y === other.y;\r\n    }\r\n\r\n    \r\n    static add(src: Point, x: number, y: number): Point;\r\n    static add(src: Point, other: Point): Point;\r\n    static add(src: Point, other: number|Point, y?: number): Point {\r\n        const {x: nx, y: ny} = splitArgs(other, y);\r\n        return new Point(src.x + nx, src.y + ny);\r\n    }\r\n\r\n    static subtract(src: Point, x: number, y: number): Point;\r\n    static subtract(src: Point, other: Point): Point;\r\n    static subtract(src: Point, other: number|Point, y?: number): Point {\r\n        const {x: nx, y: ny} = splitArgs(other, y);\r\n        return new Point(src.x - nx, src.y - ny);\r\n    }\r\n\r\n    static Multiply(a: Point, s: number, sy?: number): Point;\r\n    static Multiply(a: Point, b: Point): Point;\r\n    static Multiply(a: Point, b: Point|number, sy ?: number): Point {\r\n        if (sy !== undefined) {\r\n            return new Point(a.x * (b as number), a.y * sy);\r\n        }\r\n        else if ((b as any).x !== undefined) {\r\n            return new Point(a.x * (b as Point).x, a.y * (b as Point).y);\r\n        } else {\r\n            return new Point(a.x * (b as number), a.y * (b as number));\r\n        }\r\n    }\r\n\r\n    static interpolate(a: Point, b: Point, p: number): Point {\r\n        return new Point(a.x + (b.x - a.x) * p, a.y + (b.y - a.y) * p);\r\n    }\r\n\r\n    static componentMin(a: Point, b: Point): Point {\r\n        if(a.x <= b.x && a.y <= b.y) return a;\r\n        if(b.x <= a.x && b.y <= a.y) return b;\r\n        return new Point(Math.min(a.x, b.x), Math.min(a.y, b.y));\r\n    }\r\n    \r\n    static componentMax(a: Point, b: Point): Point {\r\n        if(a.x >= b.x && a.y >= b.y) return a;\r\n        if(b.x >= a.x && b.y >= a.y) return b;\r\n        return new Point(Math.max(a.x, b.x), Math.max(a.y, b.y));\r\n    }\r\n\r\n    static Bezier(pts: Point[], t: number): Point {\r\n        if(pts.length === 1) return pts[0];\r\n        else if(pts.length === 2) return Point.add(Point.Multiply(pts[1], t), Point.Multiply(pts[0], 1-t));\r\n        return Point.add(\r\n            Point.Multiply(Point.Bezier(pts.slice(1), t), t),\r\n            Point.Multiply(Point.Bezier(pts.slice(0, pts.length - 1), t), 1-t));\r\n    }\r\n\r\n    rotate(theta: number): Point {\r\n        const angle = Math.atan2(this.y, this.x);\r\n        const len = this.Length();\r\n        return Point.fromAngle(angle + theta, len);\r\n    }\r\n}\r\n\r\nfunction splitArgs(x: Point|number, y ?: number): {x: number, y: number} {\r\n    if(y === undefined) return { x: (<Point>x).x, y: (<Point>x).y };\r\n    return {x: <number>x, y};\r\n}\r\n\r\nfunction splitArgsOrSingle(x: Point|number, y ?: number): {x: number, y: number} {\r\n    if(y === undefined)\r\n    {\r\n        if((x as Point).x !== undefined) {\r\n            return { x: (<Point>x).x, y: (<Point>x).y };\r\n        }\r\n        return { x: x as number, y: x as number };\r\n    } \r\n    return {x: <number>x, y};\r\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactDom = _interopRequireDefault(require(\"react-dom\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar DEFAULT_PLACEHOLDER_STRING = 'Select...';\n\nvar Dropdown =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Dropdown, _Component);\n\n  function Dropdown(props) {\n    var _this;\n\n    _classCallCheck(this, Dropdown);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Dropdown).call(this, props));\n    _this.state = {\n      selected: _this.parseValue(props.value, props.options) || {\n        label: typeof props.placeholder === 'undefined' ? DEFAULT_PLACEHOLDER_STRING : props.placeholder,\n        value: ''\n      },\n      isOpen: false\n    };\n    _this.mounted = true;\n    _this.handleDocumentClick = _this.handleDocumentClick.bind(_assertThisInitialized(_this));\n    _this.fireChangeEvent = _this.fireChangeEvent.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Dropdown, [{\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(newProps) {\n      if (newProps.value) {\n        var selected = this.parseValue(newProps.value, newProps.options);\n\n        if (selected !== this.state.selected) {\n          this.setState({\n            selected: selected\n          });\n        }\n      } else {\n        this.setState({\n          selected: {\n            label: typeof newProps.placeholder === 'undefined' ? DEFAULT_PLACEHOLDER_STRING : newProps.placeholder,\n            value: ''\n          }\n        });\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      document.addEventListener('click', this.handleDocumentClick, false);\n      document.addEventListener('touchend', this.handleDocumentClick, false);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.mounted = false;\n      document.removeEventListener('click', this.handleDocumentClick, false);\n      document.removeEventListener('touchend', this.handleDocumentClick, false);\n    }\n  }, {\n    key: \"handleMouseDown\",\n    value: function handleMouseDown(event) {\n      if (this.props.onFocus && typeof this.props.onFocus === 'function') {\n        this.props.onFocus(this.state.isOpen);\n      }\n\n      if (event.type === 'mousedown' && event.button !== 0) return;\n      event.stopPropagation();\n      event.preventDefault();\n\n      if (!this.props.disabled) {\n        this.setState({\n          isOpen: !this.state.isOpen\n        });\n      }\n    }\n  }, {\n    key: \"parseValue\",\n    value: function parseValue(value, options) {\n      var option;\n\n      if (typeof value === 'string') {\n        for (var i = 0, num = options.length; i < num; i++) {\n          if (options[i].type === 'group') {\n            var match = options[i].items.filter(function (item) {\n              return item.value === value;\n            });\n\n            if (match.length) {\n              option = match[0];\n            }\n          } else if (typeof options[i].value !== 'undefined' && options[i].value === value) {\n            option = options[i];\n          }\n        }\n      }\n\n      return option || value;\n    }\n  }, {\n    key: \"setValue\",\n    value: function setValue(value, label) {\n      var newState = {\n        selected: {\n          value: value,\n          label: label\n        },\n        isOpen: false\n      };\n      this.fireChangeEvent(newState);\n      this.setState(newState);\n    }\n  }, {\n    key: \"fireChangeEvent\",\n    value: function fireChangeEvent(newState) {\n      if (newState.selected !== this.state.selected && this.props.onChange) {\n        this.props.onChange(newState.selected);\n      }\n    }\n  }, {\n    key: \"renderOption\",\n    value: function renderOption(option) {\n      var _classes;\n\n      var value = option.value;\n\n      if (typeof value === 'undefined') {\n        value = option.label || option;\n      }\n\n      var label = option.label || option.value || option;\n      var isSelected = value === this.state.selected.value || value === this.state.selected;\n      var classes = (_classes = {}, _defineProperty(_classes, \"\".concat(this.props.baseClassName, \"-option\"), true), _defineProperty(_classes, option.className, !!option.className), _defineProperty(_classes, 'is-selected', isSelected), _classes);\n      var optionClass = (0, _classnames[\"default\"])(classes);\n      return _react[\"default\"].createElement(\"div\", {\n        key: value,\n        className: optionClass,\n        onMouseDown: this.setValue.bind(this, value, label),\n        onClick: this.setValue.bind(this, value, label),\n        role: \"option\",\n        \"aria-selected\": isSelected ? 'true' : 'false'\n      }, label);\n    }\n  }, {\n    key: \"buildMenu\",\n    value: function buildMenu() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          options = _this$props.options,\n          baseClassName = _this$props.baseClassName;\n      var ops = options.map(function (option) {\n        if (option.type === 'group') {\n          var groupTitle = _react[\"default\"].createElement(\"div\", {\n            className: \"\".concat(baseClassName, \"-title\")\n          }, option.name);\n\n          var _options = option.items.map(function (item) {\n            return _this2.renderOption(item);\n          });\n\n          return _react[\"default\"].createElement(\"div\", {\n            className: \"\".concat(baseClassName, \"-group\"),\n            key: option.name,\n            role: \"listbox\",\n            tabIndex: \"-1\"\n          }, groupTitle, _options);\n        } else {\n          return _this2.renderOption(option);\n        }\n      });\n      return ops.length ? ops : _react[\"default\"].createElement(\"div\", {\n        className: \"\".concat(baseClassName, \"-noresults\")\n      }, \"No options found\");\n    }\n  }, {\n    key: \"handleDocumentClick\",\n    value: function handleDocumentClick(event) {\n      if (this.mounted) {\n        if (!_reactDom[\"default\"].findDOMNode(this).contains(event.target)) {\n          if (this.state.isOpen) {\n            this.setState({\n              isOpen: false\n            });\n          }\n        }\n      }\n    }\n  }, {\n    key: \"isValueSelected\",\n    value: function isValueSelected() {\n      return typeof this.state.selected === 'string' || this.state.selected.value !== '';\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _classNames, _classNames2, _classNames3, _classNames4, _classNames5;\n\n      var _this$props2 = this.props,\n          baseClassName = _this$props2.baseClassName,\n          controlClassName = _this$props2.controlClassName,\n          placeholderClassName = _this$props2.placeholderClassName,\n          menuClassName = _this$props2.menuClassName,\n          arrowClassName = _this$props2.arrowClassName,\n          arrowClosed = _this$props2.arrowClosed,\n          arrowOpen = _this$props2.arrowOpen,\n          className = _this$props2.className;\n      var disabledClass = this.props.disabled ? 'Dropdown-disabled' : '';\n      var placeHolderValue = typeof this.state.selected === 'string' ? this.state.selected : this.state.selected.label;\n      var dropdownClass = (0, _classnames[\"default\"])((_classNames = {}, _defineProperty(_classNames, \"\".concat(baseClassName, \"-root\"), true), _defineProperty(_classNames, className, !!className), _defineProperty(_classNames, 'is-open', this.state.isOpen), _classNames));\n      var controlClass = (0, _classnames[\"default\"])((_classNames2 = {}, _defineProperty(_classNames2, \"\".concat(baseClassName, \"-control\"), true), _defineProperty(_classNames2, controlClassName, !!controlClassName), _defineProperty(_classNames2, disabledClass, !!disabledClass), _classNames2));\n      var placeholderClass = (0, _classnames[\"default\"])((_classNames3 = {}, _defineProperty(_classNames3, \"\".concat(baseClassName, \"-placeholder\"), true), _defineProperty(_classNames3, placeholderClassName, !!placeholderClassName), _defineProperty(_classNames3, 'is-selected', this.isValueSelected()), _classNames3));\n      var menuClass = (0, _classnames[\"default\"])((_classNames4 = {}, _defineProperty(_classNames4, \"\".concat(baseClassName, \"-menu\"), true), _defineProperty(_classNames4, menuClassName, !!menuClassName), _classNames4));\n      var arrowClass = (0, _classnames[\"default\"])((_classNames5 = {}, _defineProperty(_classNames5, \"\".concat(baseClassName, \"-arrow\"), true), _defineProperty(_classNames5, arrowClassName, !!arrowClassName), _classNames5));\n\n      var value = _react[\"default\"].createElement(\"div\", {\n        className: placeholderClass\n      }, placeHolderValue);\n\n      var menu = this.state.isOpen ? _react[\"default\"].createElement(\"div\", {\n        className: menuClass,\n        \"aria-expanded\": \"true\"\n      }, this.buildMenu()) : null;\n      return _react[\"default\"].createElement(\"div\", {\n        className: dropdownClass\n      }, _react[\"default\"].createElement(\"div\", {\n        className: controlClass,\n        onMouseDown: this.handleMouseDown.bind(this),\n        onTouchEnd: this.handleMouseDown.bind(this),\n        \"aria-haspopup\": \"listbox\"\n      }, value, _react[\"default\"].createElement(\"div\", {\n        className: \"\".concat(baseClassName, \"-arrow-wrapper\")\n      }, arrowOpen && arrowClosed ? this.state.isOpen ? arrowOpen : arrowClosed : _react[\"default\"].createElement(\"span\", {\n        className: arrowClass\n      }))), menu);\n    }\n  }]);\n\n  return Dropdown;\n}(_react.Component);\n\nDropdown.defaultProps = {\n  baseClassName: 'Dropdown'\n};\nvar _default = Dropdown;\nexports[\"default\"] = _default;\n","/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg) && arg.length) {\n\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\tif (inner) {\n\t\t\t\t\tclasses.push(inner);\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","export function loadShader(gl: WebGLRenderingContext, type: number, source: string) {\r\n    const shader = gl.createShader(type);\r\n    // Send the source to the shader object\r\n    gl.shaderSource(shader, source);\r\n    // Compile the shader program\r\n    gl.compileShader(shader);\r\n    // See if it compiled successfully\r\n    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\r\n      console.error(source);\r\n      alert(`An error occurred compiling the ${(type === gl.VERTEX_SHADER ? 'vertex' : type === gl.FRAGMENT_SHADER ? 'fragment' : '')} shaders: ` + gl.getShaderInfoLog(shader));\r\n      gl.deleteShader(shader);\r\n      return undefined;\r\n    }\r\n\r\n    return shader;\r\n}\r\n\r\n\r\nexport function initShaderProgram(gl: WebGLRenderingContext, vertexShaderSource: string, fragmentShaderSource: string) {\r\n    const vertexShader = loadShader(gl, gl.VERTEX_SHADER, vertexShaderSource);\r\n    const fragmentShader = loadShader(gl, gl.FRAGMENT_SHADER, fragmentShaderSource);\r\n\r\n    // Create the shader program\r\n\r\n    const shaderProgram = gl.createProgram();\r\n    gl.attachShader(shaderProgram, vertexShader);\r\n    gl.attachShader(shaderProgram, fragmentShader);\r\n    gl.linkProgram(shaderProgram);\r\n\r\n    // If creating the shader program failed, alert\r\n\r\n    if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {\r\n      alert('Unable to initialize the shader program: ' + gl.getProgramInfoLog(shaderProgram));\r\n      return undefined;\r\n    }\r\n\r\n    return shaderProgram;\r\n  }\r\n\r\n\r\nexport function shaderDraw(gl: WebGLRenderingContext, shader: WebGLProgram, positionBuffer: WebGLBuffer, positionNumComponents: number, renderMode: 'triangle'|'tristrip'|'trifan', bufferOffset: number, bufferCount: number, bindUniforms: (gl: WebGLRenderingContext) => void) {\r\n    gl.clearColor(0.0, 0.0, 0.0, 1.0);  // Clear to black, fully opaque\r\n    gl.clearDepth(1.0);                 // Clear everything\r\n    gl.enable(gl.DEPTH_TEST);           // Enable depth testing\r\n    gl.depthFunc(gl.LEQUAL);            // Near things obscure far things\r\n\r\n    // Clear the canvas before we start drawing on it.\r\n\r\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n\r\n    // Tell WebGL how to pull out the positions from the position\r\n    // buffer into the vertexPosition attribute.\r\n    {\r\n      const type = gl.FLOAT;    // the data in the buffer is 32bit floats\r\n      const normalize = false;  // don't normalize\r\n      const stride = 0;         // how many bytes to get from one set of values to the next\r\n                                // 0 = use type and numComponents above\r\n      const offset = 0;         // how many bytes inside the buffer to start from\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\r\n      gl.vertexAttribPointer(\r\n            gl.getAttribLocation(shader, 'aVertexPosition'),\r\n            positionNumComponents,\r\n            type,\r\n            normalize,\r\n            stride,\r\n            offset);\r\n      gl.enableVertexAttribArray(\r\n        gl.getAttribLocation(shader, 'aVertexPosition'));\r\n    }\r\n\r\n    // Tell WebGL to use our program when drawing\r\n\r\n    gl.useProgram(shader);\r\n    bindUniforms(gl);\r\n    gl.drawArrays(\r\n      renderMode === 'triangle' ? gl.TRIANGLES :\r\n      renderMode === 'tristrip' ? gl.TRIANGLE_STRIP :\r\n      gl.TRIANGLE_FAN, bufferOffset, bufferCount);\r\n}\r\n\r\n\r\nexport function shaderDrawMultiple(gl: WebGLRenderingContext, shader: WebGLProgram, positionBuffer: WebGLBuffer, positionNumComponents: number, renderMode: 'triangle'|'tristrip'|'trifan', drawCounts: number, getGeom: (i: number) => {bufferOffset: number, bufferCount: number}, bindUniforms: (gl: WebGLRenderingContext, i: number) => void) {\r\n  gl.clearColor(0.0, 0.0, 0.0, 1.0);  // Clear to black, fully opaque\r\n  gl.clearDepth(1.0);                 // Clear everything\r\n  gl.enable(gl.DEPTH_TEST);           // Enable depth testing\r\n  gl.depthFunc(gl.LEQUAL);            // Near things obscure far things\r\n\r\n  // Clear the canvas before we start drawing on it.\r\n\r\n  gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n\r\n  // Tell WebGL how to pull out the positions from the position\r\n  // buffer into the vertexPosition attribute.\r\n  {\r\n    const type = gl.FLOAT;    // the data in the buffer is 32bit floats\r\n    const normalize = false;  // don't normalize\r\n    const stride = 0;         // how many bytes to get from one set of values to the next\r\n                              // 0 = use type and numComponents above\r\n    const offset = 0;         // how many bytes inside the buffer to start from\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\r\n    gl.vertexAttribPointer(\r\n          gl.getAttribLocation(shader, 'aVertexPosition'),\r\n          positionNumComponents,\r\n          type,\r\n          normalize,\r\n          stride,\r\n          offset);\r\n    gl.enableVertexAttribArray(\r\n      gl.getAttribLocation(shader, 'aVertexPosition'));\r\n  }\r\n\r\n  // Tell WebGL to use our program when drawing\r\n\r\n  gl.useProgram(shader);\r\n  for(let i = 0; i < drawCounts; i++) {\r\n    bindUniforms(gl, i);\r\n    let {bufferOffset, bufferCount} = getGeom(i);\r\n    gl.drawArrays(\r\n      renderMode === 'triangle' ? gl.TRIANGLES :\r\n      renderMode === 'tristrip' ? gl.TRIANGLE_STRIP :\r\n      gl.TRIANGLE_FAN, bufferOffset, bufferCount);\r\n  }\r\n}\r\n\r\nexport function fragmentShaderOnlyDraw(gl: WebGLRenderingContext, shader: WebGLProgram, positionBuffer: WebGLBuffer, bindUniforms: (gl: WebGLRenderingContext) => void) {\r\n    gl.clearColor(0.0, 0.0, 0.0, 1.0);  // Clear to black, fully opaque\r\n    gl.clearDepth(1.0);                 // Clear everything\r\n    gl.enable(gl.DEPTH_TEST);           // Enable depth testing\r\n    gl.depthFunc(gl.LEQUAL);            // Near things obscure far things\r\n\r\n    // Clear the canvas before we start drawing on it.\r\n\r\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n\r\n    // Tell WebGL how to pull out the positions from the position\r\n    // buffer into the vertexPosition attribute.\r\n    {\r\n      const numComponents = 2;  // pull out 2 values per iteration\r\n      const type = gl.FLOAT;    // the data in the buffer is 32bit floats\r\n      const normalize = false;  // don't normalize\r\n      const stride = 0;         // how many bytes to get from one set of values to the next\r\n                                // 0 = use type and numComponents above\r\n      const offset = 0;         // how many bytes inside the buffer to start from\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\r\n      gl.vertexAttribPointer(\r\n            gl.getAttribLocation(shader, 'aVertexPosition'),\r\n            numComponents,\r\n            type,\r\n            normalize,\r\n            stride,\r\n            offset);\r\n      gl.enableVertexAttribArray(\r\n        gl.getAttribLocation(shader, 'aVertexPosition'));\r\n    }\r\n\r\n    // Tell WebGL to use our program when drawing\r\n\r\n    gl.useProgram(shader);\r\n    bindUniforms(gl);\r\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\r\n}\r\n\r\nexport function fragmentShaderOnlyInitBuffer(gl: WebGLRenderingContext, left?: number, top?: number, right?: number, bottom?: number) {\r\n     // Create a buffer for the square's positions.\r\n     const positionBuffer = gl.createBuffer();\r\n\r\n     // Select the positionBuffer as the one to apply buffer\r\n     // operations to from here out.\r\n     gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\r\n\r\n     const l = left ?? -1.0;\r\n     const r = right ?? 1.0;\r\n     const t = top ?? -1.0;\r\n     const b = bottom ?? 1.0;\r\n \r\n     // Now create an array of positions for the square.\r\n     const positions = [\r\n         b, r,\r\n         t, r,\r\n         b, l,\r\n         t, l,\r\n     ];\r\n \r\n     // Now pass the list of positions into WebGL to build the\r\n     // shape. We do this by creating a Float32Array from the\r\n     // JavaScript array, then use it to fill the current buffer.\r\n     gl.bufferData(gl.ARRAY_BUFFER,\r\n                   new Float32Array(positions),\r\n                   gl.STATIC_DRAW);\r\n \r\n     return positionBuffer;\r\n}\r\n\r\nexport function initGLBuffer(gl: WebGLRenderingContext, components: number[]) {\r\n  const positionBuffer = gl.createBuffer();\r\n\r\n  gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\r\n\r\n  gl.bufferData(gl.ARRAY_BUFFER,\r\n                new Float32Array(components),\r\n                gl.STATIC_DRAW);\r\n\r\n  return positionBuffer;\r\n}\r\n\r\nexport const defaultVertexShader = `attribute vec4 aVertexPosition;\r\nvarying vec3 vPos;\r\nvoid main() {\r\n  vPos = vec3(aVertexPosition.xy, 0.0);\r\n  gl_Position = aVertexPosition;\r\n}`;","import * as React from 'react';\r\nimport Dropdown from 'react-dropdown';\r\n\r\nexport function ObjDropdownComponent<T>(props: {options: T[], getName: (item:T) => string, value: T, onChange: (item:T)=>void}) {\r\n    const names = props.options.map(props.getName);\r\n    return <Dropdown options={names} value={props.getName(props.value)} onChange={chng => props.onChange(props.options.find(v => props.getName(v) === chng.value))}></Dropdown>\r\n}"],"sourceRoot":""}