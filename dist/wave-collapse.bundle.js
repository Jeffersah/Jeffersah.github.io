"use strict";(self.webpackChunktrading_game=self.webpackChunktrading_game||[]).push([[76],{1360:(e,t,n)=>{n.r(t),n.d(t,{default:()=>E});var l=n(7363),o=n(127),r=n(3486),i=n(7604),h=n(5907);const g=[{x:1,y:0,z:0},{x:0,y:1,z:0},{x:-1,y:0,z:0},{x:0,y:-1,z:0},{x:0,y:0,z:1},{x:0,y:0,z:-1}];function f(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function s(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n+=4)if(0!==t[n+3]){if(0===e[n+3])return!1;for(let l=0;l<3;l++)if(e[n+l]!==t[n+l])return!1}return!0}function u(e,t){let n=[];for(let l=0;l<e.length;l++){let o=e[l].flatMap((e=>[t.data[4*e+0],t.data[4*e+1],t.data[4*e+2],t.data[4*e+3]]));n.push(o)}return n}function a(e){let t=[],n=[],l=[];for(let o=0;o<e.data.length;o+=4)0!==e.data[o+3]&&(e.data[o+0]>0?t.push(o/4):e.data[o+1]>0?n.push(o/4):e.data[o+2]>0&&l.push(o/4));return{r:t,g:n,b:l}}const c=n.p+"e6b83e99ae7b3170d3a0b5f911d1ffee.png";function d(e,t,n,l,o){let r=[{x:n,y:l,z:o}];for(;r.length>0;){let{x:n,y:l,z:o}=r.pop(),i=t[n][l][o];for(let h=0;h<6;h++){let f=g[h];if(n+f.x<0||l+f.y<0||o+f.z<0||n+f.x>=t.length||l+f.y>=t[n].length||o+f.z>=t[n][l].length)continue;let s=p(e,i,t[n+f.x][l+f.y][o+f.z],h);null!==s&&(t[n+f.x][l+f.y][o+f.z]=s,r.push({x:n+f.x,y:l+f.y,z:o+f.z}))}}}function p(e,t,n,l){if(b(n))return null;let o=[];y(t).forEach((t=>{e[t].neighbors[l].forEach((e=>{-1===o.indexOf(e)&&o.push(e)}))}));let r=y(n),i=!1;for(var h=r.length-1;h>=0;h--)-1===o.indexOf(r[h])&&(r.splice(h,1),i=!0);return i?1===r.length?r[0]:0===r.length?0:r:null}function y(e){return b(e)?[e]:e}function b(e){return"number"==typeof e}const m=64;let x;function z(){const e=new o.Z;x=new r.V(64,64,c,e.registerAssetLoadCallback()),e.onAllFinished((()=>function(){const e=document.createElement("canvas");e.width=x.image.width,e.height=x.image.height;const t=e.getContext("2d");t.drawImage(x.image,0,0);const n=function(e,t){let n=e.width/m,l=e.height/(3*m),o=[],r=[];const i=function(e){let t=e.getImageData(0,m,m,m),n=e.getImageData(0,2*m,m,m),l=a(t),o=a(n),r=t.width*t.height;return[o.g.map((e=>e+r)),o.r.map((e=>e+r)),l.g,l.r,l.b,o.b.map((e=>e+r))]}(t);console.log("MASKS:"),console.log(i),o.push({id:0,neighbors:[[],[],[],[],[],[]]});let h=[];for(let e=0;e<i.length;e++)h.push(i[e].flatMap((e=>[0,0,0,0])));r.push(h);for(let e=0;e<l;e++)for(let l=0;l<n;l++){if(0===l&&0===e)continue;const n=u(i,t.getImageData(l*m,e*m*3+m,m,2*m)),h=[[],[],[],[],[],[]],g=o.length;o.push({id:g,neighbors:h}),r.push(n);for(let e=0;e<o.length;e++){const t=r[e];for(let l=0;l<4;l++)f(n[l],t[(l+2)%4])&&(o[e].neighbors[(l+2)%4].push(g),h[l].push(e));s(n[4],t[5])&&(o[e].neighbors[5].push(g),h[4].push(e)),s(t[4],n[5])&&(o[e].neighbors[4].push(g),h[5].push(e))}}return o}(e,t);console.log("Adj Table:"),console.log(n);const l=document.getElementById("canvas"),o=l.getContext("2d");let r=function(e,t,n,l){let o=[];for(let t=0;t<e.length;t++)o.push(t);let r=[];for(let e=0;e<t;e++){let e=[];for(let t=0;t<n;t++){let t=[];for(let e=0;e<l;e++)t.push([...o]);e.push(t)}r.push(e)}return r}(n,24,24,3);for(let e=0;e<r.length;e++)for(let t=0;t<r[0][0].length;t++)r[e][0][t]=0,d(n,r,e,0,t),r[e][r[0].length-1][t]=0,d(n,r,e,r[0].length-1,t);for(let e=0;e<r[0].length;e++)for(let t=0;t<r[0][0].length;t++)r[0][e][t]=0,d(n,r,0,e,t),r[r.length-1][e][t]=0,d(n,r,r.length-1,e,t);new i.Z(l,o,1600,1200,!0,(()=>w(x,r,o))),v(n,x,r,o)}()))}function v(e,t,n,l){w(t,n,l),function(e,t){let n=1/0,l=[];for(let e=0;e<t.length;e++)for(let o=0;o<t[e].length;o++)for(let r=0;r<t[e][o].length;r++)if(!b(t[e][o][r])){let i=t[e][o][r].length;i<n?(n=i,l=[{x:e,y:o,z:r}]):i===n&&l.push({x:e,y:o,z:r})}if(!isFinite(n))return!0;let o=Math.floor(Math.random()*l.length),{x:r,y:i,z:h}=l[o],g=y(t[r][i][h]),f=g[Math.floor(Math.random()*g.length)];return t[r][i][h]=f,d(e,t,r,i,h),!1}(e,n)||requestAnimationFrame((()=>v(e,t,n,l)))}function w(e,t,n){n.clearRect(0,0,1600,1200);let l=[800,1200];for(let o=0;o<t[0][0].length;o++)for(let r=t.length-1;r>=0;r--)for(let i=t[r].length-1;i>=0;i--){let g=y(t[r][i][o]);if(g.length<=8){if(0===g.length)continue;n.globalAlpha=1/g.length;let t=m/2*(r-i),f=m/4*-(r+i)-o*(m/2);for(const o of g){let r=o%x.tilesWide,i=Math.floor(o/x.tilesWide);e.getSprite(r,3*i,m,m).draw(n,new h.Z(t+l[0],f+l[1],m,m),0)}}}}function E(){return l.useEffect((()=>z())),l.createElement("div",{style:{top:0,bottom:0,left:0,right:0,position:"absolute"}},l.createElement("canvas",{id:"canvas",style:{top:0,bottom:0,left:0,right:0,position:"absolute"}}))}},711:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var l=n(7363),o=n(127),r=n(3486),i=n(7604),h=n(5907);function g(e){var t;return null!==(t=e.top)&&void 0!==t?t:e.edges.map((e=>2===e?"any":[e]))}function f(e){var t;return null!==(t=e.bottom)&&void 0!==t?t:e.edges.map((e=>0===e?"any":[e]))}function s(e,t){for(let n=0;n<e.length;n++)if("any"!==e[n]&&"any"!==t[n]){if(0===e[n].length||0===t[n].length)return!1;if(!u(e[n],t[n]))return!1}return!0}function u(e,t){for(let n=0;n<e.length;n++)if(-1!==t.indexOf(e[n]))return!0;return!1}const a=[{tile:[0,0],edges:[2,2,2,2]},{tile:[1,0],edges:[1,0,1,0]},{tile:[2,0],edges:[0,1,0,1]},{tile:[3,0],edges:[1,0,0,0],bottom:[[1,2],"any",[1,2],"any"],top:[[],[],[],[]]},{tile:[4,0],edges:[0,0,1,0],bottom:[[1,2],"any",[1,2],"any"],top:[[],[],[],[]]},{tile:[5,0],edges:[0,1,0,0],bottom:["any",[1,2],"any",[1,2]],top:[[],[],[],[]]},{tile:[6,0],edges:[0,0,0,1],bottom:["any",[1,2],"any",[1,2]],top:[[],[],[],[]]},{tile:[7,0],edges:[1,1,1,1]},{tile:[0,1],edges:[1,1,0,1]},{tile:[1,1],edges:[1,1,1,0]},{tile:[2,1],edges:[0,1,1,1]},{tile:[3,1],edges:[1,0,1,1]},{tile:[4,1],edges:[1,1,0,0]},{tile:[5,1],edges:[0,1,1,0]},{tile:[6,1],edges:[0,0,1,1]},{tile:[7,1],edges:[1,0,0,1]},{tile:[0,2],edges:[1,0,2,0]},{tile:[1,2],edges:[0,1,0,2]},{tile:[2,2],edges:[2,0,1,0]},{tile:[3,2],edges:[0,2,0,1]},{tile:[4,2],edges:[1,0,1,0],bottom:[[1,2],[1,2],[1,2],[1,2]]},{tile:[5,2],edges:[0,1,0,1],bottom:[[1,2],[1,2],[1,2],[1,2]]},{tile:[5,3],edges:[0,0,0,0]}],c=[{x:1,y:0,z:0},{x:0,y:1,z:0},{x:-1,y:0,z:0},{x:0,y:-1,z:0},{x:0,y:0,z:1},{x:0,y:0,z:-1}],d=n.p+"c169d19bb90720608b4e6ba8299edfb4.png";function p(e,t,n,l){if(b(n))return null;let o=[];y(t).forEach((t=>{e[t].neighbors[l].forEach((e=>{-1===o.indexOf(e)&&o.push(e)}))}));let r=y(n),i=!1;for(var h=r.length-1;h>=0;h--)-1===o.indexOf(r[h])&&(r.splice(h,1),i=!0);return i?1===r.length?r[0]:0===r.length?o[0]:r:null}function y(e){return b(e)?[e]:e}function b(e){return"number"==typeof e}let m;function x(){const e=new o.Z;m=new r.V(32,32,d,e.registerAssetLoadCallback()),e.onAllFinished((()=>function(){const e=function(e){const t=[];return e.forEach((n=>{let l={id:t.length,neighbors:[[],[],[],[],[],[]]};for(let t=0;t<e.length;t++){let o=e[t];for(let e=0;e<4;e++)o.edges[(e+2)%4]===n.edges[e]&&l.neighbors[e].push(t);s(g(o),f(n))&&l.neighbors[4].push(t),s(g(n),f(o))&&l.neighbors[5].push(t)}for(var o=0;o<l.neighbors.length;o++)l.neighbors[o].sort(((e,t)=>e-t));t.push(l)})),t}(a),t=document.getElementById("canvas"),n=t.getContext("2d");let l=function(e,t,n,l){let o=[];for(let t=0;t<e.length;t++)o.push(t);let r=[];for(let e=0;e<t;e++){let e=[];for(let t=0;t<n;t++){let t=[];for(let e=0;e<l;e++)t.push([...o]);e.push(t)}r.push(e)}return r}(e,40,40,1);new i.Z(t,n,1200,800,!0,(()=>v(a,m,l,n))),z(a,e,m,l,n)}()))}function z(e,t,n,l,o){v(e,n,l,o),function(e,t){let n=1/0,l=[];for(let e=0;e<t.length;e++)for(let o=0;o<t[e].length;o++)for(let r=0;r<t[e][o].length;r++)if(!b(t[e][o][r])){let i=t[e][o][r].length;i<n?(n=i,l=[{x:e,y:o,z:r}]):i===n&&l.push({x:e,y:o,z:r})}if(!isFinite(n))return!0;let o=Math.floor(Math.random()*l.length),{x:r,y:i,z:h}=l[o],g=y(t[r][i][h]),f=g[Math.floor(Math.random()*g.length)];return t[r][i][h]=f,function(e,t,n,l,o){let r=[{x:n,y:l,z:o}];for(;r.length>0;){let{x:n,y:l,z:o}=r.pop(),i=t[n][l][o];for(let h=0;h<6;h++){let g=c[h];if(n+g.x<0||l+g.y<0||o+g.z<0||n+g.x>=t.length||l+g.y>=t[n].length||o+g.z>=t[n][l].length)continue;let f=p(e,i,t[n+g.x][l+g.y][o+g.z],h);null!==f&&(t[n+g.x][l+g.y][o+g.z]=f,r.push({x:n+g.x,y:l+g.y,z:o+g.z}))}}}(e,t,r,i,h),!1}(t,l)||requestAnimationFrame((()=>z(e,t,n,l,o)))}function v(e,t,n,l){l.clearRect(0,0,1200,800);let o=[600,800];for(let r=0;r<n[0][0].length;r++)for(let i=n.length-1;i>=0;i--)for(let g=n[i].length-1;g>=0;g--){let f=y(n[i][g][r]);if(f.length<=12){if(0===f.length)continue;l.globalAlpha=1/f.length;let n=16*(i-g),s=8*-(i+g)-16*r;for(const r of f){let i=e[r];t.getSprite(i.tile[0],i.tile[1],32,32).draw(l,new h.Z(n+o[0],s+o[1],32,32),0)}}}}function w(){return l.useEffect((()=>x())),l.createElement("div",{style:{top:0,bottom:0,left:0,right:0,position:"absolute"}},l.createElement("canvas",{id:"canvas",style:{top:0,bottom:0,left:0,right:0,position:"absolute"}}))}}}]);
//# sourceMappingURL=wave-collapse.bundle.js.map