(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{73:function(t,n,e){"use strict";e.d(n,"a",(function(){return r}));class r{constructor(t,n){this.x=t,this.y=n}static zero(){return new r(0,0)}static fromAngle(t,n){return new r(Math.cos(t)*(null!=n?n:1),Math.sin(t)*(null!=n?n:1))}LengthSq(){return r.Dot(this,this)}Length(){return Math.sqrt(this.LengthSq())}Clone(){return new r(this.x,this.y)}Negate(){return new r(-this.x,-this.y)}NegateInPlace(){return this.x=-this.x,this.y=-this.y,this}static Dot(t,n){return t.x*n.x+t.y*n.y}DotWith(t){return r.Dot(this,t)}normalize(){let t=this.Length();return r.Multiply(this,1/t)}Direction(){return Math.atan2(this.y,this.x)}AddWith(t,n){const{x:e,y:r}=i(t,n);return this.x+=e,this.y+=r,this}MultWith(t,n){const{x:e,y:r}=i(t,n);return this.x*=e,this.y*=r,this}SubtractWith(t,n){const{x:e,y:r}=i(t,n);return this.x-=e,this.y-=r,this}DivideWith(t,n){const{x:e,y:r}=i(t,n);return this.x/=e,this.y/=r,this}Equals(t){return this.x===t.x&&this.y===t.y}static add(t,n,e){const{x:o,y:a}=i(n,e);return new r(t.x+o,t.y+a)}static subtract(t,n,e){const{x:o,y:a}=i(n,e);return new r(t.x-o,t.y-a)}static Multiply(t,n,e){return void 0!==e?new r(t.x*n,t.y*e):void 0!==n.x?new r(t.x*n.x,t.y*n.y):new r(t.x*n,t.y*n)}static interpolate(t,n,e){return new r(t.x+(n.x-t.x)*e,t.y+(n.y-t.y)*e)}static componentMin(t,n){return t.x<=n.x&&t.y<=n.y?t:n.x<=t.x&&n.y<=t.y?n:new r(Math.min(t.x,n.x),Math.min(t.y,n.y))}static componentMax(t,n){return t.x>=n.x&&t.y>=n.y?t:n.x>=t.x&&n.y>=t.y?n:new r(Math.max(t.x,n.x),Math.max(t.y,n.y))}rotate(t){const n=Math.atan2(this.y,this.x),e=this.Length();return r.fromAngle(n+t,e)}}function i(t,n){return void 0===n?{x:t.x,y:t.y}:{x:t,y:n}}},98:function(t,n,e){"use strict";e.r(n),e.d(n,"default",(function(){return d}));var r=e(0),i=e(15);function o(t,n,e){const r=t.createShader(n);return t.shaderSource(r,e),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:(alert(`An error occurred compiling the ${n===t.VERTEX_SHADER?"vertex":n===t.FRAGMENT_SHADER?"fragment":""} shaders: `+t.getShaderInfoLog(r)),void t.deleteShader(r))}function a(t,n,e,r){t.clearColor(0,0,0,1),t.clearDepth(1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT);{const r=2,i=t.FLOAT,o=!1,a=0,s=0;t.bindBuffer(t.ARRAY_BUFFER,e),t.vertexAttribPointer(t.getAttribLocation(n,"aVertexPosition"),r,i,o,a,s),t.enableVertexAttribArray(t.getAttribLocation(n,"aVertexPosition"))}t.useProgram(n),r(t),t.drawArrays(t.TRIANGLE_STRIP,0,4)}var s=e(13),c=e(73);class l{constructor(t,n,e){this.canvas=t,this.fragment_code=n,this.onMiddleClick=e,Object(s.b)(t,1200,600),this.cursor_anchor=null,this.mm_down=!1,this.gl=t.getContext("webgl"),this.canvasRange=new i.d(new i.c(0,1200),new i.c(0,600)),this.windowRange=new i.d(new i.c(-1,1),new i.c(-1,t.height/t.width)),this.init()}init(){this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.initProgram()}initProgram(){this.program=function(t,n,e){const r=o(t,t.VERTEX_SHADER,n),i=o(t,t.FRAGMENT_SHADER,e),a=t.createProgram();if(t.attachShader(a,r),t.attachShader(a,i),t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS))return a;alert("Unable to initialize the shader program: "+t.getProgramInfoLog(a))}(this.gl,"attribute vec4 aVertexPosition;\nvarying vec3 vPos;\nvoid main() {\n  vPos = vec3(aVertexPosition.xy, 0.0);\n  gl_Position = aVertexPosition;\n}",this.fragment_code),this.buffer=function(t,n,e,r,i){const o=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,o);const a=null!=n?n:-1,s=null!=r?r:1,c=null!=e?e:-1,l=null!=i?i:1,h=[l,s,c,s,l,a,c,a];return t.bufferData(t.ARRAY_BUFFER,new Float32Array(h),t.STATIC_DRAW),o}(this.gl)}run(){this.renderFrame(),this.canvas.addEventListener("mousedown",t=>{if(0===t.button)this.cursor_anchor=new c.a(t.offsetX,t.offsetY);else if(1===t.button){this.mm_down=!0;let n=this.canvasRange.GetPercentage(t.offsetX,t.offsetY);n=this.windowRange.GetValue(n.x,1-n.y),void 0!==this.onMiddleClick&&this.onMiddleClick(new c.a(n.x,n.y))}t.preventDefault()}),this.canvas.addEventListener("mouseup",t=>{0===t.button?this.cursor_anchor=null:1===t.button&&(this.mm_down=!1),t.preventDefault()}),this.canvas.addEventListener("mousemove",t=>{if(null!=this.cursor_anchor){const n=t.offsetX-this.cursor_anchor.x,e=t.offsetY-this.cursor_anchor.y,r=this.canvasRange.GetPercentage(n,e);this.windowRange.ShiftByPercentage(-r.x,r.y),this.cursor_anchor=new c.a(t.offsetX,t.offsetY),this.renderFrame(),t.preventDefault()}if(this.mm_down&&void 0!==this.onMiddleClick){let n=this.canvasRange.GetPercentage(t.offsetX,t.offsetY);n=this.windowRange.GetValue(n.x,1-n.y),this.onMiddleClick(new c.a(n.x,n.y))}}),this.canvas.addEventListener("wheel",t=>{const n=t.deltaY/3,e=Math.pow(1.1,n),r=this.canvasRange.GetPercentage(t.offsetX,t.offsetY);this.windowRange.AspectScale(e,r.x,1-r.y),this.renderFrame(),t.preventDefault()})}renderFrame(){a(this.gl,this.program,this.buffer,t=>{t.uniform2fv(t.getUniformLocation(this.program,"window_pos"),[this.windowRange.xRange.min,this.windowRange.yRange.min]),t.uniform2fv(t.getUniformLocation(this.program,"window_size"),[this.windowRange.xRange.Length(),this.windowRange.yRange.Length()])})}cleanup(){}}class h extends l{constructor(t,n){super(t,n),this.setJuliaPoint(new i.b(0,0))}setJuliaPoint(t){this.julia_point=new c.a(t.real,t.imaginary),this.julia_escape=(Math.sqrt(4*t.abs()+1)+1)/2,this.renderFrame()}renderFrame(){a(this.gl,this.program,this.buffer,t=>{t.uniform2fv(t.getUniformLocation(this.program,"window_pos"),[this.windowRange.xRange.min,this.windowRange.yRange.min]),t.uniform2fv(t.getUniformLocation(this.program,"window_size"),[this.windowRange.xRange.Length(),this.windowRange.yRange.Length()]),t.uniform2fv(t.getUniformLocation(this.program,"julia_coord"),[this.julia_point.x,this.julia_point.y]),t.uniform1fv(t.getUniformLocation(this.program,"julia_escape"),[this.julia_escape])})}}class u{constructor(t,n){this.canvas=t,this.juliaCanvas=n,this.mandelbrot=new l(t,"\nprecision highp float;\nvarying vec3 vPos;\nuniform vec2 window_pos;\nuniform vec2 window_size;\n\nconst int MAX_ITER = 256;\nconst float MAX_ABSSQ = 2.0;\n\nvec2 cplx_mult(vec2 a, vec2 b) {\n    return vec2(a.x * b.x - a.y * b.y, a.x * b.y + a.y * b.x);\n}\n\nvec2 step_mandelbrot(vec2 v, vec2 c) {\n    return cplx_mult(v, v) + c;\n}\n\nfloat cplx_abssq(vec2 v) {\n    return dot(v, v);\n}\n\nfloat iterate_mandelbrot(vec2 coords) {\n    vec2 roll = coords;\n    for(int iter = 0; iter < MAX_ITER; iter++) {\n        roll = step_mandelbrot(roll, coords);\n        if (cplx_abssq(roll) >= MAX_ABSSQ) {\n            return float(iter)/float(MAX_ITER);\n        }\n    }\n    return 1.0;\n}\n\nvec3 floatToColor(float perc) {\n    if(perc <= 0.5) {\n        return vec3(perc * 2.0, perc, 0.0);\n    }\n    perc = (perc - 0.5) * 2.0;\n    return vec3(1.0, 0.5 + perc / 2.0, perc);\n}\n\nvoid main() {\n    vec2 adjpos = vPos.xy;\n    adjpos += 1.0;\n    adjpos /= 2.0;\n    // adjpos is now 0, 1\n    // Convert that to world-space\n    adjpos = window_pos + adjpos * window_size;\n\n    float mb_perc = iterate_mandelbrot(adjpos);\n    gl_FragColor = vec4(floatToColor(mb_perc), 1.0);\n}",t=>{this.julia.setJuliaPoint(new i.b(t.x,t.y))}),this.julia=new h(n,"\nprecision highp float;\nvarying vec3 vPos;\nuniform vec2 julia_coord;\nuniform float julia_escape;\nuniform vec2 window_pos;\nuniform vec2 window_size;\n\nconst int MAX_ITER = 256;\n\nvec2 cplx_mult(vec2 a, vec2 b) {\n    return vec2(a.x * b.x - a.y * b.y, a.x * b.y + a.y * b.x);\n}\n\nvec2 step_julia(vec2 v) {\n    return cplx_mult(v, v) + julia_coord;\n}\n\nfloat cplx_abssq(vec2 v) {\n    return dot(v, v);\n}\n\nfloat iterate_julia(vec2 coords) {\n    vec2 roll = coords;\n    for(int iter = 0; iter < MAX_ITER; iter++) {\n        roll = step_julia(roll);\n        if (cplx_abssq(roll) >= julia_escape) {\n            return float(iter)/float(MAX_ITER);\n        }\n    }\n    return 1.0;\n}\n\nvec3 floatToColor(float perc) {\n    if(perc <= 0.5) {\n        return vec3(perc * 2.0, perc, 0.0);\n    }\n    perc = (perc - 0.5) * 2.0;\n    return vec3(1.0, 0.5 + perc / 2.0, perc);\n}\n\nvoid main() {\n    vec2 adjpos = vPos.xy;\n    adjpos += 1.0;\n    adjpos /= 2.0;\n    // adjpos is now 0, 1\n    // Convert that to world-space\n    adjpos = window_pos + adjpos * window_size;\n\n    float mb_perc = iterate_julia(adjpos);\n    gl_FragColor = vec4(floatToColor(mb_perc), 1.0);\n}"),this.mandelbrot.run(),this.julia.run()}cleanup(){this.mandelbrot.cleanup(),this.julia.cleanup()}}function d(){const t=r.useRef(),n=r.useRef();return r.useEffect(()=>{const e=new u(t.current,n.current);return()=>e.cleanup()},[t]),r.createElement("div",{className:"conway conway_body full_body"},r.createElement("canvas",{id:"canvas",ref:t}),r.createElement("canvas",{id:"jcanvas",ref:n}))}}}]);
//# sourceMappingURL=14.bundle.js.map