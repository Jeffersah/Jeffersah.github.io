(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{78:function(t,s,e){"use strict";e.d(s,"a",(function(){return i}));class i{constructor(t,s,e){this.x=t,this.y=s,this.z=e}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}length(){return Math.sqrt(this.lengthSq())}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}normalize(){return this.multiply(1/this.lengthSq())}negate(){return new i(-this.x,-this.y,-this.z)}multiply(t,s,e){n(t)||(s=null!=s?s:t,e=null!=e?e:t);var[h,r,o]=i.getxyz(t,s,e);return new i(this.x*h,this.y*r,this.z*o)}add(t,s,e){var[n,h,r]=i.getxyz(t,s,e);return new i(this.x+n,this.y+h,this.z+r)}subtract(t,s,e){var[n,h,r]=i.getxyz(t,s,e);return new i(this.x-n,this.y-h,this.z-r)}static getxyz(t,s,e){return n(t)?[t.x,t.y,t.z]:[t,s,e]}}function n(t){return void 0!==t.x}},87:function(t,s,e){"use strict";e.r(s),e.d(s,"default",(function(){return d}));var i=e(15);class n{constructor(t,s){this.canvasWidth=t,this.canvasHeight=s,this.finished=!1,this.scale=this.maxScale=1<<this.fastLog2(Math.min(t,s)),this.x=this.y=0}fastLog2(t){let s=0;for(;t>0;)s++,t>>=1;return s}X(){return this.x*this.scale}Y(){return this.y*this.scale}Scale(){return this.scale}Advance(){if(this.x++,this.x*this.scale>=this.canvasWidth&&(this.x=0,this.y++,this.y*this.scale>=this.canvasHeight)){if(this.y=0,1===this.scale)return this.finished=!0,!0;this.scale/=2}return!1}Reset(){this.finished=!1,this.scale=this.maxScale,this.x=this.y=0}}const h=new i.a(0,255,0,200,0,0);class r{constructor(t,s){this.canvas=t,this.func=s,this.repainter=new n(800,800),this.ctx=t.getContext("2d"),this.screenRange=new i.d(new i.c(0,t.offsetWidth),new i.c(0,t.offsetHeight))}Paint(t){for(let s=0;s<16e3&&!this.repainter.finished;s++){const s=this.repainter.X(),e=this.repainter.Y(),i=this.repainter.Scale(),n=this.screenRange.ConvertTo({x:s,y:e},t);this.ctx.fillStyle=this.CalcColor(n),this.ctx.fillRect(s,e,i,i),this.repainter.Advance()}}CalcColor(t){const s=new i.b(t.x,t.y);let e=new i.b(t.x,t.y),n=0;for(;n<255&&e.absSq()<this.func.MaxAbsSq();)e=this.func.Iterate(e,s),n++;if(e.absSq()<this.func.MaxAbsSq())return"white";const r=n/255;return h.ToColor(r)}ResetPaint(){this.repainter.Reset()}}class o{Iterate(t,s){return t.multiplyWith(t),t.addWith(s),t}MaxAbsSq(){return 2}}class a{constructor(t){this.c=t,this.radius=(Math.sqrt(4*t.abs()+1)+1)/2}Iterate(t,s){return t.multiplyWith(t),t.addWith(this.c),t}MaxAbsSq(){return this.radius}}class c{constructor(t,s,e,n){this.control=t,this.paintWindow=s,this.renderer=e,this.onSelect=n,t.addEventListener("mousedown",this.handleMouseDown.bind(this)),t.addEventListener("mouseup",this.handleMouseUp.bind(this)),t.addEventListener("mouseleave",this.handleMouseLeave.bind(this)),t.addEventListener("mousemove",this.handleMouseMove.bind(this)),t.addEventListener("wheel",this.handleScroll.bind(this)),this.screenBounds=new i.d(new i.c(0,t.offsetWidth),new i.c(0,t.offsetHeight))}reset(){this.paintWindow=new i.d(new i.c(-1,1),new i.c(-1,1)),this.renderer.ResetPaint()}handleMouseDown(t){if(0===t.button)this.grabX=t.offsetX,this.grabY=t.offsetY,this.isGrabbed=!0,t.preventDefault();else if(1===t.button){const s=this.screenBounds.ConvertTo({x:t.offsetX,y:t.offsetY},this.paintWindow);this.onSelect(s.x,s.y),t.preventDefault()}}handleMouseUp(){this.isGrabbed=!1}handleMouseLeave(){this.isGrabbed=!1}handleMouseMove(t){if(4===t.buttons){const s=this.screenBounds.ConvertTo({x:t.offsetX,y:t.offsetY},this.paintWindow);this.onSelect(s.x,s.y),t.preventDefault()}if(!this.isGrabbed)return;const s=t.offsetX-this.grabX,e=t.offsetY-this.grabY,i=this.screenBounds.GetPercentage(s,e);this.paintWindow.ShiftByPercentage(-i.x,-i.y),this.assertBounds(),this.renderer.ResetPaint(),this.grabX=t.offsetX,this.grabY=t.offsetY}handleScroll(t){const s=t.deltaY/3,e=Math.pow(1.1,s),i=this.screenBounds.GetPercentage(t.offsetX,t.offsetY);this.paintWindow.AspectScale(e,i.x,i.y),this.assertBounds(),this.renderer.ResetPaint(),t.preventDefault()}assertBounds(){(this.paintWindow.xRange.Length()>4||this.paintWindow.yRange.Length()>4)&&(this.paintWindow.xRange.ScaleTo(4,.5),this.paintWindow.yRange.ScaleTo(4,.5)),this.assertRangeBounds(this.paintWindow.xRange),this.assertRangeBounds(this.paintWindow.yRange)}assertRangeBounds(t){t.min<-2&&t.Shift(-2-t.min),t.max>2&&t.Shift(2-t.max)}Tick(){this.renderer.Paint(this.paintWindow)}}let l,u;function d(){const t=document.getElementById("mainCanvas"),s=document.getElementById("subCanvas");t.setAttribute("width","800"),t.setAttribute("height","800"),t.style.width="800px",t.style.height="800px",s.setAttribute("width","800"),s.setAttribute("height","800"),s.style.width="800px",s.style.height="800px",l=new c(t,new i.d(new i.c(-1,1),new i.c(-1,1)),new r(t,new o),f),u=new c(s,new i.d(new i.c(-1,1),new i.c(-1,1)),new r(s,new a(new i.b(0,0))),(t,s)=>{}),setTimeout(v,0)}function f(t,s){u.renderer.func=new a(new i.b(t,s)),u.reset()}function v(){l.Tick(),u.Tick(),requestAnimationFrame(v)}},92:function(t,s,e){"use strict";e.r(s),e.d(s,"default",(function(){return u}));var i=e(15),n=e(78),h=e(13);class r{constructor(t){t.h||t.s||t.v?(this.hsv=t,this.rgb=void 0):(this.rgb=t,this.hsv=void 0)}static rgb(t,s,e){return new r({r:t,g:s,b:e})}static hsv(t,s,e){return new r({h:t,s:s,v:e})}r(t){if(this.reqRgb(),void 0===t)return this.rgb.r;this.rgb.r=t,this.hsv=void 0}g(t){if(this.reqRgb(),void 0===t)return this.rgb.g;this.rgb.g=t,this.hsv=void 0}b(t){if(this.reqRgb(),void 0===t)return this.rgb.b;this.rgb.b=t,this.hsv=void 0}h(t){if(this.reqHsv(),void 0===t)return this.hsv.h;this.hsv.h=t,this.hsv=void 0}s(t){if(this.reqHsv(),void 0===t)return this.hsv.s;this.hsv.s=t,this.hsv=void 0}v(t){if(this.reqHsv(),void 0===t)return this.hsv.v;this.hsv.v=t,this.hsv=void 0}componentToRgb(t){const s=(t+6*this.hsv.h)%6;return this.hsv.v-this.hsv.v*this.hsv.s*Math.max(Math.min(s,4-s,1),0)}reqRgb(){void 0===this.rgb&&this.calcRgb()}calcRgb(){this.rgb={r:this.componentToRgb(5),g:this.componentToRgb(3),b:this.componentToRgb(1)}}reqHsv(){void 0===this.hsv&&this.calcHsv()}calcHsv(){const{r:t,g:s,b:e}=this.rgb,i=Math.max(t,s,e),n=Math.min(t,s,e);let h=i===n?0:i===t?(s-e)/(i-n):i===s?2+(e-t)/(i-n):4+(t-s)/(i-n);for(h/=6;h<0;)h++;this.hsv={h:h,s:i===n?0:(i-n)/i,v:i}}toString(){return this.reqRgb(),"rgb("+this.toByte(this.rgb.r)+", "+this.toByte(this.rgb.g)+", "+this.toByte(this.rgb.b)+")"}toByte(t){return Math.floor(255*t)}}var o=e(14);class a{constructor(t,s,e,i){this.Position=t,this.Velocity=s,this.Mass=e,this.Color=i}applyGravitation(t){let s=t.Position.subtract(this.Position);const e=3*(this.Mass+t.Mass),i=Math.max(1*s.lengthSq(),e*e);let n=s.normalize().multiply(t.Mass).multiply(80/i).multiply(1/this.Mass);this.Velocity=this.Velocity.add(n)}finishTick(){this.Position=this.Position.add(this.Velocity)}paint(t,s){t.save();const{x:e,y:i,depth:n}=s(this.Position),h=Math.max(Math.min(n,1),0);t.fillStyle=r.rgb(this.Color.r()*h,this.Color.g()*h,this.Color.b()*h).toString();let o=2*this.Mass*n;o=Math.min(Math.max(o,1),100),t.beginPath(),t.arc(e,i,o,0,2*Math.PI,!1),t.fill(),t.restore()}}let c=[];function l(t,s){return Math.random()*(s-t)+t}function u(){const t=document.getElementById("mainCanvas");Object(h.b)(t,800,800);for(let t=0;t<50;t++)c.push(new a(new n.a(l(-100,100),l(-100,100),l(-100,100)),new n.a(l(-.3,.3),l(-.3,.3),l(-.3,.3)),l(1,5),r.rgb(1,1,1)));c.push(new a(new n.a(0,0,0),new n.a(0,0,0),25,r.rgb(1,0,0))),function t(s){(function(t){t.fillStyle="black",t.fillRect(0,0,800,800);for(let t=0;t<c.length;t++)for(let s=0;s<c.length;s++)t!==s&&c[t].applyGravitation(c[s]);c.forEach(t=>{t.finishTick()}),c.sort((t,s)=>t.Position.z-s.Position.z),c.forEach(s=>{s.paint(t,v)})})(s),requestAnimationFrame(()=>t(s))}(t.getContext("2d"))}const d=new i.c(0,Math.min(800,800)),f=new i.c(-100,100);function v(t){return{x:f.ConvertTo(t.x,d),y:f.ConvertTo(t.y,d),depth:f.ConvertTo(t.z,o.b)}}}}]);
//# sourceMappingURL=mandelbrot.bundle.js.map