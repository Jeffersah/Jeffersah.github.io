(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{107:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return M}));var s=r(0);class n{execute(t,e){let r=t.args[0].read(e);if("string"==typeof r)return r;let s=t.args[1].read(e);if("string"==typeof s)return s;const n=this.calc(r,s);return t.silent||e.cpu.flags.set(n),(3===t.args.length?t.args[2]:t.args[1]).write(n,e)}verify(t,e){return 2===t.args.length?i(t,"read","rw"):3===t.args.length?i(t,"read","read","write"):"Expected Exactly 2 or 3 arguments."}}function i(t,...e){if(e.length!==t.args.length)return`Expected exactly ${e.length} argument(s)`;for(let r=0;r<e.length;r++)switch(e[r]){case"read":if(!t.args[r].IsReadable())return`Argument ${r} is not readable`;break;case"write":if(!t.args[r].IsWriteable())return`Argument ${r} is not writeable`;break;case"rw":if(!t.args[r].IsReadable())return`Argument ${r} is not readable`;if(!t.args[r].IsWriteable())return`Argument ${r} is not writeable`;break;case"jump":if(!t.args[r].IsJumpable())return`Argument ${r} is not a valid jump target`}}var a=[new class{constructor(){this.name="mov"}execute(t,e){let r=t.args[0].read(e);return"string"==typeof r?r:(t.silent||e.cpu.flags.set(r),t.args[1].write(r,e))}verify(t,e){return i(t,"read","write")}},new class{constructor(){this.name="jmp"}execute(t,e){return e.cpu.tryJump(e,t.args[0])}verify(t,e){return t.silent?"JMP does not edit flags and cannot be silent":i(t,"jump")}},new class{constructor(){this.name="nop"}execute(t,e){}verify(t,e){return 0!==t.args.length?"NOP takes no arguments":t.silent?"NOP does not edit flags and cannot be silent":void 0}},new class{constructor(){this.name="tst"}execute(t,e){let r=t.args[0].read(e);if("string"==typeof r)return r;let s=t.args[1].read(e);if("string"==typeof s)return s;e.cpu.flags.set(r-s)}verify(t,e){return t.silent?"TST is only used to edit flags, and so cannot be silenced. Use a NOP instead.":1===t.args.length?i(t,"read"):2===t.args.length?i(t,"read","read"):"Expected 1 or 2 args"}},new class extends n{constructor(){super(...arguments),this.name="add"}calc(t,e){return t+e}},new class extends n{constructor(){super(...arguments),this.name="sub"}calc(t,e){return t-e}},new class extends n{constructor(){super(...arguments),this.name="mul"}calc(t,e){return t*e}},new class extends n{constructor(){super(...arguments),this.name="div"}calc(t,e){return t/e}},new class extends n{constructor(){super(...arguments),this.name="and"}calc(t,e){return t&e}},new class extends n{constructor(){super(...arguments),this.name="bor"}calc(t,e){return t|e}},new class extends n{constructor(){super(...arguments),this.name="xor"}calc(t,e){return t^e}},new class{constructor(){this.name="hlt"}execute(t,e){e.cpu.isHalted=!0}verify(t,e){return 0!==t.args.length?"HLT takes no arguments":t.silent?"HLT does not edit flags and cannot be silent":void 0}}];function o(t){return"string"==typeof t.name?[t.name]:t.name}class u{constructor(t,e,r){this.cpu=t,this.level=e,this.testCase=r,this.allInstructions=u.GetAllInstructions(e),this.cpu.reset()}tick(){return this.cpu.tick(this.allInstructions,this)}static GetAllInstructions(t){const e={};for(const t of a)for(const r of o(t))e[r]=t;for(const r of t.components)for(const t of r.getExtraInstructions())for(const r of o(t))e[r]=t;return e}}var l=r(96);class c{static isToken(t){return void 0!==t.value||void 0!==t.type}static isBranch(t){return void 0!==t.children}static treeReduce(t,e,r){if(this.isToken(t))return e(t);if(this.isBranch(t)){var s=t.children.map(t=>this.treeReduce(t,e,r));return r(t,s)}throw"Unknown tree item type?"}}var h,d=r(95),p=r(97);class g{constructor(t){this.register=t}jumpTarget(t){return t.cpu.getRegisterValue(this.register,t)}IsReadable(){return!0}IsWriteable(){return!0}IsJumpable(){return!0}write(t,e){return e.cpu.setRegisterValue(t,this.register,e)}read(t){return t.cpu.getRegisterValue(this.register,t)}argType(){return h.Register}verify(t){if(-1===t.registers.indexOf(this.register)&&-1===t.extRegisters.indexOf(this.register))return"Unrecognized register "+this.register}}class f{constructor(t,e,r){this.baseRegister=t,this.offsetRegister=e,this.offset=r}IsReadable(){return!0}IsWriteable(){return!0}IsJumpable(){return!1}write(t,e){throw new Error("Method not implemented.")}read(t){throw new Error("Method not implemented.")}argType(){return h.Indexed}verify(t){return void 0!==this.baseRegister&&-1===t.registers.indexOf(this.baseRegister)&&-1===t.extRegisters.indexOf(this.baseRegister)?"Unrecognized register "+this.baseRegister:void 0!==this.offsetRegister&&-1===t.registers.indexOf(this.offsetRegister)&&-1===t.extRegisters.indexOf(this.offsetRegister)?"Unrecognized register "+this.offsetRegister:void 0}}class m{constructor(t){this.value=t}IsReadable(){return!0}IsWriteable(){return!1}IsJumpable(){return!0}read(t){return this.value}jumpTarget(t){return this.value}argType(){return h.Numerical}verify(t){}}!function(t){t[t.Register=0]="Register",t[t.Indexed=1]="Indexed",t[t.Numerical=2]="Numerical"}(h||(h={}));var v="\nroot -> {instrs} $$\n\ninstrs -> {instrs} {lbl_instr}\ninstrs -> {lbl_instr}\n\nlbl_instr -> {instr}\nlbl_instr -> {lbl}\n\n# Need optsemi for comments\nlbl -> <string> : {optsemi}\n\ninstr -> <string> {optsemi}\ninstr -> <string> . {flags} {optsemi}\ninstr -> <string> {arglist} {optsemi}\ninstr -> <string> . {flags} {arglist} {optsemi}\n\noptsemi -> \noptsemi -> ;\n\nflags -> <string>\n\narglist -> {arglist} , {arg}\narglist -> {arg}\n\narg -> {arith}\narg -> @ {arith}\narg -> <string> [ {arith} ]\narg -> <string> [ <string> , {arith} ]\n\narith -> {arith} + {multiplication}\narith -> {arith} - {multiplication}\narith -> {multiplication}\n\nmultiplication -> {multiplication} * {value}\nmultiplication -> {multiplication} / {value}\nmultiplication -> {value}\n\nvalue -> <string>\nvalue -> <number>\nvalue -> ( {arith} )\nvalue -> - {value}\n";class k{constructor(t,e,r,s,n){this.instruction=t,this.silent=e,this.reqFlags=r,this.args=s,this.firstToken=n}}class y{constructor(){const t=l.a.FromGrammarFile(v.split("\n"));this.parser=new d.a(t,"root"),this.tokenizer=new p.a}TryParse(t,e,r){let s=t.split("\n");for(let t=s.length-1;t>=0;t--){s[t]=s[t].trim();const e=s[t].indexOf(";");-1!==e&&(0===e?s.splice(t,1):s[t]=s[t].substr(0,e+1))}t=s.join("\n");const n=this.tokenizer.tokenize(t);if(0===n.length)return[];const i=this.parser.parse(n);if(!d.a.isSuccessfulResponse(i))return i;if(!c.isBranch(i))throw"This will never happen. I hope.";const a=this.getTreeInstructions(i);if(x(a))return a;const[o,u]=a,l=[];for(let t=0;t<o.length;t++){const r=this.parseInstruction(o[t],u,e);if(x(r))return r;l.push(r)}for(let t=0;t<l.length;t++){const s=l[t];if(void 0===r[s.instruction])return{badToken:s.firstToken,errorMessage:"Unrecognized instruction"};const n=r[s.instruction].verify(s,e);if(void 0!==n)return{badToken:s.firstToken,errorMessage:n};for(const t of s.args){const r=t.verify(e);if(void 0!==r)return{badToken:s.firstToken,errorMessage:"Argument error: "+r}}}return l}getTreeInstructions(t){let e=[],r={};const s=[];for(;"instrs"===t.production.name;)s.splice(0,0,t.children[t.children.length-1]),t=t.children[0];s.splice(0,0,t);for(const t of s)if("lbl"===t.children[0].production.name){const s=t.children[0].firstToken();if(void 0!==r[s.value])return{badToken:s,errorMessage:"Duplicate label"};r[s.value]=e.length}else e.push(t.children[0]);return[e,r]}parseInstruction(t,e,r){const s=t.firstToken().value;let n="",i=[];for(const s of t.children)if(c.isBranch(s))if("flags"===s.production.name)n=s.firstToken().value;else if("arglist"===s.production.name){const t=this.parseArgsRecurse(s,e,r);if(x(t))return t;i=t}return new k(s.substr(0,3),4===s.length&&"s"===s[3],n.split(""),i,t.firstToken())}parseArgsRecurse(t,e,r){const s=this.parseSingleArg(t.children[t.children.length-1],e,r);if(x(s))return s;if(1===t.children.length)return[s];const n=this.parseArgsRecurse(t.children[0],e,r);return x(n)||n.push(s),n}parseSingleArg(t,e,r){if(1===t.children.length){const s=this.parseArithOrRegister(t.children[0],e,r);return x(s)?s:"string"==typeof s?new g(s):new m(s)}if(2===t.children.length){const s=this.parseArithOrRegister(t.children[1],e,r);return x(s)?s:"string"==typeof s?new f(s,void 0,void 0):new f(void 0,void 0,s)}if(4===t.children.length){var s=t.children[0].firstToken().value;const n=this.parseArithOrRegister(t.children[2],e,r);return x(n)?n:"string"==typeof n?new f(s,n,void 0):new f(s,void 0,n)}{s=t.children[0].firstToken().value;var n=t.children[2].firstToken().value;const i=this.parseArith(t.children[4],e,r);return x(i)?i:new f(s,n,i)}}parseArithOrRegister(t,e,r){const s=t.allTokens();if(1===s.length){const t=s[0].value;if(-1!==r.registers.indexOf(t)||-1!==r.extRegisters.indexOf(t))return t}return this.parseArith(t,e,r)}parseArith(t,e,r){if(1===t.children.length)return this.parseMult(t.children[0],e,r);const s=this.parseArith(t.children[0],e,r),n=this.parseMult(t.children[2],e,r);return x(s)?s:x(n)?n:"+"===t.children[1].firstToken().value?s+n:s-n}parseMult(t,e,r){if(1===t.children.length)return this.parseValue(t.children[0],e,r);const s=this.parseMult(t.children[0],e,r),n=this.parseValue(t.children[2],e,r);return x(s)?s:x(n)?n:"*"===t.children[1].firstToken().value?s*n:s/n}parseValue(t,e,r){if(1===t.children.length){const r=t.firstToken();if("number"===r.type)return parseInt(r.value);{const t=r.value;return void 0===e[t]?{badToken:r,errorMessage:"Unrecognized label "+t}:e[t]}}if(2===t.children.length){const s=this.parseValue(t.children[1],e,r);return x(s)?s:-s}return this.parseArith(t.children[1],e,r)}}function x(t){return void 0!==t.badToken&&void 0!==t.errorMessage}function w(t){let e="";if(void 0!==(r=t.parseResult).badToken&&void 0!==r.expected)e=`Parse Failure: [${t.parseResult.badToken.lineNumber}:${t.parseResult.badToken.colNumber}]`;else{if(!x(t.parseResult))return s.createElement(s.Fragment,null);e=`Syntax Error: [${t.parseResult.badToken.lineNumber}:${t.parseResult.badToken.colNumber}] ${t.parseResult.errorMessage}`}var r;return s.createElement("div",{style:{position:"absolute",bottom:0,width:"100%",border:"1px solid black",background:"#833"}},e)}function b(t){const[e,r]=s.useState("; "+t.level.name.toUpperCase()),[n,i]=s.useState([]),a=new y;return s.useEffect(()=>{const r=a.TryParse(e,t.level,u.GetAllInstructions(t.level));console.log(r),i(r)},[e]),s.createElement("div",{className:"fill"},s.createElement("div",{style:{position:"absolute",height:"100%",width:"50%",border:"1px solid black"}},s.createElement("div",{className:"flex row"},s.createElement("button",{onClick:()=>t.closeLevel()},"Quit"),s.createElement("button",{style:{float:"right"}},"Run"),s.createElement("button",{style:{float:"right"}},"Step")),s.createElement("div",{style:{position:"absolute",left:0,bottom:0,right:0,top:"20px"}},s.createElement("textarea",{style:{height:"100%",width:"100%",resize:"vertical"},value:e,onChange:t=>r(t.target.value)})),s.createElement(w,{parseResult:n})),s.createElement("div",{style:{position:"absolute",height:"100%",width:"50%",left:"50%",top:0,border:"1px solid gray",overflowY:"scroll"}}))}var T,S=r(74);class R{constructor(t){this.maxSize=t,this.renderSize=new S.a(0,0),this.data=[]}getExtraInstructions(){return[]}reset(){this.data=[]}read(t){return void 0===this.data[t]?0:this.data[t]}write(t,e){this.data[t]=e}tick(){}animTick(){}draw(t){}}!function(t){t[t.Pass=0]="Pass",t[t.Fail=1]="Fail"}(T||(T={}));class I{constructor(t){this.numDisks=t,this.disks=[];const e=[];for(let r=t-1;r>=0;r--)e.push(r);this.disks.push(e),this.disks.push([]),this.disks.push([]),this.armLocation=0,this.armDisk=void 0}getResult(){return 0===this.disks[0].length&&0===this.disks[1].length&&void 0===this.armDisk?T.Pass:T.Fail}extRead(t){switch(t){case"arm":return this.armLocation;case"grab":return void 0===this.armDisk?0:this.armDisk+1;default:return"Unrecognized Register"}}extWrite(t,e){switch(t){case"arm":return e<0||e>=3?"Arm moved out of range!":void(this.armLocation=e);case"grab":if(e<=0){if(void 0===this.armDisk)return;const t=this.armDisk;this.armDisk=void 0;const e=this.disks[this.armLocation];if(0===e.length)e.push(t);else if(e.push(t),e[e.length-1]>e[e.length-2])return T.Fail}else{if(void 0!==this.armDisk)return;0!==this.disks[this.armLocation].length&&(this.armDisk=this.disks[this.armLocation].pop())}default:return"Unrecognized Register"}}tick(){}animTick(){}draw(t){}destroy(){}}var P=[new class{constructor(){this.components=[new R(128)],this.name="Hanoi",this.registers=["a","b","x","y","sp","fp"],this.extRegisters=["arm","grab"],this.hasRenderPane=!0,this.numTestCases=5,this.animFramesPerTick=3}initTestCase(t,e){return new I(t+1)}}];function A(t){return s.createElement("ol",null,P.map(e=>s.createElement("li",{key:e.name},s.createElement("button",{onClick:()=>t.onSelect(e)},e.name))))}function M(){const[t,e]=s.useState(void 0);return void 0===t?s.createElement(A,{onSelect:e}):s.createElement(b,{level:t,closeLevel:()=>e(void 0)})}},74:function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));class s{constructor(t,e){this.x=t,this.y=e}static zero(){return new s(0,0)}static fromAngle(t,e){return new s(Math.cos(t)*(null!=e?e:1),Math.sin(t)*(null!=e?e:1))}LengthSq(){return s.Dot(this,this)}Length(){return Math.sqrt(this.LengthSq())}Clone(){return new s(this.x,this.y)}Negate(){return new s(-this.x,-this.y)}NegateInPlace(){return this.x=-this.x,this.y=-this.y,this}static Dot(t,e){return t.x*e.x+t.y*e.y}DotWith(t){return s.Dot(this,t)}normalize(){let t=this.Length();return s.Multiply(this,1/t)}Direction(){return Math.atan2(this.y,this.x)}AddWith(t,e){const{x:r,y:s}=n(t,e);return this.x+=r,this.y+=s,this}MultWith(t,e){const{x:r,y:s}=function(t,e){if(void 0===e)return void 0!==t.x?{x:t.x,y:t.y}:{x:t,y:t};return{x:t,y:e}}(t,e);return this.x*=r,this.y*=s,this}SubtractWith(t,e){const{x:r,y:s}=n(t,e);return this.x-=r,this.y-=s,this}DivideWith(t,e){const{x:r,y:s}=n(t,e);return this.x/=r,this.y/=s,this}Equals(t){return this.x===t.x&&this.y===t.y}static add(t,e,r){const{x:i,y:a}=n(e,r);return new s(t.x+i,t.y+a)}static subtract(t,e,r){const{x:i,y:a}=n(e,r);return new s(t.x-i,t.y-a)}static Multiply(t,e,r){return void 0!==r?new s(t.x*e,t.y*r):void 0!==e.x?new s(t.x*e.x,t.y*e.y):new s(t.x*e,t.y*e)}static interpolate(t,e,r){return new s(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)}static componentMin(t,e){return t.x<=e.x&&t.y<=e.y?t:e.x<=t.x&&e.y<=t.y?e:new s(Math.min(t.x,e.x),Math.min(t.y,e.y))}static componentMax(t,e){return t.x>=e.x&&t.y>=e.y?t:e.x>=t.x&&e.y>=t.y?e:new s(Math.max(t.x,e.x),Math.max(t.y,e.y))}static Bezier(t,e){return 1===t.length?t[0]:2===t.length?s.add(s.Multiply(t[1],e),s.Multiply(t[0],1-e)):s.add(s.Multiply(s.Bezier(t.slice(1),e),e),s.Multiply(s.Bezier(t.slice(0,t.length-1),e),1-e))}rotate(t){const e=Math.atan2(this.y,this.x),r=this.Length();return s.fromAngle(e+t,r)}}function n(t,e){return void 0===e?{x:t.x,y:t.y}:{x:t,y:e}}},75:function(t,e,r){"use strict";var s;!function(t){t[t.production=0]="production",t[t.tokenType=1]="tokenType",t[t.literal=2]="literal",t[t.endOfInput=3]="endOfInput"}(s||(s={})),e.a=s},83:function(t,e,r){"use strict";r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return i}));var s=r(75);class n{constructor(t,e,r,s){this.value=t,this.type=e,this.lineNumber=r,this.colNumber=s}firstToken(){return this}allTokens(){return[this]}matches(t){switch(t.type){case s.a.literal:return t.value===this.value;case s.a.tokenType:return t.value===this.type;default:return!1}}toString(){return this.value}}class i{matches(t){return t.type===s.a.endOfInput}firstToken(){return new n("$$","endOfString",-1,-1)}allTokens(){return[this.firstToken()]}toString(){return"$$"}}},95:function(t,e,r){"use strict";r.d(e,"a",(function(){return h}));var s=r(83);class n{constructor(t){this.parsedStack=[],this.stateStack=[0],this.inputStack=[new s.a];for(let e=t.length-1;e>=0;e--)this.inputStack.push(t[e])}toString(){let t="Parsed: \r\n\t(0)";for(let e=0;e<this.parsedStack.length;e++)t+=` ${this.parsedStack[e].toString()} (${this.stateStack[e+1]})`;t+="\r\nInput: \r\n\t";for(let e=0;e<this.inputStack.length&&e<10;e++){const r=this.inputStack.length-1-e;t+=" "+this.inputStack[r].toString()}return this.inputStack.length>10&&(t+=" ..."),t}}class i{constructor(t){this.data=[],this.dataStart=0,this.dataLength=0,void 0!==t&&(this.data=[...t],this.dataStart=0,this.dataLength=t.length)}push(t){this.dataLength===this.data.length?0===this.dataStart?(this.data.push(t),this.dataLength++):(this.data=[...this.data,t],this.dataStart=0,this.dataLength++):(this.data[this.normalizeIndex(this.dataLength)]=t,this.dataLength++)}peek(){if(0===this.dataLength)throw new Error("Queue empty");return this.data[this.dataStart]}pop(){if(0===this.dataLength)throw new Error("Queue empty");const t=this.data[this.dataStart];return this.dataStart=this.normalizeIndex(1),this.dataLength--,t}length(){return this.dataLength}peekIndex(t){if(t<0||t>=this.dataLength)throw new Error("Out of range");return this.data[this.normalizeIndex(t)]}normalizeIndex(t){return(t+this.dataStart)%this.data.length}}var a=r(75);class o{constructor(t,e){this.states=new Set;let r=new i(t),s=new Set;for(;r.length()>0;){const t=r.pop();if(!this.states.has(t)&&(this.states.add(t),!t.isFinished())){var n=t.nextPattern();if(n.type===a.a.production&&!s.has(n.value)){s.add(n.value);for(const t of e.get(n.value))r.push(t.firstState)}}}}equals(t){if(this.states.size!==t.states.size)return!1;for(const e of this.states)if(!t.states.has(e))return!1;return!0}toString(){let t="";for(const e of this.states)t+=e.toString()+"\r\n";return t}}var u=r(11);class l{constructor(t,e){this.production=t,this.children=e}firstToken(){return this.children[0].firstToken()}allTokens(){let t=this.children[0].allTokens();for(let e=1;e<this.children.length;e++)t=[...t,...this.children[e].allTokens()];return t}matches(t){return t.type===a.a.production&&t.value===this.production.name}toString(){return"{"+this.production.name+"}"}}class c{constructor(t,e,r){this.id=t,this.key=e,this.owner=r,this.continuations=new Map,this.completedProduction=void 0}generateContinuations(){const t=[...this.key.states].filter(t=>!t.isFinished()),e=[...this.key.states].filter(t=>t.isFinished());if(e.length>1)return!1;1===e.length&&(this.completedProduction=e[0]);const r=Object(u.b)(t,t=>t.nextPattern(),(t,e)=>t.equals(e));for(const[t,e]of r){const r=new o(e.map(t=>t.nextState),this.owner.productions.allProductions);let s=this.owner.getOrCreate(r);if(void 0===s)return!1;this.continuations.set(t,s)}return!0}tryStep(t){const e=t.inputStack[t.inputStack.length-1],r=Array.from(this.continuations.entries()).filter(t=>e.matches(t[0]));if(1===r.length)return t.parsedStack.push(t.inputStack.pop()),t.stateStack.push(r[0][1].id),!0;if(r.length>1)return r.sort(([t],[e])=>t.priorityCompare(e)),console.log(r),t.parsedStack.push(t.inputStack.pop()),t.stateStack.push(r[0][1].id),!0;if(void 0!==this.completedProduction){const e=new Array(this.completedProduction.production.patterns.length);for(let r=this.completedProduction.production.patterns.length-1;r>=0;r--)e[r]=t.parsedStack.pop(),t.stateStack.pop();return t.inputStack.push(new l(this.completedProduction.production,e)),!0}return!1}}class h{constructor(t,e){this.productions=t,this.states=[],this.isValid=!0,this.states[0]=this.getOrCreate(new o(t.allProductions.get(e).map(t=>t.firstState),t.allProductions))}getOrCreate(t){for(const e of this.states)if(e.key.equals(t))return e;const e=new c(this.states.length,t,this);return this.states.push(e),e.generateContinuations()?e:(this.isValid&&(this.invalidStateKey=t),this.isValid=!1,void this.states.pop())}createParseState(t){return new n(t)}step(t){const e=this.states[t.stateStack[t.stateStack.length-1]];return e.tryStep(t)?0===t.inputStack.length?t.parsedStack[0]:t:{badToken:t.inputStack[t.inputStack.length-1].firstToken(),expected:Array.from(e.continuations.keys())}}parse(t){let e=this.createParseState(t);for(;;){const t=this.step(e);if(!this.isParserState(t))return t;e=t}}isParserState(t){return void 0!==t.inputStack}static isSuccessfulResponse(t){return void 0===t.badToken}}},96:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var s=r(75);class n{constructor(t,e){this.production=t,this.index=e,this.isFinished()?this.nextState=void 0:this.nextState=new n(t,e+1)}isFinished(){return this.production.patterns.length===this.index}nextPattern(){return this.production.patterns[this.index]}equals(t){return this.production===t.production&&this.index===t.index}toString(){let t="";t+=this.production.name+" -> ";for(let e=0;e<this.production.patterns.length;e++)e===this.index&&(t+=" @"),t+=" "+this.production.patterns[e];return this.index===this.production.patterns.length&&(t+=" @"),t}}class i{constructor(t,e){this.value=t,this.type=e}static Literal(t){return new i(t,s.a.literal)}static TokenType(t){return new i(t,s.a.tokenType)}static Production(t){return new i(t,s.a.production)}static EndOfInput(){return new i("$$",s.a.endOfInput)}equals(t){return this.value===t.value&&this.type===t.type}priorityCompare(t){return t.type-this.type}toString(){switch(this.type){case s.a.literal:return this.value;case s.a.endOfInput:return"$$";case s.a.tokenType:return"<"+this.value+">";case s.a.production:return"{"+this.value+"}"}}}class a{constructor(t,e){this.name=t,this.patterns=e,this.firstState=new n(this,0)}static FromString(t){let e=t.indexOf("->"),r=t.substr(0,e).trim(),s=t.substr(e+2).split(" ").map(t=>t.trim()).filter(t=>""!==t);return new a(r,s.map(this.PatternFromString))}static PatternFromString(t){return t.startsWith("{")&&t.endsWith("}")?new i(t.substr(1,t.length-2),s.a.production):t.startsWith("<")&&t.endsWith(">")?new i(t.substr(1,t.length-2),s.a.tokenType):"$$"===t?new i("$$",s.a.endOfInput):new i(t,s.a.literal)}}class o{constructor(t){this.allProductions=new Map;for(const e of t)this.allProductions.has(e.name)?this.allProductions.get(e.name).push(e):this.allProductions.set(e.name,[e])}static FromGrammarFile(t){const e=[];for(const r of t){const t=r.indexOf("#"),s=r.substr(0,-1===t?r.length:t).trim();0!==s.length&&e.push(a.FromString(s))}return new o(e)}}},97:function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var s,n=r(11),i=r(83);!function(t){t[t.push=0]="push",t[t.sendAndDiscard=1]="sendAndDiscard",t[t.newToken=2]="newToken",t[t.individualToken=3]="individualToken"}(s||(s={}));class a extends class extends class{constructor(){}tokenize(t){let e="",r=void 0;const n=[];let a=0,o=0,u=0,l=0,c=()=>{void 0!==r&&this.validateToken(e,r)&&n.push(new i.b(e,this.getTokenType(e,r),u,l)),e="",r=void 0,u=a,l=o};for(const n of t){const t=this.handleChar(n,e,r);switch(t){case s.push:e+=n;break;case s.sendAndDiscard:c();break;default:switch(t.op){case s.push:e+=n,r=t.state;break;case s.sendAndDiscard:r=t.state,c();break;case s.newToken:c(),e=n,r=t.state;break;case s.individualToken:c(),e=n,r=t.state,c()}}"\n"===n?(a++,o=0):o++}return c(),n}validateToken(t,e){return!0}}{constructor(){super(),this.characterClasses=[]}addCharacterClass(t,e,r,s){this.characterClasses.push({chars:t,tokenType:e,single:r,discard:s})}handleChar(t,e,r){const i=this.characterClasses.filter(e=>-1!==e.chars.indexOf(t));if(0===i.length)return s.sendAndDiscard;if(Object(n.a)(i,t=>{var e;return null!==(e=t.discard)&&void 0!==e&&e}))return s.sendAndDiscard;const a=i.filter(t=>{var e;return!1===(null!==(e=t.single)&&void 0!==e&&e)}).filter(t=>void 0===r||-1!==r.indexOf(t.tokenType));if(0!==a.length)return{op:s.push,state:a.map(t=>t.tokenType)};const o=i.filter(t=>t.single);return o.length>0?{op:s.individualToken,state:o.map(t=>t.tokenType)}:{op:s.newToken,state:i.map(t=>t.tokenType)}}getTokenType(t,e){return e[0]}validateToken(t,e){return t.length>0&&e.length>0}}{constructor(){super(),this.addCharacterClass("0123456789","number"),this.addCharacterClass("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_0123456789","string"),this.addCharacterClass(".:;'\"`!@#$%^&*()+-=[]{}\\~/?<>,","op",!0)}}}}]);
//# sourceMappingURL=11.bundle.js.map