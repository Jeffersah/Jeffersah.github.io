{"version":3,"file":"227.bundle.js","mappings":";4FAAA,OAOC,WACA,aAEA,IAAIA,EAAS,GAAGC,eAEhB,SAASC,IAGR,IAFA,IAAIC,EAAU,GAELC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAC1C,IAAIG,EAAMF,UAAUD,GACpB,GAAKG,EAAL,CAEA,IAAIC,SAAiBD,EAErB,GAAgB,WAAZC,GAAoC,WAAZA,EAC3BL,EAAQM,KAAKF,QACP,GAAIG,MAAMC,QAAQJ,IAAQA,EAAID,OAAQ,CAC5C,IAAIM,EAAQV,EAAWW,MAAM,KAAMN,GAC/BK,GACHT,EAAQM,KAAKG,QAER,GAAgB,WAAZJ,EACV,IAAK,IAAIM,KAAOP,EACXP,EAAOe,KAAKR,EAAKO,IAAQP,EAAIO,IAChCX,EAAQM,KAAKK,IAMjB,OAAOX,EAAQa,KAAK,KAGgBC,EAAOC,SAC3ChB,EAAWiB,QAAUjB,EACrBe,EAAOC,QAAUhB,QAKhB,KAFwB,EAAF,WACtB,OAAOA,GACP,QAFoB,OAEpB,aAxCH,gCCFAgB,EAAA,OAAqB,EAErB,IAIgCE,EAJ5BC,EAQJ,SAAiCD,GAAO,GAAIA,GAAOA,EAAIE,WAAc,OAAOF,EAAO,GAAY,OAARA,GAAiC,WAAjBG,EAAQH,IAAoC,mBAARA,EAAsB,MAAO,CAAE,QAAWA,GAAS,IAAII,EAAQC,IAA4B,GAAID,GAASA,EAAME,IAAIN,GAAQ,OAAOI,EAAMG,IAAIP,GAAQ,IAAIQ,EAAS,GAAQC,EAAwBC,OAAOC,gBAAkBD,OAAOE,yBAA0B,IAAK,IAAIlB,KAAOM,EAAO,GAAIU,OAAOG,UAAUhC,eAAec,KAAKK,EAAKN,GAAM,CAAE,IAAIoB,EAAOL,EAAwBC,OAAOE,yBAAyBZ,EAAKN,GAAO,KAAUoB,IAASA,EAAKP,KAAOO,EAAKC,KAAQL,OAAOC,eAAeH,EAAQd,EAAKoB,GAAgBN,EAAOd,GAAOM,EAAIN,GAA4E,OAAhEc,EAAgB,QAAIR,EAASI,GAASA,EAAMW,IAAIf,EAAKQ,GAAkBA,EARxtBQ,CAAwB,EAAQ,OAEzCC,GAE4BjB,EAFS,EAAQ,QAEIA,EAAIE,WAAaF,EAAM,CAAE,QAAWA,GAEzF,SAASK,IAA6B,GAAuB,mBAAZa,QAAwB,OAAO,KAAM,IAAId,EAAQ,IAAIc,QAA6F,OAAlFb,EAA2B,WAAsC,OAAOD,GAAiBA,EAI1M,SAASD,EAAQH,GAAwT,OAAtOG,EAArD,mBAAXgB,QAAoD,iBAApBA,OAAOC,SAAmC,SAAiBpB,GAAO,cAAcA,GAA2B,SAAiBA,GAAO,OAAOA,GAAyB,mBAAXmB,QAAyBnB,EAAIqB,cAAgBF,QAAUnB,IAAQmB,OAAON,UAAY,gBAAkBb,GAAiBG,EAAQH,GAExV,SAASsB,EAAgBtB,EAAKN,EAAK6B,GAAiK,OAApJ7B,KAAOM,EAAOU,OAAOC,eAAeX,EAAKN,EAAK,CAAE6B,MAAOA,EAAOC,YAAY,EAAMC,cAAc,EAAMC,UAAU,IAAkB1B,EAAIN,GAAO6B,EAAgBvB,EAI3M,SAAS2B,EAAkBC,EAAQC,GAAS,IAAK,IAAI7C,EAAI,EAAGA,EAAI6C,EAAM3C,OAAQF,IAAK,CAAE,IAAI8C,EAAaD,EAAM7C,GAAI8C,EAAWN,WAAaM,EAAWN,aAAc,EAAOM,EAAWL,cAAe,EAAU,UAAWK,IAAYA,EAAWJ,UAAW,GAAMhB,OAAOC,eAAeiB,EAAQE,EAAWpC,IAAKoC,IAM7S,SAASC,EAAgBC,GAAwJ,OAAnJD,EAAkBrB,OAAOuB,eAAiBvB,OAAOwB,eAAiB,SAAyBF,GAAK,OAAOA,EAAEG,WAAazB,OAAOwB,eAAeF,IAAcD,EAAgBC,GAExM,SAASI,EAAuBC,GAAQ,QAAa,IAATA,EAAmB,MAAM,IAAIC,eAAe,6DAAgE,OAAOD,EAI/J,SAASE,EAAgBP,EAAGQ,GAA+G,OAA1GD,EAAkB7B,OAAOuB,gBAAkB,SAAyBD,EAAGQ,GAAsB,OAAjBR,EAAEG,UAAYK,EAAUR,GAAaO,EAAgBP,EAAGQ,GAErK,IAAIC,EAA6B,YAE7BC,EAEJ,SAAUC,GAGR,SAASD,EAASb,GAChB,IAAIe,EAgBJ,OAxCJ,SAAyBC,EAAUC,GAAe,KAAMD,aAAoBC,GAAgB,MAAM,IAAIC,UAAU,qCA0B5GC,CAAgBC,KAAMP,IAEtBE,EAtBJ,SAAoCP,EAAM1C,GAAQ,OAAIA,GAA2B,WAAlBQ,EAAQR,IAAsC,mBAATA,EAA8CyC,EAAuBC,GAAtC1C,EAsBvHuD,CAA2BD,KAAMlB,EAAgBW,GAAU/C,KAAKsD,KAAMpB,KACxEsB,MAAQ,CACZC,SAAUR,EAAMS,WAAWxB,EAAMN,MAAOM,EAAMyB,UAAY,CACxDC,WAAoC,IAAtB1B,EAAM2B,YAA8Bf,EAA6BZ,EAAM2B,YACrFjC,MAAO,IAETkC,QAAQ,GAEVb,EAAMc,aAAc,EAAIzD,EAAO0D,aAC/Bf,EAAMgB,SAAU,EAChBhB,EAAMiB,oBAAsBjB,EAAMiB,oBAAoBC,KAAK1B,EAAuBQ,IAClFA,EAAMmB,gBAAkBnB,EAAMmB,gBAAgBD,KAAK1B,EAAuBQ,IACnEA,EApCX,IAAsBE,EAAakB,EA8PjC,OAtPF,SAAmBC,EAAUC,GAAc,GAA0B,mBAAfA,GAA4C,OAAfA,EAAuB,MAAM,IAAInB,UAAU,sDAAyDkB,EAASpD,UAAYH,OAAOyD,OAAOD,GAAcA,EAAWrD,UAAW,CAAEQ,YAAa,CAAEE,MAAO0C,EAAUvC,UAAU,EAAMD,cAAc,KAAeyC,GAAY3B,EAAgB0B,EAAUC,GASjXE,CAAU1B,EAAUC,GAjBAG,EAuCPJ,GAvCoBsB,EAuCV,CAAC,CACtBtE,IAAK,qBACL6B,MAAO,SAA4B8C,GACjC,GAAIpB,KAAKpB,MAAMN,QAAU8C,EAAU9C,MACjC,GAAI0B,KAAKpB,MAAMN,MAAO,CACpB,IAAI6B,EAAWH,KAAKI,WAAWJ,KAAKpB,MAAMN,MAAO0B,KAAKpB,MAAMyB,SAExDF,IAAaH,KAAKE,MAAMC,UAC1BH,KAAKqB,SAAS,CACZlB,SAAUA,SAIdH,KAAKqB,SAAS,CACZlB,SAAU,CACRG,WAAyC,IAA3BN,KAAKpB,MAAM2B,YAA8Bf,EAA6BQ,KAAKpB,MAAM2B,YAC/FjC,MAAO,QAMhB,CACD7B,IAAK,oBACL6B,MAAO,WACLgD,SAASC,iBAAiB,QAASvB,KAAKY,qBAAqB,GAC7DU,SAASC,iBAAiB,WAAYvB,KAAKY,qBAAqB,KAEjE,CACDnE,IAAK,uBACL6B,MAAO,WACL0B,KAAKW,SAAU,EACfW,SAASE,oBAAoB,QAASxB,KAAKY,qBAAqB,GAChEU,SAASE,oBAAoB,WAAYxB,KAAKY,qBAAqB,KAEpE,CACDnE,IAAK,kBACL6B,MAAO,SAAyBmD,GAC1BzB,KAAKpB,MAAM8C,SAAyC,mBAAvB1B,KAAKpB,MAAM8C,SAC1C1B,KAAKpB,MAAM8C,QAAQ1B,KAAKE,MAAMM,QAGb,cAAfiB,EAAME,MAAyC,IAAjBF,EAAMG,SACxCH,EAAMI,kBACNJ,EAAMK,iBAED9B,KAAKpB,MAAMmD,UACd/B,KAAKqB,SAAS,CACZb,QAASR,KAAKE,MAAMM,YAIzB,CACD/D,IAAK,aACL6B,MAAO,SAAoBA,EAAO+B,GAChC,IAAI2B,EAEJ,GAAqB,iBAAV1D,EACT,IAAK,IAAIvC,EAAI,EAAGkG,EAAM5B,EAAQpE,OAAQF,EAAIkG,EAAKlG,IAC7C,GAAwB,UAApBsE,EAAQtE,GAAG4F,KAAkB,CAC/B,IAAIO,EAAQ7B,EAAQtE,GAAGoG,MAAMC,QAAO,SAAUC,GAC5C,OAAOA,EAAK/D,QAAUA,KAGpB4D,EAAMjG,SACR+F,EAASE,EAAM,cAEoB,IAArB7B,EAAQtE,GAAGuC,OAAyB+B,EAAQtE,GAAGuC,QAAUA,IACzE0D,EAAS3B,EAAQtE,IAKvB,OAAOiG,GAAU1D,IAElB,CACD7B,IAAK,WACL6B,MAAO,SAAkBA,EAAOgC,GAC9B,IAAIgC,EAAW,CACbnC,SAAU,CACR7B,MAAOA,EACPgC,MAAOA,GAETE,QAAQ,GAEVR,KAAKc,gBAAgBwB,GACrBtC,KAAKqB,SAASiB,KAEf,CACD7F,IAAK,kBACL6B,MAAO,SAAyBgE,GAC1BA,EAASnC,WAAaH,KAAKE,MAAMC,UAAYH,KAAKpB,MAAM2D,UAC1DvC,KAAKpB,MAAM2D,SAASD,EAASnC,YAGhC,CACD1D,IAAK,eACL6B,MAAO,SAAsB0D,GAC3B,IAAIQ,EAEAlE,EAAQ0D,EAAO1D,WAEE,IAAVA,IACTA,EAAQ0D,EAAO1B,OAAS0B,GAG1B,IAAI1B,EAAQ0B,EAAO1B,OAAS0B,EAAO1D,OAAS0D,EACxCS,EAAanE,IAAU0B,KAAKE,MAAMC,SAAS7B,OAASA,IAAU0B,KAAKE,MAAMC,SACzErE,GAA0BuC,EAAfmE,EAAW,GAA8B,GAAGE,OAAO1C,KAAKpB,MAAM+D,cAAe,YAAY,GAAOtE,EAAgBmE,EAAUR,EAAOY,YAAaZ,EAAOY,WAAYvE,EAAgBmE,EAAU,cAAeC,GAAaD,GAClOK,GAAc,EAAI7E,EAAqB,SAAGlC,GAC9C,OAAOkB,EAAgB,QAAE8F,cAAc,MAAO,CAC5CrG,IAAK6B,EACLsE,UAAWC,EACXE,YAAa/C,KAAKgD,SAASnC,KAAKb,KAAM1B,EAAOgC,GAC7C2C,QAASjD,KAAKgD,SAASnC,KAAKb,KAAM1B,EAAOgC,GACzC4C,KAAM,SACN,gBAAiBT,EAAa,OAAS,SACtCnC,KAEJ,CACD7D,IAAK,YACL6B,MAAO,WACL,IAAI6E,EAASnD,KAEToD,EAAcpD,KAAKpB,MACnByB,EAAU+C,EAAY/C,QACtBsC,EAAgBS,EAAYT,cAC5BU,EAAMhD,EAAQiD,KAAI,SAAUtB,GAC9B,GAAoB,UAAhBA,EAAOL,KAAkB,CAC3B,IAAI4B,EAAavG,EAAgB,QAAE8F,cAAc,MAAO,CACtDF,UAAW,GAAGF,OAAOC,EAAe,WACnCX,EAAOwB,MAENC,EAAWzB,EAAOG,MAAMmB,KAAI,SAAUjB,GACxC,OAAOc,EAAOO,aAAarB,MAG7B,OAAOrF,EAAgB,QAAE8F,cAAc,MAAO,CAC5CF,UAAW,GAAGF,OAAOC,EAAe,UACpClG,IAAKuF,EAAOwB,KACZN,KAAM,UACNS,SAAU,MACTJ,EAAYE,GAEf,OAAON,EAAOO,aAAa1B,MAG/B,OAAOqB,EAAIpH,OAASoH,EAAMrG,EAAgB,QAAE8F,cAAc,MAAO,CAC/DF,UAAW,GAAGF,OAAOC,EAAe,eACnC,sBAEJ,CACDlG,IAAK,sBACL6B,MAAO,SAA6BmD,GAC9BzB,KAAKW,UACFX,KAAKS,YAAYmD,QAAQC,SAASpC,EAAM9C,SACvCqB,KAAKE,MAAMM,QACbR,KAAKqB,SAAS,CACZb,QAAQ,OAMjB,CACD/D,IAAK,kBACL6B,MAAO,WACL,MAAsC,iBAAxB0B,KAAKE,MAAMC,UAAuD,KAA9BH,KAAKE,MAAMC,SAAS7B,QAEvE,CACD7B,IAAK,SACL6B,MAAO,WACL,IAAIwF,EAAaC,EAAcC,EAAcC,EAAcC,EAEvDC,EAAenE,KAAKpB,MACpB+D,EAAgBwB,EAAaxB,cAC7ByB,EAAmBD,EAAaC,iBAChCC,EAAuBF,EAAaE,qBACpCC,EAAgBH,EAAaG,cAC7BC,EAAiBJ,EAAaI,eAC9BC,EAAcL,EAAaK,YAC3BC,EAAYN,EAAaM,UACzB7B,EAAYuB,EAAavB,UACzB8B,EAAgB1E,KAAKpB,MAAMmD,SAAW,oBAAsB,GAC5D4C,EAAkD,iBAAxB3E,KAAKE,MAAMC,SAAwBH,KAAKE,MAAMC,SAAWH,KAAKE,MAAMC,SAASG,MACvGsE,GAAgB,EAAI5G,EAAqB,UAAsBK,EAAlByF,EAAc,GAAiC,GAAGpB,OAAOC,EAAe,UAAU,GAAOtE,EAAgByF,EAAalB,IAAaA,GAAYvE,EAAgByF,EAAa,UAAW9D,KAAKE,MAAMM,QAASsD,IACxPe,GAAe,EAAI7G,EAAqB,UAAuBK,EAAnB0F,EAAe,GAAkC,GAAGrB,OAAOC,EAAe,aAAa,GAAOtE,EAAgB0F,EAAcK,IAAoBA,GAAmB/F,EAAgB0F,EAAcW,IAAiBA,GAAgBX,IAC9Qe,GAAmB,EAAI9G,EAAqB,UAAuBK,EAAnB2F,EAAe,GAAkC,GAAGtB,OAAOC,EAAe,iBAAiB,GAAOtE,EAAgB2F,EAAcK,IAAwBA,GAAuBhG,EAAgB2F,EAAc,cAAehE,KAAK+E,mBAAoBf,IACrSgB,GAAY,EAAIhH,EAAqB,UAAuBK,EAAnB4F,EAAe,GAAkC,GAAGvB,OAAOC,EAAe,UAAU,GAAOtE,EAAgB4F,EAAcK,IAAiBA,GAAgBL,IACnMgB,GAAa,EAAIjH,EAAqB,UAAuBK,EAAnB6F,EAAe,GAAkC,GAAGxB,OAAOC,EAAe,WAAW,GAAOtE,EAAgB6F,EAAcK,IAAkBA,GAAiBL,IAEvM5F,EAAQtB,EAAgB,QAAE8F,cAAc,MAAO,CACjDF,UAAWkC,GACVH,GAECO,EAAOlF,KAAKE,MAAMM,OAASxD,EAAgB,QAAE8F,cAAc,MAAO,CACpEF,UAAWoC,EACX,gBAAiB,QAChBhF,KAAKmF,aAAe,KACvB,OAAOnI,EAAgB,QAAE8F,cAAc,MAAO,CAC5CsC,IAAKpF,KAAKS,YACVmC,UAAWgC,GACV5H,EAAgB,QAAE8F,cAAc,MAAO,CACxCF,UAAWiC,EACX9B,YAAa/C,KAAKqF,gBAAgBxE,KAAKb,MACvCsF,WAAYtF,KAAKqF,gBAAgBxE,KAAKb,MACtC,gBAAiB,WAChB1B,EAAOtB,EAAgB,QAAE8F,cAAc,MAAO,CAC/CF,UAAW,GAAGF,OAAOC,EAAe,mBACnC8B,GAAaD,EAAcxE,KAAKE,MAAMM,OAASiE,EAAYD,EAAcxH,EAAgB,QAAE8F,cAAc,OAAQ,CAClHF,UAAWqC,MACPC,QA1PkExG,EAAkBmB,EAAYjC,UAAWmD,GA8P9GtB,EA9OT,CA+OEzC,EAAOuI,WAET9F,EAAS+F,aAAe,CACtB7C,cAAe,YAEjB,IAAI8C,EAAWhG,EACf5C,EAAA,EAAqB4I,+BC9Rd,SAASC,EAAWC,EAA2BhE,EAAciE,GAChE,MAAMC,EAASF,EAAGG,aAAanE,GAM/B,OAJAgE,EAAGI,aAAaF,EAAQD,GAExBD,EAAGK,cAAcH,GAEZF,EAAGM,mBAAmBJ,EAAQF,EAAGO,gBAO/BL,GANLM,QAAQC,MAAMR,GACdS,MAAM,mCAAoC1E,IAASgE,EAAGW,cAAgB,SAAW3E,IAASgE,EAAGY,gBAAkB,WAAa,eAAkBZ,EAAGa,iBAAiBX,SAClKF,EAAGc,aAAaZ,IAQf,SAASa,EAAkBf,EAA2BgB,EAA4BC,GACrF,MAAMC,EAAenB,EAAWC,EAAIA,EAAGW,cAAeK,GAChDG,EAAiBpB,EAAWC,EAAIA,EAAGY,gBAAiBK,GAIpDG,EAAgBpB,EAAGqB,gBAOzB,GANArB,EAAGsB,aAAaF,EAAeF,GAC/BlB,EAAGsB,aAAaF,EAAeD,GAC/BnB,EAAGuB,YAAYH,GAIVpB,EAAGwB,oBAAoBJ,EAAepB,EAAGyB,aAK9C,OAAOL,EAJLV,MAAM,4CAA8CV,EAAG0B,kBAAkBN,IAiDxE,SAASO,EAAmB3B,EAA2BE,EAAsB0B,EAA6BC,EAA+BC,EAA4CC,EAAoBC,EAAqEC,GACnRjC,EAAGkC,WAAW,EAAK,EAAK,EAAK,GAC7BlC,EAAGmC,WAAW,GACdnC,EAAGoC,OAAOpC,EAAGqC,YACbrC,EAAGsC,UAAUtC,EAAGuC,QAIhBvC,EAAGwC,MAAMxC,EAAGyC,iBAAmBzC,EAAG0C,kBAIlC,CACE,MAAM1G,EAAOgE,EAAG2C,MACVC,GAAY,EACZC,EAAS,EAETC,EAAS,EACf9C,EAAG+C,WAAW/C,EAAGgD,aAAcpB,GAC/B5B,EAAGiD,oBACGjD,EAAGkD,kBAAkBhD,EAAQ,mBAC7B2B,EACA7F,EACA4G,EACAC,EACAC,GACN9C,EAAGmD,wBACDnD,EAAGkD,kBAAkBhD,EAAQ,oBAKjCF,EAAGoD,WAAWlD,GACd,IAAI,IAAI9J,EAAI,EAAGA,EAAI2L,EAAY3L,IAAK,CAClC6L,EAAajC,EAAI5J,GACjB,IAAI,aAACiN,EAAY,YAAEC,GAAetB,EAAQ5L,GAC1C4J,EAAGuD,WACc,aAAfzB,EAA4B9B,EAAGwD,UAChB,aAAf1B,EAA4B9B,EAAGyD,eAC/BzD,EAAG0D,aAAcL,EAAcC,IAI9B,SAASK,EAAuB3D,EAA2BE,EAAsB0B,EAA6BK,GACjHjC,EAAGkC,WAAW,EAAK,EAAK,EAAK,GAC7BlC,EAAGmC,WAAW,GACdnC,EAAGoC,OAAOpC,EAAGqC,YACbrC,EAAGsC,UAAUtC,EAAGuC,QAIhBvC,EAAGwC,MAAMxC,EAAGyC,iBAAmBzC,EAAG0C,kBAIlC,CACE,MAAMkB,EAAgB,EAChB5H,EAAOgE,EAAG2C,MACVC,GAAY,EACZC,EAAS,EAETC,EAAS,EACf9C,EAAG+C,WAAW/C,EAAGgD,aAAcpB,GAC/B5B,EAAGiD,oBACGjD,EAAGkD,kBAAkBhD,EAAQ,mBAC7B0D,EACA5H,EACA4G,EACAC,EACAC,GACN9C,EAAGmD,wBACDnD,EAAGkD,kBAAkBhD,EAAQ,oBAKjCF,EAAGoD,WAAWlD,GACd+B,EAAajC,GACbA,EAAGuD,WAAWvD,EAAGyD,eAAgB,EAAG,GAGjC,SAASI,EAA6B7D,EAA2B8D,EAAeC,EAAcC,EAAgBC,GAEhH,MAAMrC,EAAiB5B,EAAGkE,eAI1BlE,EAAG+C,WAAW/C,EAAGgD,aAAcpB,GAE/B,MAAMuC,EAAIL,MAAAA,EAAAA,GAAS,EACbM,EAAIJ,MAAAA,EAAAA,EAAS,EACbK,EAAIN,MAAAA,EAAAA,GAAQ,EACZO,EAAIL,MAAAA,EAAAA,EAAU,EAGdM,EAAY,CACdD,EAAGF,EACHC,EAAGD,EACHE,EAAGH,EACHE,EAAGF,GAUP,OAJAnE,EAAGwE,WAAWxE,EAAGgD,aACH,IAAIyB,aAAaF,GACjBvE,EAAG0E,aAEV9C,EAGL,SAAS+C,EAAa3E,EAA2B4E,GACtD,MAAMhD,EAAiB5B,EAAGkE,eAQ1B,OANAlE,EAAG+C,WAAW/C,EAAGgD,aAAcpB,GAE/B5B,EAAGwE,WAAWxE,EAAGgD,aACH,IAAIyB,aAAaG,GACjB5E,EAAG0E,aAEV9C,yEAGF,MAAMiD,EAAsB,mJAOtBC,EAA4B,uMCpN1B,MAAMC,EAMjBtM,YAAmBuM,EAAkBC,GAAlB,KAAAD,EAAAA,EAAkB,KAAAC,EAAAA,EAJrCC,cACI,OAAO,IAAIH,EAAM,EAAE,GAOhBG,iBAAiBC,EAAeC,GACnC,OAAO,IAAIL,EAAMM,KAAKC,IAAIH,IAAUC,MAAAA,EAAAA,EAAY,GAAIC,KAAKE,IAAIJ,IAAUC,MAAAA,EAAAA,EAAY,IAGhFI,WACH,OAAOT,EAAMU,IAAIpL,KAAMA,MAGpBqL,SACH,OAAOL,KAAKM,KAAKtL,KAAKmL,YAGnBI,QACH,OAAO,IAAIb,EAAM1K,KAAK2K,EAAG3K,KAAK4K,GAG3BY,SACH,OAAO,IAAId,GAAO1K,KAAK2K,GAAI3K,KAAK4K,GAG7Ba,gBAGH,OAFAzL,KAAK2K,GAAK3K,KAAK2K,EACf3K,KAAK4K,GAAK5K,KAAK4K,EACR5K,KAGJ6K,WAAWa,EAAWC,GACzB,OAAOD,EAAGf,EAAIgB,EAAGhB,EAAIe,EAAGd,EAAIe,EAAGf,EAG5BgB,QAAQC,GACX,OAAOnB,EAAMU,IAAIpL,KAAM6L,GAGpBtD,YACH,IAAIuD,EAAM9L,KAAKqL,SACf,OAAOX,EAAMqB,SAAS/L,KAAM,EAAI8L,GAG7BE,YACH,OAAOhB,KAAKiB,MAAMjM,KAAK4K,EAAG5K,KAAK2K,GAG5BuB,WACH,OAAO,IAAIxB,EAAMM,KAAKmB,MAAMnM,KAAK2K,GAAIK,KAAKmB,MAAMnM,KAAK4K,IAKlDwB,QAAQP,EAAqBjB,GAChC,MAAOD,EAAG0B,EAAIzB,EAAG0B,GAAMC,EAAUV,EAAOjB,GAGxC,OAFA5K,KAAK2K,GAAK0B,EACVrM,KAAK4K,GAAK0B,EACHtM,KAMJwM,SAASX,EAAqBjB,GACjC,MAAOD,EAAG0B,EAAIzB,EAAG0B,GA4FzB,SAA2B3B,EAAiBC,GACxC,YAAS6B,IAAN7B,OAEuB6B,IAAlB9B,EAAYA,EACL,CAAEA,EAAWA,EAAGA,EAAGC,EAAWD,EAAGC,GAErC,CAAED,EAAGA,EAAaC,EAAGD,GAEzB,CAACA,EAAWA,EAAGC,EAAAA,GApGK8B,CAAkBb,EAAOjB,GAGhD,OAFA5K,KAAK2K,GAAK0B,EACVrM,KAAK4K,GAAK0B,EACHtM,KAKJ2M,aAAad,EAAqBjB,GACrC,MAAOD,EAAG0B,EAAIzB,EAAG0B,GAAMC,EAAUV,EAAOjB,GAGxC,OAFA5K,KAAK2K,GAAK0B,EACVrM,KAAK4K,GAAK0B,EACHtM,KAKJ4M,WAAWf,EAAqBjB,GACnC,MAAOD,EAAG0B,EAAIzB,EAAG0B,GAAMC,EAAUV,EAAOjB,GAGxC,OAFA5K,KAAK2K,GAAK0B,EACVrM,KAAK4K,GAAK0B,EACHtM,KAGJ6M,OAAOhB,GACV,OAAO7L,KAAK2K,IAAMkB,EAAMlB,GAAK3K,KAAK4K,IAAMiB,EAAMjB,EAMlDC,WAAWiC,EAAYjB,EAAqBjB,GACxC,MAAOD,EAAG0B,EAAIzB,EAAG0B,GAAMC,EAAUV,EAAOjB,GACxC,OAAO,IAAIF,EAAMoC,EAAInC,EAAI0B,EAAIS,EAAIlC,EAAI0B,GAKzCzB,gBAAgBiC,EAAYjB,EAAqBjB,GAC7C,MAAOD,EAAG0B,EAAIzB,EAAG0B,GAAMC,EAAUV,EAAOjB,GACxC,OAAO,IAAIF,EAAMoC,EAAInC,EAAI0B,EAAIS,EAAIlC,EAAI0B,GAKzCzB,gBAAgBkC,EAAU9C,EAAiB+C,GACvC,YAAWP,IAAPO,EACO,IAAItC,EAAMqC,EAAEpC,EAAKV,EAAc8C,EAAEnC,EAAIoC,QAEtBP,IAAhBxC,EAAUU,EACT,IAAID,EAAMqC,EAAEpC,EAAKV,EAAYU,EAAGoC,EAAEnC,EAAKX,EAAYW,GAEnD,IAAIF,EAAMqC,EAAEpC,EAAKV,EAAc8C,EAAEnC,EAAKX,GAIrDY,mBAAmBkC,EAAU9C,EAAU1K,GACnC,OAAO,IAAImL,EAAMqC,EAAEpC,GAAKV,EAAEU,EAAIoC,EAAEpC,GAAKpL,EAAGwN,EAAEnC,GAAKX,EAAEW,EAAImC,EAAEnC,GAAKrL,GAGhEsL,oBAAoBkC,EAAU9C,GAC1B,OAAG8C,EAAEpC,GAAKV,EAAEU,GAAKoC,EAAEnC,GAAKX,EAAEW,EAAUmC,EACjC9C,EAAEU,GAAKoC,EAAEpC,GAAKV,EAAEW,GAAKmC,EAAEnC,EAAUX,EAC7B,IAAIS,EAAMM,KAAKiC,IAAIF,EAAEpC,EAAGV,EAAEU,GAAIK,KAAKiC,IAAIF,EAAEnC,EAAGX,EAAEW,IAGzDC,oBAAoBkC,EAAU9C,GAC1B,OAAG8C,EAAEpC,GAAKV,EAAEU,GAAKoC,EAAEnC,GAAKX,EAAEW,EAAUmC,EACjC9C,EAAEU,GAAKoC,EAAEpC,GAAKV,EAAEW,GAAKmC,EAAEnC,EAAUX,EAC7B,IAAIS,EAAMM,KAAKkC,IAAIH,EAAEpC,EAAGV,EAAEU,GAAIK,KAAKkC,IAAIH,EAAEnC,EAAGX,EAAEW,IAGzDC,cAAcsC,EAAcnD,GACxB,OAAkB,IAAfmD,EAAIlR,OAAqBkR,EAAI,GACT,IAAfA,EAAIlR,OAAqByO,EAAM0C,IAAI1C,EAAMqB,SAASoB,EAAI,GAAInD,GAAIU,EAAMqB,SAASoB,EAAI,GAAI,EAAEnD,IACxFU,EAAM0C,IACT1C,EAAMqB,SAASrB,EAAM2C,OAAOF,EAAIG,MAAM,GAAItD,GAAIA,GAC9CU,EAAMqB,SAASrB,EAAM2C,OAAOF,EAAIG,MAAM,EAAGH,EAAIlR,OAAS,GAAI+N,GAAI,EAAEA,IAGxEuD,OAAOC,GACH,MAAM1C,EAAQE,KAAKiB,MAAMjM,KAAK4K,EAAG5K,KAAK2K,GAChCmB,EAAM9L,KAAKqL,SACjB,OAAOX,EAAM+C,UAAU3C,EAAQ0C,EAAO1B,IAI9C,SAASS,EAAU5B,EAAiBC,GAChC,YAAS6B,IAAN7B,EAAwB,CAAED,EAAWA,EAAGA,EAAGC,EAAWD,EAAGC,GACrD,CAACD,EAAWA,EAAGC,EAAAA,kDChJ1B,MACA,EADkB,IAblB,oBACI,KAAA8C,KAAO,OACP,KAAAC,eAAiB,uPCOrB,MACA,EADuB,IATvB,oBACI,KAAAD,KAAO,YACP,KAAAC,eAAiB,iICyBrB,MACA,EADiB,IA3BjB,oBACI,KAAAD,KAAO,MACP,KAAAC,eAAiB,0jBCUrB,MACA,EADiB,IAZjB,oBACI,KAAAD,KAAO,QACP,KAAAC,eAAiB,kOCDd,SAASC,EAAwBhP,GACpC,MAAMiP,EAAQjP,EAAMyB,QAAQiD,IAAI1E,EAAMkP,SACtC,OAAO,gBAAC,IAAQ,CAACzN,QAASwN,EAAOvP,MAAOM,EAAMkP,QAAQlP,EAAMN,OAAQiE,SAAUwL,GAAQnP,EAAM2D,SAAS3D,EAAMyB,QAAQ2N,MAAKC,GAAKrP,EAAMkP,QAAQG,KAAOF,EAAKzP,+FC2C3J,MACA,EAD2B,CAAE,IAxC7B,oBACI,KAAAoP,KAAe,OACfQ,aAAajB,EAAcC,EAAciB,GAErC,MAAO,CAAClB,IAAAA,EAAKC,IAAAA,KAoCwC,IAhC7D,oBACI,KAAAQ,KAAe,SACfQ,aAAajB,EAAcC,EAAciB,GAErC,MAAMC,EAAQ,cAAiBlB,EAAKD,GACpC,GAAGmB,EAAMC,OAASD,EAAME,UAAW,MAAO,CAACrB,IAAAA,EAAKC,IAAAA,GAChD,GAAGkB,EAAMC,KAAOD,EAAME,UAAW,CAC7B,IAAIC,GAAaH,EAAMC,KAAOD,EAAME,WAAW,EAC3CE,EAAQ,IAAI,KAAQ,EAAGD,GAE3B,MAAO,CAAEtB,IAAK,cAAiBA,EAAKuB,GAAQtB,IAAK,SAAYA,EAAKsB,IAMlE,OAHID,GAAaH,EAAME,UAAYF,EAAMC,MAAM,EAC3CG,EAAQ,IAAI,KAAQD,EAAW,GAE5B,CAAEtB,IAAK,cAAiBA,EAAKuB,GAAQtB,IAAK,SAAYA,EAAKsB,MAgBmB,IAXjG,oBACI,KAAAd,KAAe,WACfQ,aAAajB,EAAcC,EAAciB,GAErC,MAAO,CACHlB,IAAK,IAAI,MAASkB,EAAQM,cAAeN,EAAQM,cACjDvB,IAAK,IAAI,KAAQiB,EAAQM,aAAcN,EAAQM,kFChC5C,MAAMC,EAMjBtQ,YAAoBuQ,EAAmCC,GAAnC,KAAAD,OAAAA,EAAmC,KAAAC,UAAAA,GAEnD,QAAaD,EAAQA,EAAOE,YAAaF,EAAOG,cAChD9O,KAAK+O,IAAMJ,EAAOK,WAAW,MAC7BhP,KAAKiP,MAAQ,IAAIC,aACjBlP,KAAKmP,KAAOnP,KAAKiP,MAAMG,aACvBpP,KAAKmP,KAAKA,KAAK7Q,MAdV,GAeL0B,KAAKmP,KAAKE,QAAQrP,KAAKiP,MAAMK,aAG1BC,UACHvP,KAAKiP,MAAMO,QAGRC,KAAKC,EAAgBvB,SACP,QAAjB,EAAAnO,KAAK2P,oBAAY,SAAEC,OACnB5P,KAAK2P,aAAe,IAAIE,EAAa7P,KAAKiP,MAAOS,EAAOvB,EAASnO,KAAK4O,WACtE5O,KAAK+O,IAAIe,UAAU,EAAG,EAAG9P,KAAK2O,OAAOoB,MAAO/P,KAAK2O,OAAOqB,QACxDhQ,KAAK+O,IAAIkB,YAAc,MAEvBjQ,KAAK2P,aAAaO,MAAMlQ,KAAKmP,MAE7BnP,KAAK+O,IAAIoB,YACT,MAAM/B,EAAQgC,EAAA,MAAYpQ,KAAK2P,aAAaU,UAAWD,EAAA,SAAepQ,KAAK2P,aAAaW,YACxF,IAAI,IAAIvU,EAAI,EAAGA,EAAIiE,KAAK2P,aAAaY,IAAItU,OAAQF,IAAK,CAClD,MAAMyU,GAAMxQ,KAAK2P,aAAaY,IAAIxU,GAAGsS,KAAOrO,KAAK2P,aAAaW,UAAUjC,MAAQD,EAAMC,KAChFoC,GAAMzQ,KAAK2P,aAAaY,IAAIxU,GAAGuS,UAAYtO,KAAK2P,aAAaW,UAAUhC,WAAaF,EAAME,UAE1FoC,EAAOF,EAAKxQ,KAAK2O,OAAOoB,MACxBY,EAAOF,EAAKzQ,KAAK2O,OAAOqB,OACrB,IAANjU,EAASiE,KAAK+O,IAAI6B,OAAOF,EAAMC,GAC7B3Q,KAAK+O,IAAI8B,OAAOH,EAAMC,GAE/B3Q,KAAK+O,IAAI+B,UAIjB,MAAMjB,EAKFzR,YAAoB6Q,EAA6BS,EAAwBvB,EAA2BS,GAAhF,KAAAK,MAAAA,EAA6B,KAAAS,MAAAA,EAAwB,KAAAvB,QAAAA,EAA2B,KAAAS,UAAAA,EAChG5O,KAAKuQ,IAAM,IAAIlU,MAAM0U,MAErB,MAAMC,EAAOtB,EACb,IAAIuB,EAAI9C,EAAQ+C,KAAKF,GACrBhR,KAAKsQ,UAAY,IAAIF,EAAA,EAAQe,EAAAA,EAASA,EAAAA,GACtCnR,KAAKqQ,UAAY,IAAID,EAAA,GAAQ,KAAU,KACvC,IAAI,IAAIrU,EAAI,EAAGA,EAAIiE,KAAKuQ,IAAItU,OAAQF,IAChCkV,EAAI9C,EAAQiD,QAAQH,EAAGD,GACvBhR,KAAKuQ,IAAIxU,GAAK,IAAIqU,EAAA,EAAQa,EAAE5C,KAAM4C,EAAE3C,WACpCtO,KAAKsQ,UAAUjC,KAAOrD,KAAKiC,IAAIjN,KAAKsQ,UAAUjC,KAAM4C,EAAE5C,MACtDrO,KAAKsQ,UAAUhC,UAAYtD,KAAKiC,IAAIjN,KAAKsQ,UAAUhC,UAAW2C,EAAE3C,WAEhEtO,KAAKqQ,UAAUhC,KAAOrD,KAAKkC,IAAIlN,KAAKqQ,UAAUhC,KAAM4C,EAAE5C,MACtDrO,KAAKqQ,UAAU/B,UAAYtD,KAAKkC,IAAIlN,KAAKqQ,UAAU/B,UAAW2C,EAAE3C,WAGpE,MAAM+C,EAASzC,EAAUV,aAAalO,KAAKsQ,UAAWtQ,KAAKqQ,UAAWlC,GACtEnO,KAAKsQ,UAAYe,EAAOpE,IACxBjN,KAAKqQ,UAAYgB,EAAOnE,IAG5BgD,MAAMoB,GACF,MAAMC,EAASvR,KAAKiP,MAAMpF,aAAa,EAAG2H,KA3E7B,MA4EP5L,EAAS5F,KAAKiP,MAAMwC,qBAEpBC,EAAc,CAACH,EAAOI,eAAe,GAAIJ,EAAOI,eAAe,IAC/DvD,EAAQgC,EAAA,MAAYpQ,KAAKqQ,UAAWD,EAAA,SAAepQ,KAAKsQ,YAC9D,IAAI,IAAIvU,EAAI,EAAGA,EAAI2V,EAAY,GAAGzV,OAAQF,IAAK,CAE3C,MAAM6V,EAnFC,KAmFQ7V,EAlFN,KAmFH8V,EAAO7G,KAAKkC,IAAI,EAAGlC,KAAK8G,MAAMF,IAI9BG,GAHO/G,KAAKiC,IAAIjN,KAAKuQ,IAAItU,OAAS,EAAG+O,KAAKgH,KAAKJ,IAGuD5R,KAAKuQ,IAAIsB,GAAMxD,MACrH4D,EAAqHjS,KAAKuQ,IAAIsB,GAAMvD,UAEpIkC,GAAMuB,EAAa/R,KAAKsQ,UAAUjC,MAAQD,EAAMC,KAChDoC,GAAMwB,EAAkBjS,KAAKsQ,UAAUhC,WAAaF,EAAME,UAEhEoD,EAAY,GAAG3V,GAAU,EAALyU,EAAS,EAC7BkB,EAAY,GAAG3V,GAAU,EAAL0U,EAAS,EAGjC7K,EAAO2L,OAASA,EAEhB3L,EAAOyJ,QAAQiC,GACf1L,EAAOsK,QAEPlQ,KAAK4F,OAASA,EAGlBgK,aACe,QAAX,EAAA5P,KAAK4F,cAAM,SAAEgK,QCjFrB,MACA,EADoB,IA7BpB,oBAEI,KAAAlC,KAAe,eACf,KAAAwE,WAAqB,kQAYrB,KAAAzD,aAAuB,GAEvByC,KAAMiB,GACF,OAAOA,EAGXf,QAAQH,EAAYkB,GAEhB,MAAMC,EAAKnB,EAAE5C,KAAO4C,EAAE5C,KAAO4C,EAAE3C,UAAY2C,EAAE3C,UAAY6D,EAAE9D,KACrDgE,EAAK,EAAIrH,KAAKsH,IAAIrB,EAAE5C,KAAO4C,EAAE3C,WAAa6D,EAAE7D,UAClD,OAAO,IAAI,KAAQ8D,EAAIC,KCQ/B,EADuB,IAhCvB,oBAEI,KAAA3E,KAAe,UACf,KAAAwE,WAAqB,8TAcrB,KAAAzD,aAAuB,GAEvByC,KAAMiB,GACF,OAAOA,EAGXf,QAAQH,EAAYkB,GAEhB,OAAO,SACH,UAAalB,EAAGA,GAAGsB,aAAatB,GAChC,oBAAuBA,EAAGA,GAAGuB,QAAQ,IAAI,KAAQ,EAAG,KACtDA,QAAQL,KCFlB,EADmB,IAzBnB,oBAEI,KAAAzE,KAAe,aACf,KAAAwE,WAAqB,qKAUrB,KAAAzD,aAAuB,EAEvByC,KAAMiB,GACF,OAAOA,EAGXf,QAAQH,EAAYkB,GAEhB,OAAO,UAAalB,EAAGA,GAAGuB,QAAQL,KCY1C,EADsB,IAhCtB,oBAEI,KAAAzE,KAAe,SACf,KAAAwE,WAAqB,8PAYrB,KAAAzD,aAAuB,GAEvByC,KAAMiB,GACF,OAAOA,EAGXf,QAAQH,EAAYkB,GAEhB,MAAMM,EAAOxB,EAAEyB,QACTC,EAAO,oBAAuBR,EAAGA,GACvC,OAAO,cACH,oBAAuBlB,EAAGwB,EAAMA,GAChC,UAAaN,EAAGQ,8BClBb,MAAMC,EAejBxU,YAAoBuQ,EAAmCR,EAA2B0E,EAA+BC,EAA+DC,GAA5J,KAAApE,OAAAA,EAAmC,KAAAR,QAAAA,EAA2B,KAAA0E,MAAAA,EAA+B,KAAAC,OAAAA,EAA+D,KAAAC,cAAAA,GAC5K,QAAapE,EAAQA,EAAOE,YAAaF,EAAOG,cAChD9O,KAAKgT,cAAgB,KACrBhT,KAAKiT,SAAU,EACfjT,KAAK2F,GAAKgJ,EAAOK,WAAW,SAC5BhP,KAAKkT,cAAgB,GAErBlT,KAAKmT,YAAc,IAAI,KAAQ,IAAI,KAAM,EAAGxE,EAAOE,aAAc,IAAI,KAAM,EAAGF,EAAOG,eACrF9O,KAAKoT,YAAc,IAAI,KAAQ,IAAI,MAAO,EAAG,GAAI,IAAI,MAAO,EAAIzE,EAAOqB,OAASrB,EAAOoB,QAEvF/P,KAAKqT,cClCN,SAA0BlF,EAAmB0E,GAChD,MAK0B,usCAJrBS,QAAQ,qBAAsBnF,EAAQ+D,YACtCoB,QAAQ,mBAAoBT,EAAMlF,gBD+Bd4F,CAAiBpF,EAAS0E,GAC/C7S,KAAKgR,OAGTA,OACIhR,KAAK2F,GAAGkC,WAAW,EAAK,EAAK,EAAK,GAClC7H,KAAK2F,GAAGwC,MAAMnI,KAAK2F,GAAGyC,kBACtBpI,KAAKwT,cAGTA,cACIxT,KAAKyT,QAAU,KAAuBzT,KAAK2F,GAAI,KAA0B3F,KAAKqT,eAC9ErT,KAAKuR,OAAS,KAAkCvR,KAAK2F,IAGzD+N,MACI1T,KAAK2T,cAEL3T,KAAK2O,OAAOpN,iBAAiB,aAAaqS,IACtC,GAAgB,IAAbA,EAAEhS,OACD5B,KAAKgT,cAAgB,IAAItI,EAAA,EAAMkJ,EAAEC,QAASD,EAAEE,cAE3C,GAAgB,IAAbF,EAAEhS,OAAc,CACpB5B,KAAKiT,SAAU,EACf,IAAIc,EAAO/T,KAAKmT,YAAYa,cAAcJ,EAAEC,QAASD,EAAEE,SACvDC,EAAO/T,KAAKoT,YAAYa,SAASF,EAAKpJ,EAAG,EAAEoJ,EAAKnJ,QACtB6B,IAAvBzM,KAAK+S,eACJ/S,KAAK+S,cAAc,IAAIrI,EAAA,EAAMqJ,EAAKpJ,EAAGoJ,EAAKnJ,IAGlDgJ,EAAE9R,oBAEN9B,KAAK2O,OAAOpN,iBAAiB,WAAWqS,IACpB,IAAbA,EAAEhS,OACD5B,KAAKgT,cAAgB,KACJ,IAAbY,EAAEhS,SACN5B,KAAKiT,SAAU,GACnBW,EAAE9R,oBAEN9B,KAAK2O,OAAOpN,iBAAiB,aAAaqS,IACtC,GAAyB,MAAtB5T,KAAKgT,cAAuB,CAC3B,MAAMkB,EAAKN,EAAEC,QAAU7T,KAAKgT,cAAcrI,EACpCwJ,EAAKP,EAAEE,QAAU9T,KAAKgT,cAAcpI,EAC1C5K,KAAKoU,uBAAuB,IAAI1J,EAAA,EAAMwJ,EAAIC,IAC1CnU,KAAKgT,cAAgB,IAAItI,EAAA,EAAMkJ,EAAEC,QAASD,EAAEE,SAC5C9T,KAAK2T,cACLC,EAAE9R,iBAEN,GAAG9B,KAAKiT,cAAkCxG,IAAvBzM,KAAK+S,cAA4B,CAChD,IAAIgB,EAAO/T,KAAKmT,YAAYa,cAAcJ,EAAEC,QAASD,EAAEE,SACvDC,EAAO/T,KAAKoT,YAAYa,SAASF,EAAKpJ,EAAG,EAAEoJ,EAAKnJ,GAChD5K,KAAK+S,cAAc,IAAIrI,EAAA,EAAMqJ,EAAKpJ,EAAGoJ,EAAKnJ,QAGlD5K,KAAK2O,OAAOpN,iBAAiB,SAASqS,IAClC,MAAMS,EAAkBT,EAAEU,OAnFnB,EAoFDC,EAAYvJ,KAAKwJ,IAnFhB,IAmFgCH,GACjCN,EAAO/T,KAAKmT,YAAYa,cAAcJ,EAAEC,QAASD,EAAEE,SAEzD9T,KAAKoT,YAAYqB,YAAYF,EAAWR,EAAKpJ,EAAG,EAAEoJ,EAAKnJ,GACvD5K,KAAK2T,cACLC,EAAE9R,oBAEN9B,KAAK2O,OAAOpN,iBAAiB,cAAcmT,IACvC,KAAGA,EAAGC,cAAc1Y,QAAU,GAAiC,IAA5ByY,EAAGC,cAAc1Y,QAApD,CACA,IAAI,IAAIF,EAAI,EAAGA,EAAI2Y,EAAGC,cAAc1Y,OAAQF,IAAI,CAC5C,MAAM6Y,EAAQF,EAAGC,cAActS,KAAKtG,GACpCiE,KAAKkT,cAAc0B,EAAMC,YAAcC,EAAYF,GAEvDF,EAAG5S,qBAEP9B,KAAK2O,OAAOpN,iBAAiB,aAAamT,IACtC,GAAGA,EAAGK,QAAQ9Y,QAAU,GAA2B,IAAtByY,EAAGK,QAAQ9Y,OAAc,OACtD,MAAM+Y,EAA0B,GAChC,IAAI,IAAIjZ,EAAI,EAAGA,EAAI2Y,EAAGC,cAAc1Y,OAAQF,IAAI,CAC5C,MAAM6Y,EAAQF,EAAGC,cAActS,KAAKtG,GAC9BkZ,EAAMH,EAAYF,GAClBM,EAASlV,KAAKkT,cAAc0B,EAAMC,YACxC,QAAcpI,IAAXyI,EAAsB,OACzBF,EAAM5Y,KAAK,CAAC8Y,EAAQD,IACpBjV,KAAKkT,cAAc0B,EAAMC,YAAcI,EAG3C,GAAoB,IAAjBD,EAAM/Y,OAEL+D,KAAKoU,uBAAuB1J,EAAA,WAAesK,EAAM,GAAG,GAAIA,EAAM,GAAG,UAEhE,GAAoB,IAAjBA,EAAM/Y,OAAc,CAExB,MAAMkZ,EAAYzK,EAAA,WAAeA,EAAA,MAAUsK,EAAM,GAAG,GAAIA,EAAM,GAAG,IAAK,GAAK,IACrEI,EAAU1K,EAAA,WAAeA,EAAA,MAAUsK,EAAM,GAAG,GAAIA,EAAM,GAAG,IAAK,GAAK,IACnEK,EAAWrV,KAAKoU,uBAAuBgB,EAAQzI,aAAawI,IAG5DG,EAFY5K,EAAA,WAAesK,EAAM,GAAG,GAAIA,EAAM,GAAG,IAAI3J,SAC3CX,EAAA,WAAesK,EAAM,GAAG,GAAIA,EAAM,GAAG,IAAI3J,SAEzDrL,KAAKoT,YAAYqB,YAAYa,EAAUD,EAAS1K,EAAG,EAAE0K,EAASzK,GAGlE5K,KAAK2T,cACLe,EAAG5S,oBAEP9B,KAAK2O,OAAOpN,iBAAiB,YAAYmT,IACrC1U,KAAKkT,cAAgB,GACrBwB,EAAG5S,oBAEP9B,KAAK2O,OAAOpN,iBAAiB,eAAemT,IACxC1U,KAAKkT,cAAgB,GACrBwB,EAAG5S,oBAIHsS,uBAAuB5F,GAC3B,MAAMuF,EAAO/T,KAAKmT,YAAYa,cAAcxF,EAAM7D,EAAG6D,EAAM5D,GAE3D,OADA5K,KAAKoT,YAAYmC,mBAAmBxB,EAAKpJ,EAAGoJ,EAAKnJ,GAC1CmJ,EAGXJ,cACI,KAA4B3T,KAAK2F,GAAI3F,KAAKyT,QAASzT,KAAKuR,QAAQ5L,IAC5DA,EAAG6P,UAAU7P,EAAG8P,mBAAmBzV,KAAKyT,QAAS,aAAczT,KAAKmO,QAAQM,cAC5E9I,EAAG+P,WAAW/P,EAAG8P,mBAAmBzV,KAAKyT,QAAS,cAAe,CAACzT,KAAKoT,YAAYuC,OAAO1I,IAAKjN,KAAKoT,YAAYwC,OAAO3I,MACvHtH,EAAG+P,WAAW/P,EAAG8P,mBAAmBzV,KAAKyT,QAAS,eAAgB,CAACzT,KAAKoT,YAAYuC,OAAOtK,SAAUrL,KAAKoT,YAAYwC,OAAOvK,cAIrIwK,YAKJ,SAASf,EAAYF,GACjB,MAAMtD,EAAOsD,EAAMjW,OAAuBmX,wBAC1C,OAAO,IAAIpL,EAAA,EAAMkK,EAAMmB,MAAQzE,EAAI7H,KAAMmL,EAAMoB,MAAQ1E,EAAI5H,KE/JhD,MAAMuM,EAGjB7X,YAAoBuQ,EAA2BR,EAA2B+H,EAAuCC,GAA7F,KAAAxH,OAAAA,EAAsD,KAAAuH,cAAAA,EAAuC,KAAAC,YAAAA,EAE7GnW,KAAKoW,WAAa,IAAIxD,EAAkBjE,EAAQR,EAAS+H,EAAe,CAAEvL,GAAI,EAAGC,GAAI,EAAGyL,EAAG,EAAGC,EAAE,IAAMC,IAClGvW,KAAKwW,UAAUD,EAAKpI,MAExBnO,KAAKoW,WAAW1C,MAGpBmC,UACI7V,KAAKoW,WAAWP,UAGpBW,UAAUC,EAAWtI,GAEjBnO,KAAKmW,YAAY1G,KAAK,IAAI,KAAQgH,EAAG9L,EAAG8L,EAAG7L,GAAIuD,kBCXvD,MAAMuI,EAAuB,CACzB,EACA,EACA,EACA,GAEEC,EAA2B,CAC7B,IACA,IACA,IACA,KAGW,SAASC,IACpB,MAAMjI,EAAS,WACTkI,EAAgB,YACfC,EAAMC,GAAW,WAAyB,IAC1CnI,EAAWoI,GAAgB,WAAmC,OAC9DnE,EAAOoE,GAAY,WAA+B,KAazD,OAXA,aAAgB,KACZ,MAAMhI,EAAQ,IAAIP,EAAmBmI,EAAcjT,QAASgL,GACtDsI,EAAW,IAAIjB,EAAyBtH,EAAO/K,QAASkT,EAAMjE,EAAO5D,GAC3E,MAAO,KAEHiI,EAASrB,UACT5G,EAAMM,aAEX,CAACZ,EAAQmI,EAAMlI,EAAWiE,IAGtB,uBAAKjQ,UAAU,gCAClB,uBAAKuU,MAAO,CAAEpH,MAAO,MAAOC,OAAQ,OAAQoH,SAAU,aAClD,0BAAQhS,IAAKuJ,EAAQwI,MAAO,CAAEC,SAAU,WAAYrH,MAAO,OAAQC,OAAQ,OAAQtG,IAAI,EAAGD,KAAK,KAC/F,0BAAQrE,IAAKyR,EAAeM,MAAO,CAAEC,SAAU,WAAYrH,MAAO,OAAQC,OAAQ,OAAQqH,cAAe,OAAQ3N,IAAI,EAAGD,KAAK,MAEjI,uBAAK0N,MAAO,CAAEpH,MAAO,MAAOC,OAAQ,OAAQsH,WAAY,OAAQF,SAAU,WAAY3N,KAAM,QACxF,yCACA,gBAACmE,EAAA,EAAoB,CAACvN,QAASqW,EAAUpY,MAAOwY,EAAMhJ,QAASyJ,GAAKA,EAAE7J,KAAMnL,SAAUgV,GAAKR,EAAQQ,KACnG,uCACA,gBAAC3J,EAAA,EAAoB,CAACvN,QAASsW,EAAQrY,MAAOuU,EAAO/E,QAASqE,GAAKA,EAAEzE,KAAMnL,SAAU4P,GAAK8E,EAAS9E,KACnG,oDACA,gBAACvE,EAAA,EAAoB,CAACvN,QAAS,EAAuB/B,MAAOsQ,EAAWd,QAASf,GAAKA,EAAEW,KAAMnL,SAAUwK,GAAKiK,EAAajK,KAE1H,uBAAKoK,MAAO,CAAEvN,OAAQ,EAAGwN,SAAU,WAAYvE,MAAO,OAAQ2E,UAAW,SAAUzH,MAAO,wBAAsB,qBAAG0H,KAAK,+CAA6C","sources":["webpack://trading-game/./node_modules/classnames/index.js","webpack://trading-game/./node_modules/react-dropdown/dist/index.js","webpack://trading-game/./src/projects/common/3d/GlslHelpers.ts","webpack://trading-game/./src/projects/common/position/Point.ts","webpack://trading-game/./src/projects/glsl-fracaudio/ColorFunctions/FireColor.ts","webpack://trading-game/./src/projects/glsl-fracaudio/ColorFunctions/GrayscaleColor.ts","webpack://trading-game/./src/projects/glsl-fracaudio/ColorFunctions/HueColor.ts","webpack://trading-game/./src/projects/glsl-fracaudio/ColorFunctions/PaperColor.ts","webpack://trading-game/./src/views/common/ObjDropdownComponent.tsx","webpack://trading-game/./src/projects/glsl-fracaudio/AmplitudeMode.ts","webpack://trading-game/./src/projects/glsl-fracaudio/FractalAudioPlayer.ts","webpack://trading-game/./src/projects/glsl-fracaudio/Fractals/BurningShip.ts","webpack://trading-game/./src/projects/glsl-fracaudio/Fractals/Feather.ts","webpack://trading-game/./src/projects/glsl-fracaudio/Fractals/Mandelbrot.ts","webpack://trading-game/./src/projects/glsl-fracaudio/Fractals/Square.ts","webpack://trading-game/./src/projects/glsl-fracaudio/GlslFrameRenderer.ts","webpack://trading-game/./src/projects/glsl-fracaudio/ShaderCode.ts","webpack://trading-game/./src/projects/glsl-fracaudio/RendererWrapperComponent.ts","webpack://trading-game/./src/views/projects/glsl-fracaudio/GlslFractalAudioComponent.tsx"],"sourcesContent":["/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg) && arg.length) {\n\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\tif (inner) {\n\t\t\t\t\tclasses.push(inner);\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar DEFAULT_PLACEHOLDER_STRING = 'Select...';\n\nvar Dropdown =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Dropdown, _Component);\n\n  function Dropdown(props) {\n    var _this;\n\n    _classCallCheck(this, Dropdown);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Dropdown).call(this, props));\n    _this.state = {\n      selected: _this.parseValue(props.value, props.options) || {\n        label: typeof props.placeholder === 'undefined' ? DEFAULT_PLACEHOLDER_STRING : props.placeholder,\n        value: ''\n      },\n      isOpen: false\n    };\n    _this.dropdownRef = (0, _react.createRef)();\n    _this.mounted = true;\n    _this.handleDocumentClick = _this.handleDocumentClick.bind(_assertThisInitialized(_this));\n    _this.fireChangeEvent = _this.fireChangeEvent.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Dropdown, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (this.props.value !== prevProps.value) {\n        if (this.props.value) {\n          var selected = this.parseValue(this.props.value, this.props.options);\n\n          if (selected !== this.state.selected) {\n            this.setState({\n              selected: selected\n            });\n          }\n        } else {\n          this.setState({\n            selected: {\n              label: typeof this.props.placeholder === 'undefined' ? DEFAULT_PLACEHOLDER_STRING : this.props.placeholder,\n              value: ''\n            }\n          });\n        }\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      document.addEventListener('click', this.handleDocumentClick, false);\n      document.addEventListener('touchend', this.handleDocumentClick, false);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.mounted = false;\n      document.removeEventListener('click', this.handleDocumentClick, false);\n      document.removeEventListener('touchend', this.handleDocumentClick, false);\n    }\n  }, {\n    key: \"handleMouseDown\",\n    value: function handleMouseDown(event) {\n      if (this.props.onFocus && typeof this.props.onFocus === 'function') {\n        this.props.onFocus(this.state.isOpen);\n      }\n\n      if (event.type === 'mousedown' && event.button !== 0) return;\n      event.stopPropagation();\n      event.preventDefault();\n\n      if (!this.props.disabled) {\n        this.setState({\n          isOpen: !this.state.isOpen\n        });\n      }\n    }\n  }, {\n    key: \"parseValue\",\n    value: function parseValue(value, options) {\n      var option;\n\n      if (typeof value === 'string') {\n        for (var i = 0, num = options.length; i < num; i++) {\n          if (options[i].type === 'group') {\n            var match = options[i].items.filter(function (item) {\n              return item.value === value;\n            });\n\n            if (match.length) {\n              option = match[0];\n            }\n          } else if (typeof options[i].value !== 'undefined' && options[i].value === value) {\n            option = options[i];\n          }\n        }\n      }\n\n      return option || value;\n    }\n  }, {\n    key: \"setValue\",\n    value: function setValue(value, label) {\n      var newState = {\n        selected: {\n          value: value,\n          label: label\n        },\n        isOpen: false\n      };\n      this.fireChangeEvent(newState);\n      this.setState(newState);\n    }\n  }, {\n    key: \"fireChangeEvent\",\n    value: function fireChangeEvent(newState) {\n      if (newState.selected !== this.state.selected && this.props.onChange) {\n        this.props.onChange(newState.selected);\n      }\n    }\n  }, {\n    key: \"renderOption\",\n    value: function renderOption(option) {\n      var _classes;\n\n      var value = option.value;\n\n      if (typeof value === 'undefined') {\n        value = option.label || option;\n      }\n\n      var label = option.label || option.value || option;\n      var isSelected = value === this.state.selected.value || value === this.state.selected;\n      var classes = (_classes = {}, _defineProperty(_classes, \"\".concat(this.props.baseClassName, \"-option\"), true), _defineProperty(_classes, option.className, !!option.className), _defineProperty(_classes, 'is-selected', isSelected), _classes);\n      var optionClass = (0, _classnames[\"default\"])(classes);\n      return _react[\"default\"].createElement(\"div\", {\n        key: value,\n        className: optionClass,\n        onMouseDown: this.setValue.bind(this, value, label),\n        onClick: this.setValue.bind(this, value, label),\n        role: \"option\",\n        \"aria-selected\": isSelected ? 'true' : 'false'\n      }, label);\n    }\n  }, {\n    key: \"buildMenu\",\n    value: function buildMenu() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          options = _this$props.options,\n          baseClassName = _this$props.baseClassName;\n      var ops = options.map(function (option) {\n        if (option.type === 'group') {\n          var groupTitle = _react[\"default\"].createElement(\"div\", {\n            className: \"\".concat(baseClassName, \"-title\")\n          }, option.name);\n\n          var _options = option.items.map(function (item) {\n            return _this2.renderOption(item);\n          });\n\n          return _react[\"default\"].createElement(\"div\", {\n            className: \"\".concat(baseClassName, \"-group\"),\n            key: option.name,\n            role: \"listbox\",\n            tabIndex: \"-1\"\n          }, groupTitle, _options);\n        } else {\n          return _this2.renderOption(option);\n        }\n      });\n      return ops.length ? ops : _react[\"default\"].createElement(\"div\", {\n        className: \"\".concat(baseClassName, \"-noresults\")\n      }, \"No options found\");\n    }\n  }, {\n    key: \"handleDocumentClick\",\n    value: function handleDocumentClick(event) {\n      if (this.mounted) {\n        if (!this.dropdownRef.current.contains(event.target)) {\n          if (this.state.isOpen) {\n            this.setState({\n              isOpen: false\n            });\n          }\n        }\n      }\n    }\n  }, {\n    key: \"isValueSelected\",\n    value: function isValueSelected() {\n      return typeof this.state.selected === 'string' || this.state.selected.value !== '';\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _classNames, _classNames2, _classNames3, _classNames4, _classNames5;\n\n      var _this$props2 = this.props,\n          baseClassName = _this$props2.baseClassName,\n          controlClassName = _this$props2.controlClassName,\n          placeholderClassName = _this$props2.placeholderClassName,\n          menuClassName = _this$props2.menuClassName,\n          arrowClassName = _this$props2.arrowClassName,\n          arrowClosed = _this$props2.arrowClosed,\n          arrowOpen = _this$props2.arrowOpen,\n          className = _this$props2.className;\n      var disabledClass = this.props.disabled ? 'Dropdown-disabled' : '';\n      var placeHolderValue = typeof this.state.selected === 'string' ? this.state.selected : this.state.selected.label;\n      var dropdownClass = (0, _classnames[\"default\"])((_classNames = {}, _defineProperty(_classNames, \"\".concat(baseClassName, \"-root\"), true), _defineProperty(_classNames, className, !!className), _defineProperty(_classNames, 'is-open', this.state.isOpen), _classNames));\n      var controlClass = (0, _classnames[\"default\"])((_classNames2 = {}, _defineProperty(_classNames2, \"\".concat(baseClassName, \"-control\"), true), _defineProperty(_classNames2, controlClassName, !!controlClassName), _defineProperty(_classNames2, disabledClass, !!disabledClass), _classNames2));\n      var placeholderClass = (0, _classnames[\"default\"])((_classNames3 = {}, _defineProperty(_classNames3, \"\".concat(baseClassName, \"-placeholder\"), true), _defineProperty(_classNames3, placeholderClassName, !!placeholderClassName), _defineProperty(_classNames3, 'is-selected', this.isValueSelected()), _classNames3));\n      var menuClass = (0, _classnames[\"default\"])((_classNames4 = {}, _defineProperty(_classNames4, \"\".concat(baseClassName, \"-menu\"), true), _defineProperty(_classNames4, menuClassName, !!menuClassName), _classNames4));\n      var arrowClass = (0, _classnames[\"default\"])((_classNames5 = {}, _defineProperty(_classNames5, \"\".concat(baseClassName, \"-arrow\"), true), _defineProperty(_classNames5, arrowClassName, !!arrowClassName), _classNames5));\n\n      var value = _react[\"default\"].createElement(\"div\", {\n        className: placeholderClass\n      }, placeHolderValue);\n\n      var menu = this.state.isOpen ? _react[\"default\"].createElement(\"div\", {\n        className: menuClass,\n        \"aria-expanded\": \"true\"\n      }, this.buildMenu()) : null;\n      return _react[\"default\"].createElement(\"div\", {\n        ref: this.dropdownRef,\n        className: dropdownClass\n      }, _react[\"default\"].createElement(\"div\", {\n        className: controlClass,\n        onMouseDown: this.handleMouseDown.bind(this),\n        onTouchEnd: this.handleMouseDown.bind(this),\n        \"aria-haspopup\": \"listbox\"\n      }, value, _react[\"default\"].createElement(\"div\", {\n        className: \"\".concat(baseClassName, \"-arrow-wrapper\")\n      }, arrowOpen && arrowClosed ? this.state.isOpen ? arrowOpen : arrowClosed : _react[\"default\"].createElement(\"span\", {\n        className: arrowClass\n      }))), menu);\n    }\n  }]);\n\n  return Dropdown;\n}(_react.Component);\n\nDropdown.defaultProps = {\n  baseClassName: 'Dropdown'\n};\nvar _default = Dropdown;\nexports[\"default\"] = _default;\n","export function loadShader(gl: WebGLRenderingContext, type: number, source: string) {\n    const shader = gl.createShader(type);\n    // Send the source to the shader object\n    gl.shaderSource(shader, source);\n    // Compile the shader program\n    gl.compileShader(shader);\n    // See if it compiled successfully\n    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n      console.error(source);\n      alert(`An error occurred compiling the ${(type === gl.VERTEX_SHADER ? 'vertex' : type === gl.FRAGMENT_SHADER ? 'fragment' : '')} shaders: ` + gl.getShaderInfoLog(shader));\n      gl.deleteShader(shader);\n      return undefined;\n    }\n\n    return shader;\n}\n\n\nexport function initShaderProgram(gl: WebGLRenderingContext, vertexShaderSource: string, fragmentShaderSource: string) {\n    const vertexShader = loadShader(gl, gl.VERTEX_SHADER, vertexShaderSource);\n    const fragmentShader = loadShader(gl, gl.FRAGMENT_SHADER, fragmentShaderSource);\n\n    // Create the shader program\n\n    const shaderProgram = gl.createProgram();\n    gl.attachShader(shaderProgram, vertexShader);\n    gl.attachShader(shaderProgram, fragmentShader);\n    gl.linkProgram(shaderProgram);\n\n    // If creating the shader program failed, alert\n\n    if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {\n      alert('Unable to initialize the shader program: ' + gl.getProgramInfoLog(shaderProgram));\n      return undefined;\n    }\n\n    return shaderProgram;\n  }\n\n\nexport function shaderDraw(gl: WebGLRenderingContext, shader: WebGLProgram, positionBuffer: WebGLBuffer, positionNumComponents: number, renderMode: 'triangle'|'tristrip'|'trifan', bufferOffset: number, bufferCount: number, bindUniforms: (gl: WebGLRenderingContext) => void) {\n    gl.clearColor(0.0, 0.0, 0.0, 1.0);  // Clear to black, fully opaque\n    gl.clearDepth(1.0);                 // Clear everything\n    gl.enable(gl.DEPTH_TEST);           // Enable depth testing\n    gl.depthFunc(gl.LEQUAL);            // Near things obscure far things\n\n    // Clear the canvas before we start drawing on it.\n\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n    // Tell WebGL how to pull out the positions from the position\n    // buffer into the vertexPosition attribute.\n    {\n      const type = gl.FLOAT;    // the data in the buffer is 32bit floats\n      const normalize = false;  // don't normalize\n      const stride = 0;         // how many bytes to get from one set of values to the next\n                                // 0 = use type and numComponents above\n      const offset = 0;         // how many bytes inside the buffer to start from\n      gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\n      gl.vertexAttribPointer(\n            gl.getAttribLocation(shader, 'aVertexPosition'),\n            positionNumComponents,\n            type,\n            normalize,\n            stride,\n            offset);\n      gl.enableVertexAttribArray(\n        gl.getAttribLocation(shader, 'aVertexPosition'));\n    }\n\n    // Tell WebGL to use our program when drawing\n\n    gl.useProgram(shader);\n    bindUniforms(gl);\n    gl.drawArrays(\n      renderMode === 'triangle' ? gl.TRIANGLES :\n      renderMode === 'tristrip' ? gl.TRIANGLE_STRIP :\n      gl.TRIANGLE_FAN, bufferOffset, bufferCount);\n}\n\n\nexport function shaderDrawMultiple(gl: WebGLRenderingContext, shader: WebGLProgram, positionBuffer: WebGLBuffer, positionNumComponents: number, renderMode: 'triangle'|'tristrip'|'trifan', drawCounts: number, getGeom: (i: number) => {bufferOffset: number, bufferCount: number}, bindUniforms: (gl: WebGLRenderingContext, i: number) => void) {\n  gl.clearColor(0.0, 0.0, 0.0, 1.0);  // Clear to black, fully opaque\n  gl.clearDepth(1.0);                 // Clear everything\n  gl.enable(gl.DEPTH_TEST);           // Enable depth testing\n  gl.depthFunc(gl.LEQUAL);            // Near things obscure far things\n\n  // Clear the canvas before we start drawing on it.\n\n  gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n  // Tell WebGL how to pull out the positions from the position\n  // buffer into the vertexPosition attribute.\n  {\n    const type = gl.FLOAT;    // the data in the buffer is 32bit floats\n    const normalize = false;  // don't normalize\n    const stride = 0;         // how many bytes to get from one set of values to the next\n                              // 0 = use type and numComponents above\n    const offset = 0;         // how many bytes inside the buffer to start from\n    gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\n    gl.vertexAttribPointer(\n          gl.getAttribLocation(shader, 'aVertexPosition'),\n          positionNumComponents,\n          type,\n          normalize,\n          stride,\n          offset);\n    gl.enableVertexAttribArray(\n      gl.getAttribLocation(shader, 'aVertexPosition'));\n  }\n\n  // Tell WebGL to use our program when drawing\n\n  gl.useProgram(shader);\n  for(let i = 0; i < drawCounts; i++) {\n    bindUniforms(gl, i);\n    let {bufferOffset, bufferCount} = getGeom(i);\n    gl.drawArrays(\n      renderMode === 'triangle' ? gl.TRIANGLES :\n      renderMode === 'tristrip' ? gl.TRIANGLE_STRIP :\n      gl.TRIANGLE_FAN, bufferOffset, bufferCount);\n  }\n}\n\nexport function fragmentShaderOnlyDraw(gl: WebGLRenderingContext, shader: WebGLProgram, positionBuffer: WebGLBuffer, bindUniforms: (gl: WebGLRenderingContext) => void) {\n    gl.clearColor(0.0, 0.0, 0.0, 1.0);  // Clear to black, fully opaque\n    gl.clearDepth(1.0);                 // Clear everything\n    gl.enable(gl.DEPTH_TEST);           // Enable depth testing\n    gl.depthFunc(gl.LEQUAL);            // Near things obscure far things\n\n    // Clear the canvas before we start drawing on it.\n\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n    // Tell WebGL how to pull out the positions from the position\n    // buffer into the vertexPosition attribute.\n    {\n      const numComponents = 2;  // pull out 2 values per iteration\n      const type = gl.FLOAT;    // the data in the buffer is 32bit floats\n      const normalize = false;  // don't normalize\n      const stride = 0;         // how many bytes to get from one set of values to the next\n                                // 0 = use type and numComponents above\n      const offset = 0;         // how many bytes inside the buffer to start from\n      gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\n      gl.vertexAttribPointer(\n            gl.getAttribLocation(shader, 'aVertexPosition'),\n            numComponents,\n            type,\n            normalize,\n            stride,\n            offset);\n      gl.enableVertexAttribArray(\n        gl.getAttribLocation(shader, 'aVertexPosition'));\n    }\n\n    // Tell WebGL to use our program when drawing\n\n    gl.useProgram(shader);\n    bindUniforms(gl);\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n}\n\nexport function fragmentShaderOnlyInitBuffer(gl: WebGLRenderingContext, left?: number, top?: number, right?: number, bottom?: number) {\n     // Create a buffer for the square's positions.\n     const positionBuffer = gl.createBuffer();\n\n     // Select the positionBuffer as the one to apply buffer\n     // operations to from here out.\n     gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\n\n     const l = left ?? -1.0;\n     const r = right ?? 1.0;\n     const t = top ?? -1.0;\n     const b = bottom ?? 1.0;\n \n     // Now create an array of positions for the square.\n     const positions = [\n         b, r,\n         t, r,\n         b, l,\n         t, l,\n     ];\n \n     // Now pass the list of positions into WebGL to build the\n     // shape. We do this by creating a Float32Array from the\n     // JavaScript array, then use it to fill the current buffer.\n     gl.bufferData(gl.ARRAY_BUFFER,\n                   new Float32Array(positions),\n                   gl.STATIC_DRAW);\n \n     return positionBuffer;\n}\n\nexport function initGLBuffer(gl: WebGLRenderingContext, components: number[]) {\n  const positionBuffer = gl.createBuffer();\n\n  gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\n\n  gl.bufferData(gl.ARRAY_BUFFER,\n                new Float32Array(components),\n                gl.STATIC_DRAW);\n\n  return positionBuffer;\n}\n\nexport const defaultVertexShader = `attribute vec4 aVertexPosition;\nvarying vec3 vPos;\nvoid main() {\n  vPos = vec3(aVertexPosition.xy, 0.0);\n  gl_Position = aVertexPosition;\n}`;\n\nexport const defaultWebGl2VertexShader = `#version 300 es\nin vec4 aVertexPosition;\nout vec3 vPos;\nvoid main() {\n  vPos = vec3(aVertexPosition.xy, 0.0);\n  gl_Position = aVertexPosition;\n}`;","export default class Point {\n\n    static zero(): Point  {\n        return new Point(0,0);\n    }\n\n    constructor(public x: number, public y: number) {\n\n    }\n\n    public static fromAngle(angle: number, distance?: number) : Point {\n        return new Point(Math.cos(angle) * (distance ?? 1), Math.sin(angle) * (distance ?? 1));\n    }\n\n    public LengthSq(): number {\n        return Point.Dot(this, this);\n    }\n\n    public Length(): number {\n        return Math.sqrt(this.LengthSq());\n    }\n\n    public Clone(): Point {\n        return new Point(this.x, this.y);\n    }\n\n    public Negate(): Point {\n        return new Point(-this.x, -this.y);\n    }\n\n    public NegateInPlace(): this {\n        this.x = -this.x;\n        this.y = -this.y;\n        return this;\n    }\n\n    public static Dot(p1: Point, p2: Point): number {\n        return p1.x * p2.x + p1.y * p2.y;\n    }\n\n    public DotWith(other: Point): number {\n        return Point.Dot(this, other);\n    }\n\n    public normalize(): Point {\n        let len = this.Length();\n        return Point.Multiply(this, 1 / len);\n    }\n\n    public Direction(): number {\n        return Math.atan2(this.y, this.x);\n    }\n\n    public Truncate(): Point {\n        return new Point(Math.trunc(this.x), Math.trunc(this.y));\n    }\n\n    public AddWith(x: number, y: number): this;\n    public AddWith(other: Point): this;\n    public AddWith(other: number|Point, y?: number): this {\n        const {x: nx, y: ny} = splitArgs(other, y);\n        this.x += nx;\n        this.y += ny;\n        return this;\n    }\n\n    public MultWith(s: number): this;\n    public MultWith(x: number, y: number): this;\n    public MultWith(other: Point): this;\n    public MultWith(other: number|Point, y?: number): this {\n        const {x: nx, y: ny} = splitArgsOrSingle(other, y);\n        this.x *= nx;\n        this.y *= ny;\n        return this;\n    }\n\n    public SubtractWith(x: number, y: number): this;\n    public SubtractWith(other: Point): this;\n    public SubtractWith(other: number|Point, y?: number): this {\n        const {x: nx, y: ny} = splitArgs(other, y);\n        this.x -= nx;\n        this.y -= ny;\n        return this;\n    }\n\n    public DivideWith(x: number, y: number): this;\n    public DivideWith(other: Point): this;\n    public DivideWith(other: number|Point, y?: number): this {\n        const {x: nx, y: ny} = splitArgs(other, y);\n        this.x /= nx;\n        this.y /= ny;\n        return this;\n    }\n\n    public Equals(other: Point): boolean {\n        return this.x === other.x && this.y === other.y;\n    }\n\n    \n    static add(src: Point, x: number, y: number): Point;\n    static add(src: Point, other: Point): Point;\n    static add(src: Point, other: number|Point, y?: number): Point {\n        const {x: nx, y: ny} = splitArgs(other, y);\n        return new Point(src.x + nx, src.y + ny);\n    }\n\n    static subtract(src: Point, x: number, y: number): Point;\n    static subtract(src: Point, other: Point): Point;\n    static subtract(src: Point, other: number|Point, y?: number): Point {\n        const {x: nx, y: ny} = splitArgs(other, y);\n        return new Point(src.x - nx, src.y - ny);\n    }\n\n    static Multiply(a: Point, s: number, sy?: number): Point;\n    static Multiply(a: Point, b: Point): Point;\n    static Multiply(a: Point, b: Point|number, sy ?: number): Point {\n        if (sy !== undefined) {\n            return new Point(a.x * (b as number), a.y * sy);\n        }\n        else if ((b as any).x !== undefined) {\n            return new Point(a.x * (b as Point).x, a.y * (b as Point).y);\n        } else {\n            return new Point(a.x * (b as number), a.y * (b as number));\n        }\n    }\n\n    static interpolate(a: Point, b: Point, p: number): Point {\n        return new Point(a.x + (b.x - a.x) * p, a.y + (b.y - a.y) * p);\n    }\n\n    static componentMin(a: Point, b: Point): Point {\n        if(a.x <= b.x && a.y <= b.y) return a;\n        if(b.x <= a.x && b.y <= a.y) return b;\n        return new Point(Math.min(a.x, b.x), Math.min(a.y, b.y));\n    }\n    \n    static componentMax(a: Point, b: Point): Point {\n        if(a.x >= b.x && a.y >= b.y) return a;\n        if(b.x >= a.x && b.y >= a.y) return b;\n        return new Point(Math.max(a.x, b.x), Math.max(a.y, b.y));\n    }\n\n    static Bezier(pts: Point[], t: number): Point {\n        if(pts.length === 1) return pts[0];\n        else if(pts.length === 2) return Point.add(Point.Multiply(pts[1], t), Point.Multiply(pts[0], 1-t));\n        return Point.add(\n            Point.Multiply(Point.Bezier(pts.slice(1), t), t),\n            Point.Multiply(Point.Bezier(pts.slice(0, pts.length - 1), t), 1-t));\n    }\n\n    rotate(theta: number): Point {\n        const angle = Math.atan2(this.y, this.x);\n        const len = this.Length();\n        return Point.fromAngle(angle + theta, len);\n    }\n}\n\nfunction splitArgs(x: Point|number, y ?: number): {x: number, y: number} {\n    if(y === undefined) return { x: (<Point>x).x, y: (<Point>x).y };\n    return {x: <number>x, y};\n}\n\nfunction splitArgsOrSingle(x: Point|number, y ?: number): {x: number, y: number} {\n    if(y === undefined)\n    {\n        if((x as Point).x !== undefined) {\n            return { x: (<Point>x).x, y: (<Point>x).y };\n        }\n        return { x: x as number, y: x as number };\n    } \n    return {x: <number>x, y};\n}","import { IColorFunction } from \"./IColorFunction\";\n\nclass FireColor implements IColorFunction {\n    Name = 'Fire';\n    shaderFunction = `\nvec3 floatToColor(float perc) {\n    if(perc <= 0.5) {\n        return vec3(perc * 2.0, perc, 0.0);\n    }\n    perc = (perc - 0.5) * 2.0;\n    return vec3(1.0, 0.5 + perc / 2.0, perc);\n}\n    `;\n}\n\nconst fireColor = new FireColor();\nexport default fireColor;","import { IColorFunction } from \"./IColorFunction\";\n\nclass GrayscaleColor implements IColorFunction {\n    Name = 'Grayscale';\n    shaderFunction = `\nvec3 floatToColor(float perc) {\n    return vec3(perc, perc, perc);\n}\n    `;\n}\n\nconst grayscaleColor = new GrayscaleColor();\nexport default grayscaleColor;","import { IColorFunction } from \"./IColorFunction\";\n\nclass HueColor implements IColorFunction {\n    Name = 'Hue';\n    shaderFunction = `\n\nfloat fmod(float a, float b) {\n    return a - (b * floor(a/b));\n}\n\nfloat hsvComponentToRgb(vec3 hsv, float n) {\n    float k = fmod((n + hsv.x * 6.0), 6.0);\n    return hsv.z - hsv.z * hsv.y * max(min(min(k, 4.0-k),1.0), 0.0);\n}\n\nvec3 floatToColor(float perc) {\n    if(perc == 1.0) {\n        return vec3(0, 0, 0);\n    }\n    vec3 hsv = vec3(perc, 1.0, 1.0);\n    return vec3(\n        hsvComponentToRgb(hsv, 5.0),\n        hsvComponentToRgb(hsv, 3.0),\n        hsvComponentToRgb(hsv, 1.0)\n    );\n}\n    `;\n}\n\nconst hueColor = new HueColor();\nexport default hueColor;","import { IColorFunction } from \"./IColorFunction\";\n\nclass PaperColor implements IColorFunction {\n    Name = 'Paper';\n    shaderFunction = `\nvec3 floatToColor(float perc) {\n    if(perc == 1.0) {\n        return vec3(0, 0, 0);\n    }\n    return vec3(0.8, 0.8, 0.8) - (perc * 0.8);\n}\n    `;\n}\n\nconst pueColor = new PaperColor();\nexport default pueColor;","import * as React from 'react';\nimport Dropdown from 'react-dropdown';\n\nexport function ObjDropdownComponent<T>(props: {options: T[], getName: (item:T) => string, value: T, onChange: (item:T)=>void}) {\n    const names = props.options.map(props.getName);\n    return <Dropdown options={names} value={props.getName(props.value)} onChange={chng => props.onChange(props.options.find(v => props.getName(v) === chng.value))}></Dropdown>\n}","import { Complex } from \"../common\";\nimport { IFractal } from \"./Fractals/IFractal\";\n\nexport interface IAmplitudeFunction {\n    Name: string;\n    GetAmplitude(min: Complex, max: Complex, fractal: IFractal): { min: Complex, max: Complex };\n}\n\nclass DefaultAmplitudeFunction implements IAmplitudeFunction {\n    Name: string = 'Fill';\n    GetAmplitude(min: Complex, max: Complex, fractal: IFractal): {min: Complex, max: Complex}\n    {\n        return {min, max};\n    }\n}\n\nclass FixedAspectAmplitudeFunction implements IAmplitudeFunction {\n    Name: string = 'Square';\n    GetAmplitude(min: Complex, max: Complex, fractal: IFractal): {min: Complex, max: Complex}\n    {\n        const range = Complex.subtract(max, min);\n        if(range.real === range.imaginary) return {min, max};\n        if(range.real > range.imaginary) {\n            var deltaSize = (range.real - range.imaginary)/2;\n            var delta = new Complex(0, deltaSize);\n\n            return { min: Complex.subtract(min, delta), max: Complex.add(max, delta) };\n        }\n        else {\n            var deltaSize = (range.imaginary - range.real)/2;\n            var delta = new Complex(deltaSize, 0);\n\n            return { min: Complex.subtract(min, delta), max: Complex.add(max, delta) };\n        }\n    }\n}\n\nclass AbsoluteAmplitudeFunction implements IAmplitudeFunction {\n    Name: string = 'Absolute';\n    GetAmplitude(min: Complex, max: Complex, fractal: IFractal): {min: Complex, max: Complex}\n    {\n        return {\n            min: new Complex(-fractal.MaxAmplitude, -fractal.MaxAmplitude),\n            max: new Complex(fractal.MaxAmplitude, fractal.MaxAmplitude)\n        };\n    }\n}\n\nconst AllAspectFunctions = [ new DefaultAmplitudeFunction(), new FixedAspectAmplitudeFunction(), new AbsoluteAmplitudeFunction() ];\nexport default AllAspectFunctions;","import { start } from \"repl\";\nimport { ResizeCanvas } from \"../common/CanvasHelpers\";\nimport { Complex } from \"../common/Complex\";\nimport { IAmplitudeFunction } from \"./AmplitudeMode\";\nimport { IFractal } from \"./Fractals/IFractal\";\n\nconst sampleRate = 8820; // 44100;\nconst upsampleRate = 8820;\nconst sampleTimeSeconds = 1;\nconst GAIN = 0.3;\n\nexport default class FractalAudioPlayer {\n    private ctx: CanvasRenderingContext2D;\n    private currentAudio: PlayingAudio;\n    private audio: AudioContext;\n    private gain: GainNode;\n\n    constructor(private canvas: HTMLCanvasElement, private amplitude: IAmplitudeFunction)\n    {\n        ResizeCanvas(canvas, canvas.clientWidth, canvas.clientHeight);\n        this.ctx = canvas.getContext('2d');\n        this.audio = new AudioContext();\n        this.gain = this.audio.createGain();\n        this.gain.gain.value = GAIN;\n        this.gain.connect(this.audio.destination);\n    }\n\n    public Cleanup() {\n        this.audio.close();\n    }\n\n    public Play(point: Complex, fractal: IFractal){\n        this.currentAudio?.stop();\n        this.currentAudio = new PlayingAudio(this.audio, point, fractal, this.amplitude);\n        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n        this.ctx.strokeStyle = 'red';\n\n        this.currentAudio.start(this.gain);\n\n        this.ctx.beginPath();\n        const range = Complex.add(this.currentAudio.maxBounds, Complex.negate(this.currentAudio.minBounds));\n        for(let i = 0; i < this.currentAudio.arr.length; i++) {\n            const xp = (this.currentAudio.arr[i].real - this.currentAudio.minBounds.real) / range.real;\n            const yp = (this.currentAudio.arr[i].imaginary - this.currentAudio.minBounds.imaginary) / range.imaginary ;\n            \n            const tgtX = xp * this.canvas.width;\n            const tgtY = yp * this.canvas.height;\n            if(i === 0) this.ctx.moveTo(tgtX, tgtY);\n            else this.ctx.lineTo(tgtX, tgtY);\n        }\n        this.ctx.stroke();\n    }\n}\n\nclass PlayingAudio {\n    arr: Complex[];\n    minBounds: Complex;\n    maxBounds: Complex;\n    source: AudioBufferSourceNode;\n    constructor(private audio: AudioContext, private point: Complex, private fractal: IFractal, private amplitude: IAmplitudeFunction) {\n        this.arr = new Array(sampleRate * sampleTimeSeconds);\n\n        const init = point;\n        let z = fractal.Init(init);\n        this.minBounds = new Complex(Infinity,Infinity);\n        this.maxBounds = new Complex(-Infinity,-Infinity);\n        for(let i = 0; i < this.arr.length; i++) {\n            z = fractal.Iterate(z, init);\n            this.arr[i] = new Complex(z.real, z.imaginary);\n            this.minBounds.real = Math.min(this.minBounds.real, z.real);\n            this.minBounds.imaginary = Math.min(this.minBounds.imaginary, z.imaginary);\n            \n            this.maxBounds.real = Math.max(this.maxBounds.real, z.real);\n            this.maxBounds.imaginary = Math.max(this.maxBounds.imaginary, z.imaginary);\n        }\n\n        const result = amplitude.GetAmplitude(this.minBounds, this.maxBounds, fractal);\n        this.minBounds = result.min;\n        this.maxBounds = result.max;\n    }\n\n    start(tgt: GainNode) {\n        const buffer = this.audio.createBuffer(2, upsampleRate * sampleTimeSeconds, upsampleRate);\n        const source = this.audio.createBufferSource();\n\n        const channelData = [buffer.getChannelData(0), buffer.getChannelData(1)];\n        const range = Complex.add(this.maxBounds, Complex.negate(this.minBounds));\n        for(let i = 0; i < channelData[0].length; i++) {\n\n            const index = (i * sampleRate)/upsampleRate;\n            const prev = Math.max(0, Math.floor(index));\n            const next = Math.min(this.arr.length - 1, Math.ceil(index));\n            const percent = index % 1;\n\n            const interpReal = upsampleRate != sampleRate ? interp(this.arr[prev].real, this.arr[next].real, percent) : this.arr[prev].real;\n            const interpImaginary = upsampleRate != sampleRate ? interp(this.arr[prev].imaginary, this.arr[next].imaginary, percent) : this.arr[prev].imaginary;\n\n            const xp = (interpReal - this.minBounds.real) / range.real;\n            const yp = (interpImaginary - this.minBounds.imaginary) / range.imaginary;\n \n            channelData[0][i] = xp * 2 - 1; \n            channelData[1][i] = yp * 2 - 1;\n        }\n\n        source.buffer = buffer;\n\n        source.connect(tgt);\n        source.start();\n\n        this.source = source;\n    }\n\n    stop() {\n        this.source?.stop();\n    }\n}\n\n\nfunction interp(prev: number, next: number, perc: number)\n{\n    perc = (-Math.cos(perc) + 1) / 2;\n    return prev * (1-perc) + next * perc;\n}","import { Complex } from \"../../common\";\nimport { IFractal } from \"./IFractal\";\n\nclass BurningShip implements IFractal\n{\n    Name: string = 'Burning Ship';\n    ShaderCode: string = `\n    vec2 init_fractal(vec2 coords) {\n        return vec2(0,0);\n    }\n\n    vec2 step_fractal(vec2 v, vec2 c) {\n        float tx = v.x * v.x - v.y * v.y - c.x;\n        float ty = 2.0 * abs(v.x * v.y) - c.y;\n        return vec2(tx, ty);\n    }\n    `;\n\n    MaxAmplitude: number = 16;\n\n    Init (c: Complex):Complex{\n        return c;\n    }\n\n    Iterate(z: Complex, c: Complex): Complex\n    {\n        const tx = z.real * z.real - z.imaginary * z.imaginary - c.real;\n        const ty = 2 * Math.abs(z.real * z.imaginary) - c.imaginary;\n        return new Complex(tx, ty);\n    }\n}\n\nconst burningShip = new BurningShip();\nexport default burningShip;","import { Complex } from \"../../common\";\nimport { IFractal } from \"./IFractal\";\n\nclass FeatherFractal implements IFractal\n{\n    Name: string = 'Feather';\n    ShaderCode: string = `\n    vec2 init_fractal(vec2 coords) {\n        return coords;\n    }\n\n    vec2 step_fractal(vec2 v, vec2 c) {\n        vec2 denom = scalar_mult(v, v);\n        denom.x += 1.0;\n        vec2 num = cplx_mult(cplx_mult(v, v), v);\n        vec2 result = cplx_div(num, denom);\n        return result + c;\n    }\n    `;\n\n    MaxAmplitude: number = 32;\n\n    Init (c: Complex):Complex{\n        return c;\n    }\n\n    Iterate(z: Complex, c: Complex): Complex\n    {\n        return Complex.div(\n            Complex.mult(z, z).multiplyWith(z),\n            Complex.scalarMultiply(z, z).addWith(new Complex(1, 0))\n        ).addWith(c);\n    }\n}\n\nconst featherFractal = new FeatherFractal();\nexport default featherFractal;","import { Complex } from \"../../common\";\nimport { IFractal } from \"./IFractal\";\n\nclass Mandelbrot implements IFractal\n{\n    Name: string = 'Mandelbrot';\n    ShaderCode: string = `\n    vec2 init_fractal(vec2 coords) {\n        return coords;\n    }\n\n    vec2 step_fractal(vec2 v, vec2 c) {\n        return cplx_mult(v, v) + c;\n    }\n    `;\n\n    MaxAmplitude: number = 2;\n\n    Init (c: Complex):Complex{\n        return c;\n    }\n\n    Iterate(z: Complex, c: Complex): Complex\n    {\n        return Complex.mult(z, z).addWith(c);\n    }\n}\n\nconst mandelbrot = new Mandelbrot();\nexport default mandelbrot;","import { Complex } from \"../../common\";\nimport { IFractal } from \"./IFractal\";\n\nclass SqureFractal implements IFractal\n{\n    Name: string = 'Square';\n    ShaderCode: string = `\n    vec2 init_fractal(vec2 coords) {\n        return coords;\n    }\n\n    vec2 step_fractal(vec2 v, vec2 c) {\n        float dotz = dot(v, v);\n        vec2 scalarc = scalar_mult(c, c);\n        return v * dotz - cplx_mult(v, scalarc);\n    }\n    `;\n\n    MaxAmplitude: number = 32;\n\n    Init (c: Complex):Complex{\n        return c;\n    }\n\n    Iterate(z: Complex, c: Complex): Complex\n    {\n        const dotz = z.absSq();\n        const dotc = Complex.scalarMultiply(c, c);\n        return Complex.subtract(\n            Complex.scalarMultiply(z, dotz, dotz),\n            Complex.mult(c, dotc)\n        );\n    }\n}\n\nconst squareFractal = new SqureFractal();\nexport default squareFractal;","import { Range, Range2d } from \"../common\";\nimport * as GLSL from \"../common/3d/GlslHelpers\";\nimport { ResizeCanvas } from \"../common/CanvasHelpers\";\nimport Point from \"../common/position/Point\";\nimport Rect from \"../common/position/Rectangle\";\nimport { IColorFunction } from \"./ColorFunctions/IColorFunction\";\nimport { IFractal } from \"./Fractals/IFractal\";\nimport { CreateShaderCode } from \"./ShaderCode\";\n\nconst SCROLL_DIV = 8;\nconst SCROLL_POW = 1.1;\n\nexport default class GlslFrameRenderer {\n    protected gl: WebGLRenderingContext;\n    protected program: WebGLProgram;\n    protected buffer: WebGLBuffer;\n\n    private cursor_anchor: Point | null;\n    private mm_down: boolean;\n\n    protected canvasRange: Range2d;\n    protected windowRange: Range2d;\n\n    private fragment_code:string;\n\n    private touch_anchors: { [key: number]: Point }\n\n    constructor(private canvas: HTMLCanvasElement, private fractal: IFractal, private color: IColorFunction, private bounds: { x: number, y: number, w: number, h: number}, private onMiddleClick?: (pt: Point) => void) {\n        ResizeCanvas(canvas, canvas.clientWidth, canvas.clientHeight);\n        this.cursor_anchor = null;\n        this.mm_down = false;\n        this.gl = canvas.getContext('webgl');\n        this.touch_anchors = {};\n        \n        this.canvasRange = new Range2d(new Range(0, canvas.clientWidth), new Range(0, canvas.clientHeight));\n        this.windowRange = new Range2d(new Range(-1, 1), new Range(-1, (canvas.height / canvas.width)));\n\n        this.fragment_code = CreateShaderCode(fractal, color);\n        this.init();\n    }\n\n    init() {\n        this.gl.clearColor(0.0, 0.0, 0.0, 1.0);\n        this.gl.clear(this.gl.COLOR_BUFFER_BIT);\n        this.initProgram();\n    }\n\n    initProgram() {\n        this.program = GLSL.initShaderProgram(this.gl, GLSL.defaultVertexShader, this.fragment_code);\n        this.buffer = GLSL.fragmentShaderOnlyInitBuffer(this.gl);\n    }\n\n    run() {\n        this.renderFrame();\n\n        this.canvas.addEventListener('mousedown', e => {\n            if(e.button === 0) {\n                this.cursor_anchor = new Point(e.offsetX, e.offsetY);\n            }\n            else if(e.button === 1) {\n                this.mm_down = true;\n                let perc = this.canvasRange.GetPercentage(e.offsetX, e.offsetY);\n                perc = this.windowRange.GetValue(perc.x, 1-perc.y);\n                if(this.onMiddleClick !== undefined) {\n                    this.onMiddleClick(new Point(perc.x, perc.y));\n                }\n            }\n            e.preventDefault();\n        });\n        this.canvas.addEventListener('mouseup', e => {\n            if(e.button === 0)\n                this.cursor_anchor = null;\n            else if(e.button === 1)\n                this.mm_down = false;\n            e.preventDefault();\n        });\n        this.canvas.addEventListener('mousemove', e => {\n            if(this.cursor_anchor != null) {\n                const dx = e.offsetX - this.cursor_anchor.x;\n                const dy = e.offsetY - this.cursor_anchor.y;\n                this.panCameraByScreenDelta(new Point(dx, dy));\n                this.cursor_anchor = new Point(e.offsetX, e.offsetY);\n                this.renderFrame();\n                e.preventDefault();\n            }\n            if(this.mm_down && this.onMiddleClick !== undefined){\n                let perc = this.canvasRange.GetPercentage(e.offsetX, e.offsetY);\n                perc = this.windowRange.GetValue(perc.x, 1-perc.y);\n                this.onMiddleClick(new Point(perc.x, perc.y));\n            }\n        });\n        this.canvas.addEventListener('wheel', e => {\n            const scalePercentage = e.deltaY / SCROLL_DIV;\n            const scalePerc = Math.pow(SCROLL_POW, scalePercentage);\n            const perc = this.canvasRange.GetPercentage(e.offsetX, e.offsetY);\n\n            this.windowRange.AspectScale(scalePerc, perc.x, 1-perc.y);\n            this.renderFrame();\n            e.preventDefault();\n        });\n        this.canvas.addEventListener('touchstart', ev => { \n            if(ev.targetTouches.length >= 3 || ev.targetTouches.length === 0) return;\n            for(let i = 0; i < ev.targetTouches.length; i++){\n                const touch = ev.targetTouches.item(i);\n                this.touch_anchors[touch.identifier] = touchOffset(touch);\n            }\n            ev.preventDefault();\n        });\n        this.canvas.addEventListener('touchmove', ev => {\n            if(ev.touches.length >= 3 || ev.touches.length === 0) return;\n            const moves: [Point, Point][] = [];\n            for(let i = 0; i < ev.targetTouches.length; i++){\n                const touch = ev.targetTouches.item(i);\n                const pos = touchOffset(touch);\n                const oldPos = this.touch_anchors[touch.identifier];\n                if(oldPos === undefined) return;\n                moves.push([oldPos, pos]);\n                this.touch_anchors[touch.identifier] = pos;\n            }\n\n            if(moves.length === 1) {\n                // Just pan the camera\n                this.panCameraByScreenDelta(Point.subtract(moves[0][1], moves[0][0]));\n            }\n            else if(moves.length === 2) {\n                // Average the start + End positions to find the move amt\n                const dragStart = Point.Multiply(Point.add(moves[0][0], moves[1][0]), 0.5, 0.5);\n                const dragEnd = Point.Multiply(Point.add(moves[0][1], moves[1][1]), 0.5, 0.5);\n                const worldPos = this.panCameraByScreenDelta(dragEnd.SubtractWith(dragStart));\n                const startDist = Point.subtract(moves[0][0], moves[1][0]).Length();\n                const endDist = Point.subtract(moves[0][1], moves[1][1]).Length();\n                const scaleAmt = startDist / endDist;\n                this.windowRange.AspectScale(scaleAmt, worldPos.x, 1-worldPos.y);\n            }\n\n            this.renderFrame();\n            ev.preventDefault();\n        });\n        this.canvas.addEventListener('touchend', ev => {\n            this.touch_anchors = {};\n            ev.preventDefault();\n        });\n        this.canvas.addEventListener('touchcancel', ev => {\n            this.touch_anchors = {};\n            ev.preventDefault();\n        });\n    }\n\n    private panCameraByScreenDelta(delta: Point) {\n        const perc = this.canvasRange.GetPercentage(delta.x, delta.y);\n        this.windowRange.ShiftByPercentage(-perc.x, perc.y);\n        return perc;\n    }\n\n    renderFrame() {\n        GLSL.fragmentShaderOnlyDraw(this.gl, this.program, this.buffer, gl => {\n            gl.uniform1f(gl.getUniformLocation(this.program, 'MAX_ABSSQ'), this.fractal.MaxAmplitude);\n            gl.uniform2fv(gl.getUniformLocation(this.program, 'window_pos'), [this.windowRange.xRange.min, this.windowRange.yRange.min]);\n            gl.uniform2fv(gl.getUniformLocation(this.program, 'window_size'), [this.windowRange.xRange.Length(), this.windowRange.yRange.Length()]);\n        });\n    }\n\n    cleanup() {\n        \n    }\n}\n\nfunction touchOffset(touch: Touch): Point {\n    const tgt = (touch.target as HTMLElement).getBoundingClientRect();\n    return new Point(touch.pageX - tgt.left, touch.pageY - tgt.top);\n}","import { IColorFunction } from \"./ColorFunctions/IColorFunction\";\nimport { IFractal } from \"./Fractals/IFractal\";\n\nexport function CreateShaderCode(fractal: IFractal, color: IColorFunction): string {\n    return GENERAL_SHADER\n        .replace(\"[[[FRACTAL_CODE]]]\", fractal.ShaderCode)\n        .replace(\"[[[COLOR_CODE]]]\", color.shaderFunction);;\n}\n\nexport const GENERAL_SHADER = `\nprecision highp float;\nvarying vec3 vPos;\nuniform vec2 window_pos;\nuniform vec2 window_size;\nuniform float MAX_ABSSQ;\n\nconst int MAX_ITER = 256;\n\nvec2 cplx_mult(vec2 a, vec2 b) {\n    return vec2(a.x * b.x - a.y * b.y, a.x * b.y + a.y * b.x);\n}\n\nvec2 cplx_div(vec2 a, vec2 b) {\n    float denom = dot(b, b);\n    return vec2 (\n        (a.x * b.x + a.y * b.y) / denom,\n        (a.y * b.x - a.x * b.y) / denom \n    );\n}\n\nvec2 scalar_mult(vec2 a, vec2 b) {\n    return vec2( a.x * b.x, a.y * b.y);\n}\n\nfloat cplx_abssq(vec2 v) {\n    return dot(v, v);\n}\n\n[[[FRACTAL_CODE]]]\n\nfloat calcIterations(vec2 coords) {\n    vec2 roll = init_fractal(coords);\n    for(int iter = 0; iter < MAX_ITER; iter++) {\n        roll = step_fractal(roll, coords);\n        if (cplx_abssq(roll) >= MAX_ABSSQ) {\n            return float(iter)/float(MAX_ITER);\n        }\n    }\n    return 1.0;\n}\n\n[[[COLOR_CODE]]]\n\nvoid main() {\n    vec2 adjpos = vPos.xy;\n    adjpos += 1.0;\n    adjpos /= 2.0;\n    // adjpos is now 0, 1\n    // Convert that to world-space\n    adjpos = window_pos + adjpos * window_size;\n\n    float mb_perc = calcIterations(adjpos);\n    gl_FragColor = vec4(floatToColor(mb_perc), 1.0);\n}`;","import { Complex, Range, Range2d } from \"../common\";\nimport * as GLSL from \"../common/3d/GlslHelpers\";\nimport { ResizeCanvas } from \"../common/CanvasHelpers\";\nimport Point from \"../common/position/Point\";\nimport { IColorFunction } from \"./ColorFunctions/IColorFunction\";\nimport FractalAudioPlayer from \"./FractalAudioPlayer\";\nimport { IFractal } from \"./Fractals/IFractal\";\nimport GlslFrameRenderer from \"./GlslFrameRenderer\";\nimport { CreateShaderCode } from \"./ShaderCode\";\n\nexport default class RendererWrapperComponent {\n    private mandelbrot: GlslFrameRenderer;\n\n    constructor(private canvas: HTMLCanvasElement, fractal: IFractal, private colorFunction: IColorFunction, private audioPlayer: FractalAudioPlayer) {\n\n        this.mandelbrot = new GlslFrameRenderer(canvas, fractal, colorFunction, { x: -2, y: -2, w: 4, h:4 }, (jpt) => {\n            this.playSound(jpt, fractal);\n        });\n        this.mandelbrot.run();\n    }\n\n    cleanup() {\n        this.mandelbrot.cleanup();\n    }\n\n    playSound(pt: Point, fractal: IFractal)\n    {\n        this.audioPlayer.Play(new Complex(pt.x, pt.y), fractal);\n    }\n}","import * as React from 'react';\nimport AllAmplitudeFunctions, { IAmplitudeFunction } from '../../../projects/glsl-fracaudio/AmplitudeMode';\nimport fireColor from '../../../projects/glsl-fracaudio/ColorFunctions/FireColor';\nimport grayscaleColor from '../../../projects/glsl-fracaudio/ColorFunctions/GrayscaleColor';\nimport hueColor from '../../../projects/glsl-fracaudio/ColorFunctions/HueColor';\nimport paperColor from '../../../projects/glsl-fracaudio/ColorFunctions/PaperColor';\nimport { IColorFunction } from '../../../projects/glsl-fracaudio/ColorFunctions/IColorFunction';\nimport FractalAudioPlayer from '../../../projects/glsl-fracaudio/FractalAudioPlayer';\nimport burningShip from '../../../projects/glsl-fracaudio/Fractals/BurningShip';\nimport featherFractal from '../../../projects/glsl-fracaudio/Fractals/Feather';\nimport { IFractal } from '../../../projects/glsl-fracaudio/Fractals/IFractal';\nimport mandelbrot from '../../../projects/glsl-fracaudio/Fractals/Mandelbrot';\nimport squareFractal from '../../../projects/glsl-fracaudio/Fractals/Square';\nimport RendererWrapperComponent from '../../../projects/glsl-fracaudio/RendererWrapperComponent';\nimport { ObjDropdownComponent } from '../../common/ObjDropdownComponent';\n\nconst fractals: IFractal[] = [\n    mandelbrot,\n    burningShip,\n    featherFractal,\n    squareFractal\n];\nconst colors: IColorFunction[] = [\n    grayscaleColor,\n    fireColor,\n    hueColor,\n    paperColor\n];\n\nexport default function GlslFractalAudioComponent() {\n    const canvas = React.useRef<HTMLCanvasElement>();\n    const overlayCanvas = React.useRef<HTMLCanvasElement>();\n    const [frac, setFrac] = React.useState<IFractal>(mandelbrot);\n    const [amplitude, setAmplitude] = React.useState<IAmplitudeFunction>(AllAmplitudeFunctions[0]);\n    const [color, setColor] = React.useState<IColorFunction>(fireColor);\n\n    React.useEffect(() => {\n        const audio = new FractalAudioPlayer(overlayCanvas.current, amplitude);\n        const renderer = new RendererWrapperComponent(canvas.current, frac, color, audio);\n        return () => \n        {\n            renderer.cleanup();\n            audio.Cleanup();\n        }\n    }, [canvas, frac, amplitude, color]);\n\n\n    return <div className='conway conway_body full_body'>\n        <div style={{ width: '80%', height: '100%', position: 'absolute' }}>\n            <canvas ref={canvas} style={{ position: 'absolute', width: '100%', height: '100%', top:0, left:0 }}></canvas>\n            <canvas ref={overlayCanvas} style={{ position: 'absolute', width: '100%', height: '100%', pointerEvents: 'none', top:0, left:0}}></canvas>\n        </div>\n        <div style={{ width: '20%', height: '100%', background: '#333', position: 'absolute', left: '80%' }}>\n            <label>Fractal:</label>\n            <ObjDropdownComponent options={fractals} value={frac} getName={f => f.Name} onChange={f => setFrac(f)} />\n            <label>Color:</label>\n            <ObjDropdownComponent options={colors} value={color} getName={c => c.Name} onChange={c => setColor(c)} />\n            <label>Amplitude Function:</label>\n            <ObjDropdownComponent options={AllAmplitudeFunctions} value={amplitude} getName={a => a.Name} onChange={a => setAmplitude(a)} />\n\n            <div style={{ bottom: 0, position: 'absolute', color: '#999', textAlign: 'center', width: '100%' }}>Inspired by <a href='https://www.youtube.com/watch?v=GiAj9WW1OfQ'>this video</a></div>\n        </div>\n    </div>;\n}"],"names":["hasOwn","hasOwnProperty","classNames","classes","i","arguments","length","arg","argType","push","Array","isArray","inner","apply","key","call","join","module","exports","default","obj","_react","__esModule","_typeof","cache","_getRequireWildcardCache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","prototype","desc","set","_interopRequireWildcard","_classnames","WeakMap","Symbol","iterator","constructor","_defineProperty","value","enumerable","configurable","writable","_defineProperties","target","props","descriptor","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_assertThisInitialized","self","ReferenceError","_setPrototypeOf","p","DEFAULT_PLACEHOLDER_STRING","Dropdown","_Component","_this","instance","Constructor","TypeError","_classCallCheck","this","_possibleConstructorReturn","state","selected","parseValue","options","label","placeholder","isOpen","dropdownRef","createRef","mounted","handleDocumentClick","bind","fireChangeEvent","protoProps","subClass","superClass","create","_inherits","prevProps","setState","document","addEventListener","removeEventListener","event","onFocus","type","button","stopPropagation","preventDefault","disabled","option","num","match","items","filter","item","newState","onChange","_classes","isSelected","concat","baseClassName","className","optionClass","createElement","onMouseDown","setValue","onClick","role","_this2","_this$props","ops","map","groupTitle","name","_options","renderOption","tabIndex","current","contains","_classNames","_classNames2","_classNames3","_classNames4","_classNames5","_this$props2","controlClassName","placeholderClassName","menuClassName","arrowClassName","arrowClosed","arrowOpen","disabledClass","placeHolderValue","dropdownClass","controlClass","placeholderClass","isValueSelected","menuClass","arrowClass","menu","buildMenu","ref","handleMouseDown","onTouchEnd","Component","defaultProps","_default","loadShader","gl","source","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","console","error","alert","VERTEX_SHADER","FRAGMENT_SHADER","getShaderInfoLog","deleteShader","initShaderProgram","vertexShaderSource","fragmentShaderSource","vertexShader","fragmentShader","shaderProgram","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","shaderDrawMultiple","positionBuffer","positionNumComponents","renderMode","drawCounts","getGeom","bindUniforms","clearColor","clearDepth","enable","DEPTH_TEST","depthFunc","LEQUAL","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","FLOAT","normalize","stride","offset","bindBuffer","ARRAY_BUFFER","vertexAttribPointer","getAttribLocation","enableVertexAttribArray","useProgram","bufferOffset","bufferCount","drawArrays","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","fragmentShaderOnlyDraw","numComponents","fragmentShaderOnlyInitBuffer","left","top","right","bottom","createBuffer","l","r","t","b","positions","bufferData","Float32Array","STATIC_DRAW","initGLBuffer","components","defaultVertexShader","defaultWebGl2VertexShader","Point","x","y","static","angle","distance","Math","cos","sin","LengthSq","Dot","Length","sqrt","Clone","Negate","NegateInPlace","p1","p2","DotWith","other","len","Multiply","Direction","atan2","Truncate","trunc","AddWith","nx","ny","splitArgs","MultWith","undefined","splitArgsOrSingle","SubtractWith","DivideWith","Equals","src","a","sy","min","max","pts","add","Bezier","slice","rotate","theta","fromAngle","Name","shaderFunction","ObjDropdownComponent","names","getName","chng","find","v","GetAmplitude","fractal","range","real","imaginary","deltaSize","delta","MaxAmplitude","FractalAudioPlayer","canvas","amplitude","clientWidth","clientHeight","ctx","getContext","audio","AudioContext","gain","createGain","connect","destination","Cleanup","close","Play","point","currentAudio","stop","PlayingAudio","clearRect","width","height","strokeStyle","start","beginPath","Complex","maxBounds","minBounds","arr","xp","yp","tgtX","tgtY","moveTo","lineTo","stroke","sampleRate","init","z","Init","Infinity","Iterate","result","tgt","buffer","upsampleRate","createBufferSource","channelData","getChannelData","index","prev","floor","interpReal","ceil","interpImaginary","ShaderCode","c","tx","ty","abs","multiplyWith","addWith","dotz","absSq","dotc","GlslFrameRenderer","color","bounds","onMiddleClick","cursor_anchor","mm_down","touch_anchors","canvasRange","windowRange","fragment_code","replace","CreateShaderCode","initProgram","program","run","renderFrame","e","offsetX","offsetY","perc","GetPercentage","GetValue","dx","dy","panCameraByScreenDelta","scalePercentage","deltaY","scalePerc","pow","AspectScale","ev","targetTouches","touch","identifier","touchOffset","touches","moves","pos","oldPos","dragStart","dragEnd","worldPos","scaleAmt","ShiftByPercentage","uniform1f","getUniformLocation","uniform2fv","xRange","yRange","cleanup","getBoundingClientRect","pageX","pageY","RendererWrapperComponent","colorFunction","audioPlayer","mandelbrot","w","h","jpt","playSound","pt","fractals","colors","GlslFractalAudioComponent","overlayCanvas","frac","setFrac","setAmplitude","setColor","renderer","style","position","pointerEvents","background","f","textAlign","href"],"sourceRoot":""}