/*! For license information please see 582.bundle.js.LICENSE.txt */
(self.webpackChunktrading_game=self.webpackChunktrading_game||[]).push([[582],{4403:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)&&n.length){var s=a.apply(null,n);s&&e.push(s)}else if("object"===i)for(var o in n)r.call(n,o)&&n[o]&&e.push(o)}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(n=function(){return a}.apply(t,[]))||(e.exports=n)}()},8167:(e,t,n)=>{"use strict";t.Z=void 0;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}(n(3804)),i=(r=n(4403))&&r.__esModule?r:{default:r};function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f="Select...",p=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?h(e):t}(this,u(t).call(this,e))).state={selected:n.parseValue(e.value,e.options)||{label:void 0===e.placeholder?f:e.placeholder,value:""},isOpen:!1},n.dropdownRef=(0,a.createRef)(),n.mounted=!0,n.handleDocumentClick=n.handleDocumentClick.bind(h(n)),n.fireChangeEvent=n.fireChangeEvent.bind(h(n)),n}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),n=t,(r=[{key:"componentDidUpdate",value:function(e){if(this.props.value!==e.value)if(this.props.value){var t=this.parseValue(this.props.value,this.props.options);t!==this.state.selected&&this.setState({selected:t})}else this.setState({selected:{label:void 0===this.props.placeholder?f:this.props.placeholder,value:""}})}},{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleDocumentClick,!1),document.addEventListener("touchend",this.handleDocumentClick,!1)}},{key:"componentWillUnmount",value:function(){this.mounted=!1,document.removeEventListener("click",this.handleDocumentClick,!1),document.removeEventListener("touchend",this.handleDocumentClick,!1)}},{key:"handleMouseDown",value:function(e){this.props.onFocus&&"function"==typeof this.props.onFocus&&this.props.onFocus(this.state.isOpen),"mousedown"===e.type&&0!==e.button||(e.stopPropagation(),e.preventDefault(),this.props.disabled||this.setState({isOpen:!this.state.isOpen}))}},{key:"parseValue",value:function(e,t){var n;if("string"==typeof e)for(var r=0,a=t.length;r<a;r++)if("group"===t[r].type){var i=t[r].items.filter((function(t){return t.value===e}));i.length&&(n=i[0])}else void 0!==t[r].value&&t[r].value===e&&(n=t[r]);return n||e}},{key:"setValue",value:function(e,t){var n={selected:{value:e,label:t},isOpen:!1};this.fireChangeEvent(n),this.setState(n)}},{key:"fireChangeEvent",value:function(e){e.selected!==this.state.selected&&this.props.onChange&&this.props.onChange(e.selected)}},{key:"renderOption",value:function(e){var t,n=e.value;void 0===n&&(n=e.label||e);var r=e.label||e.value||e,s=n===this.state.selected.value||n===this.state.selected,o=(c(t={},"".concat(this.props.baseClassName,"-option"),!0),c(t,e.className,!!e.className),c(t,"is-selected",s),t),l=(0,i.default)(o);return a.default.createElement("div",{key:n,className:l,onMouseDown:this.setValue.bind(this,n,r),onClick:this.setValue.bind(this,n,r),role:"option","aria-selected":s?"true":"false"},r)}},{key:"buildMenu",value:function(){var e=this,t=this.props,n=t.options,r=t.baseClassName,i=n.map((function(t){if("group"===t.type){var n=a.default.createElement("div",{className:"".concat(r,"-title")},t.name),i=t.items.map((function(t){return e.renderOption(t)}));return a.default.createElement("div",{className:"".concat(r,"-group"),key:t.name,role:"listbox",tabIndex:"-1"},n,i)}return e.renderOption(t)}));return i.length?i:a.default.createElement("div",{className:"".concat(r,"-noresults")},"No options found")}},{key:"handleDocumentClick",value:function(e){this.mounted&&(this.dropdownRef.current.contains(e.target)||this.state.isOpen&&this.setState({isOpen:!1}))}},{key:"isValueSelected",value:function(){return"string"==typeof this.state.selected||""!==this.state.selected.value}},{key:"render",value:function(){var e,t,n,r,s,o=this.props,l=o.baseClassName,u=o.controlClassName,h=o.placeholderClassName,d=o.menuClassName,f=o.arrowClassName,p=o.arrowClosed,m=o.arrowOpen,v=o.className,y=this.props.disabled?"Dropdown-disabled":"",g="string"==typeof this.state.selected?this.state.selected:this.state.selected.label,x=(0,i.default)((c(e={},"".concat(l,"-root"),!0),c(e,v,!!v),c(e,"is-open",this.state.isOpen),e)),b=(0,i.default)((c(t={},"".concat(l,"-control"),!0),c(t,u,!!u),c(t,y,!!y),t)),w=(0,i.default)((c(n={},"".concat(l,"-placeholder"),!0),c(n,h,!!h),c(n,"is-selected",this.isValueSelected()),n)),_=(0,i.default)((c(r={},"".concat(l,"-menu"),!0),c(r,d,!!d),r)),A=(0,i.default)((c(s={},"".concat(l,"-arrow"),!0),c(s,f,!!f),s)),E=a.default.createElement("div",{className:w},g),C=this.state.isOpen?a.default.createElement("div",{className:_,"aria-expanded":"true"},this.buildMenu()):null;return a.default.createElement("div",{ref:this.dropdownRef,className:x},a.default.createElement("div",{className:b,onMouseDown:this.handleMouseDown.bind(this),onTouchEnd:this.handleMouseDown.bind(this),"aria-haspopup":"listbox"},E,a.default.createElement("div",{className:"".concat(l,"-arrow-wrapper")},m&&p?this.state.isOpen?m:p:a.default.createElement("span",{className:A}))),C)}}])&&l(n.prototype,r),t}(a.Component);p.defaultProps={baseClassName:"Dropdown"};var m=p;t.Z=m},3130:(e,t,n)=>{"use strict";function r(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)?r:(console.error(n),alert(`An error occurred compiling the ${t===e.VERTEX_SHADER?"vertex":t===e.FRAGMENT_SHADER?"fragment":""} shaders: `+e.getShaderInfoLog(r)),void e.deleteShader(r))}function a(e,t,n){const a=r(e,e.VERTEX_SHADER,t),i=r(e,e.FRAGMENT_SHADER,n),s=e.createProgram();if(e.attachShader(s,a),e.attachShader(s,i),e.linkProgram(s),e.getProgramParameter(s,e.LINK_STATUS))return s;alert("Unable to initialize the shader program: "+e.getProgramInfoLog(s))}function i(e,t,n,r,a,i,s,o){e.clearColor(0,0,0,1),e.clearDepth(1),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);{const a=e.FLOAT,i=!1,s=0,o=0;e.bindBuffer(e.ARRAY_BUFFER,n),e.vertexAttribPointer(e.getAttribLocation(t,"aVertexPosition"),r,a,i,s,o),e.enableVertexAttribArray(e.getAttribLocation(t,"aVertexPosition"))}e.useProgram(t);for(let t=0;t<i;t++){o(e,t);let{bufferOffset:n,bufferCount:r}=s(t);e.drawArrays("triangle"===a?e.TRIANGLES:"tristrip"===a?e.TRIANGLE_STRIP:e.TRIANGLE_FAN,n,r)}}function s(e,t,n,r){e.clearColor(0,0,0,1),e.clearDepth(1),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);{const r=2,a=e.FLOAT,i=!1,s=0,o=0;e.bindBuffer(e.ARRAY_BUFFER,n),e.vertexAttribPointer(e.getAttribLocation(t,"aVertexPosition"),r,a,i,s,o),e.enableVertexAttribArray(e.getAttribLocation(t,"aVertexPosition"))}e.useProgram(t),r(e),e.drawArrays(e.TRIANGLE_STRIP,0,4)}function o(e,t,n,r,a){const i=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,i);const s=null!=t?t:-1,o=null!=r?r:1,c=null!=n?n:-1,l=null!=a?a:1,u=[l,o,c,o,l,s,c,s];return e.bufferData(e.ARRAY_BUFFER,new Float32Array(u),e.STATIC_DRAW),i}function c(e,t){const n=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,n),e.bufferData(e.ARRAY_BUFFER,new Float32Array(t),e.STATIC_DRAW),n}n.d(t,{nr:()=>a,f:()=>i,os:()=>s,nW:()=>o,jK:()=>c,B_:()=>l});const l="attribute vec4 aVertexPosition;\nvarying vec3 vPos;\nvoid main() {\n  vPos = vec3(aVertexPosition.xy, 0.0);\n  gl_Position = aVertexPosition;\n}"},8785:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});class r{constructor(e,t){this.x=e,this.y=t}static zero(){return new r(0,0)}static fromAngle(e,t){return new r(Math.cos(e)*(null!=t?t:1),Math.sin(e)*(null!=t?t:1))}LengthSq(){return r.Dot(this,this)}Length(){return Math.sqrt(this.LengthSq())}Clone(){return new r(this.x,this.y)}Negate(){return new r(-this.x,-this.y)}NegateInPlace(){return this.x=-this.x,this.y=-this.y,this}static Dot(e,t){return e.x*t.x+e.y*t.y}DotWith(e){return r.Dot(this,e)}normalize(){let e=this.Length();return r.Multiply(this,1/e)}Direction(){return Math.atan2(this.y,this.x)}AddWith(e,t){const{x:n,y:r}=a(e,t);return this.x+=n,this.y+=r,this}MultWith(e,t){const{x:n,y:r}=function(e,t){return void 0===t?void 0!==e.x?{x:e.x,y:e.y}:{x:e,y:e}:{x:e,y:t}}(e,t);return this.x*=n,this.y*=r,this}SubtractWith(e,t){const{x:n,y:r}=a(e,t);return this.x-=n,this.y-=r,this}DivideWith(e,t){const{x:n,y:r}=a(e,t);return this.x/=n,this.y/=r,this}Equals(e){return this.x===e.x&&this.y===e.y}static add(e,t,n){const{x:i,y:s}=a(t,n);return new r(e.x+i,e.y+s)}static subtract(e,t,n){const{x:i,y:s}=a(t,n);return new r(e.x-i,e.y-s)}static Multiply(e,t,n){return void 0!==n?new r(e.x*t,e.y*n):void 0!==t.x?new r(e.x*t.x,e.y*t.y):new r(e.x*t,e.y*t)}static interpolate(e,t,n){return new r(e.x+(t.x-e.x)*n,e.y+(t.y-e.y)*n)}static componentMin(e,t){return e.x<=t.x&&e.y<=t.y?e:t.x<=e.x&&t.y<=e.y?t:new r(Math.min(e.x,t.x),Math.min(e.y,t.y))}static componentMax(e,t){return e.x>=t.x&&e.y>=t.y?e:t.x>=e.x&&t.y>=e.y?t:new r(Math.max(e.x,t.x),Math.max(e.y,t.y))}static Bezier(e,t){return 1===e.length?e[0]:2===e.length?r.add(r.Multiply(e[1],t),r.Multiply(e[0],1-t)):r.add(r.Multiply(r.Bezier(e.slice(1),t),t),r.Multiply(r.Bezier(e.slice(0,e.length-1),t),1-t))}rotate(e){const t=Math.atan2(this.y,this.x),n=this.Length();return r.fromAngle(t+e,n)}}function a(e,t){return void 0===t?{x:e.x,y:e.y}:{x:e,y:t}}},4077:(e,t,n)=>{"use strict";n.d(t,{f:()=>i});var r=n(3804),a=n(8167);function i(e){const t=e.options.map(e.getName);return r.createElement(a.Z,{options:t,value:e.getName(e.value),onChange:t=>e.onChange(e.options.find((n=>e.getName(n)===t.value)))})}},582:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>R});var r=n(3804),a=n(3123);const i=[new class{constructor(){this.Name="Fill"}GetAmplitude(e,t,n){return{min:e,max:t}}},new class{constructor(){this.Name="Square"}GetAmplitude(e,t,n){const r=a.Zz.subtract(t,e);if(r.real===r.imaginary)return{min:e,max:t};if(r.real>r.imaginary){var i=(r.real-r.imaginary)/2,s=new a.Zz(0,i);return{min:a.Zz.subtract(e,s),max:a.Zz.add(t,s)}}return i=(r.imaginary-r.real)/2,s=new a.Zz(i,0),{min:a.Zz.subtract(e,s),max:a.Zz.add(t,s)}}},new class{constructor(){this.Name="Absolute"}GetAmplitude(e,t,n){return{min:new a.Zz(-n.MaxAmplitude,-n.MaxAmplitude),max:new a.Zz(n.MaxAmplitude,n.MaxAmplitude)}}}],s=new class{constructor(){this.Name="Fire",this.shaderFunction="\nvec3 floatToColor(float perc) {\n    if(perc <= 0.5) {\n        return vec3(perc * 2.0, perc, 0.0);\n    }\n    perc = (perc - 0.5) * 2.0;\n    return vec3(1.0, 0.5 + perc / 2.0, perc);\n}\n    "}},o=new class{constructor(){this.Name="Grayscale",this.shaderFunction="\nvec3 floatToColor(float perc) {\n    return vec3(perc, perc, perc);\n}\n    "}},c=new class{constructor(){this.Name="Hue",this.shaderFunction="\n\nfloat fmod(float a, float b) {\n    return a - (b * floor(a/b));\n}\n\nfloat hsvComponentToRgb(vec3 hsv, float n) {\n    float k = fmod((n + hsv.x * 6.0), 6.0);\n    return hsv.z - hsv.z * hsv.y * max(min(min(k, 4.0-k),1.0), 0.0);\n}\n\nvec3 floatToColor(float perc) {\n    if(perc == 1.0) {\n        return vec3(0, 0, 0);\n    }\n    vec3 hsv = vec3(perc, 1.0, 1.0);\n    return vec3(\n        hsvComponentToRgb(hsv, 5.0),\n        hsvComponentToRgb(hsv, 3.0),\n        hsvComponentToRgb(hsv, 1.0)\n    );\n}\n    "}},l=new class{constructor(){this.Name="Paper",this.shaderFunction="\nvec3 floatToColor(float perc) {\n    if(perc == 1.0) {\n        return vec3(0, 0, 0);\n    }\n    return vec3(0.8, 0.8, 0.8) - (perc * 0.8);\n}\n    "}};var u=n(5901),h=n(9401);class d{constructor(e,t){this.canvas=e,this.amplitude=t,(0,u.f5)(e,e.clientWidth,e.clientHeight),this.ctx=e.getContext("2d"),this.audio=new AudioContext,this.gain=this.audio.createGain(),this.gain.gain.value=.3,this.gain.connect(this.audio.destination)}Cleanup(){this.audio.close()}Play(e,t){var n;null===(n=this.currentAudio)||void 0===n||n.stop(),this.currentAudio=new f(this.audio,e,t,this.amplitude),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.strokeStyle="red",this.currentAudio.start(this.gain),this.ctx.beginPath();const r=h.Z.add(this.currentAudio.maxBounds,h.Z.negate(this.currentAudio.minBounds));for(let e=0;e<this.currentAudio.arr.length;e++){const t=(this.currentAudio.arr[e].real-this.currentAudio.minBounds.real)/r.real,n=(this.currentAudio.arr[e].imaginary-this.currentAudio.minBounds.imaginary)/r.imaginary,a=t*this.canvas.width,i=n*this.canvas.height;0===e?this.ctx.moveTo(a,i):this.ctx.lineTo(a,i)}this.ctx.stroke()}}class f{constructor(e,t,n,r){this.audio=e,this.point=t,this.fractal=n,this.amplitude=r,this.arr=new Array(8820);const a=t;let i=n.Init(a);this.minBounds=new h.Z(1/0,1/0),this.maxBounds=new h.Z(-1/0,-1/0);for(let e=0;e<this.arr.length;e++)i=n.Iterate(i,a),this.arr[e]=new h.Z(i.real,i.imaginary),this.minBounds.real=Math.min(this.minBounds.real,i.real),this.minBounds.imaginary=Math.min(this.minBounds.imaginary,i.imaginary),this.maxBounds.real=Math.max(this.maxBounds.real,i.real),this.maxBounds.imaginary=Math.max(this.maxBounds.imaginary,i.imaginary);const s=r.GetAmplitude(this.minBounds,this.maxBounds,n);this.minBounds=s.min,this.maxBounds=s.max}start(e){const t=this.audio.createBuffer(2,8820,8820),n=this.audio.createBufferSource(),r=[t.getChannelData(0),t.getChannelData(1)],a=h.Z.add(this.maxBounds,h.Z.negate(this.minBounds));for(let e=0;e<r[0].length;e++){const t=8820*e/8820,n=Math.max(0,Math.floor(t)),i=(Math.min(this.arr.length-1,Math.ceil(t)),this.arr[n].real),s=this.arr[n].imaginary,o=(i-this.minBounds.real)/a.real,c=(s-this.minBounds.imaginary)/a.imaginary;r[0][e]=2*o-1,r[1][e]=2*c-1}n.buffer=t,n.connect(e),n.start(),this.source=n}stop(){var e;null===(e=this.source)||void 0===e||e.stop()}}const p=new class{constructor(){this.Name="Burning Ship",this.ShaderCode="\n    vec2 init_fractal(vec2 coords) {\n        return vec2(0,0);\n    }\n\n    vec2 step_fractal(vec2 v, vec2 c) {\n        float tx = v.x * v.x - v.y * v.y - c.x;\n        float ty = 2.0 * abs(v.x * v.y) - c.y;\n        return vec2(tx, ty);\n    }\n    ",this.MaxAmplitude=16}Init(e){return e}Iterate(e,t){const n=e.real*e.real-e.imaginary*e.imaginary-t.real,r=2*Math.abs(e.real*e.imaginary)-t.imaginary;return new a.Zz(n,r)}},m=new class{constructor(){this.Name="Feather",this.ShaderCode="\n    vec2 init_fractal(vec2 coords) {\n        return coords;\n    }\n\n    vec2 step_fractal(vec2 v, vec2 c) {\n        vec2 denom = scalar_mult(v, v);\n        denom.x += 1.0;\n        vec2 num = cplx_mult(cplx_mult(v, v), v);\n        vec2 result = cplx_div(num, denom);\n        return result + c;\n    }\n    ",this.MaxAmplitude=32}Init(e){return e}Iterate(e,t){return a.Zz.div(a.Zz.mult(e,e).multiplyWith(e),a.Zz.scalarMultiply(e,e).addWith(new a.Zz(1,0))).addWith(t)}},v=new class{constructor(){this.Name="Mandelbrot",this.ShaderCode="\n    vec2 init_fractal(vec2 coords) {\n        return coords;\n    }\n\n    vec2 step_fractal(vec2 v, vec2 c) {\n        return cplx_mult(v, v) + c;\n    }\n    ",this.MaxAmplitude=2}Init(e){return e}Iterate(e,t){return a.Zz.mult(e,e).addWith(t)}},y=new class{constructor(){this.Name="Square",this.ShaderCode="\n    vec2 init_fractal(vec2 coords) {\n        return coords;\n    }\n\n    vec2 step_fractal(vec2 v, vec2 c) {\n        float dotz = dot(v, v);\n        vec2 scalarc = scalar_mult(c, c);\n        return v * dotz - cplx_mult(v, scalarc);\n    }\n    ",this.MaxAmplitude=32}Init(e){return e}Iterate(e,t){const n=e.absSq(),r=a.Zz.scalarMultiply(t,t);return a.Zz.subtract(a.Zz.scalarMultiply(e,n,n),a.Zz.mult(t,r))}};var g=n(3130),x=n(8785);class b{constructor(e,t,n,r,i){this.canvas=e,this.fractal=t,this.color=n,this.bounds=r,this.onMiddleClick=i,(0,u.f5)(e,e.clientWidth,e.clientHeight),this.cursor_anchor=null,this.mm_down=!1,this.gl=e.getContext("webgl"),this.touch_anchors={},this.canvasRange=new a.gS(new a.e6(0,e.clientWidth),new a.e6(0,e.clientHeight)),this.windowRange=new a.gS(new a.e6(-1,1),new a.e6(-1,e.height/e.width)),this.fragment_code=function(e,t){return"\nprecision highp float;\nvarying vec3 vPos;\nuniform vec2 window_pos;\nuniform vec2 window_size;\nuniform float MAX_ABSSQ;\n\nconst int MAX_ITER = 256;\n\nvec2 cplx_mult(vec2 a, vec2 b) {\n    return vec2(a.x * b.x - a.y * b.y, a.x * b.y + a.y * b.x);\n}\n\nvec2 cplx_div(vec2 a, vec2 b) {\n    float denom = dot(b, b);\n    return vec2 (\n        (a.x * b.x + a.y * b.y) / denom,\n        (a.y * b.x - a.x * b.y) / denom \n    );\n}\n\nvec2 scalar_mult(vec2 a, vec2 b) {\n    return vec2( a.x * b.x, a.y * b.y);\n}\n\nfloat cplx_abssq(vec2 v) {\n    return dot(v, v);\n}\n\n[[[FRACTAL_CODE]]]\n\nfloat calcIterations(vec2 coords) {\n    vec2 roll = init_fractal(coords);\n    for(int iter = 0; iter < MAX_ITER; iter++) {\n        roll = step_fractal(roll, coords);\n        if (cplx_abssq(roll) >= MAX_ABSSQ) {\n            return float(iter)/float(MAX_ITER);\n        }\n    }\n    return 1.0;\n}\n\n[[[COLOR_CODE]]]\n\nvoid main() {\n    vec2 adjpos = vPos.xy;\n    adjpos += 1.0;\n    adjpos /= 2.0;\n    // adjpos is now 0, 1\n    // Convert that to world-space\n    adjpos = window_pos + adjpos * window_size;\n\n    float mb_perc = calcIterations(adjpos);\n    gl_FragColor = vec4(floatToColor(mb_perc), 1.0);\n}".replace("[[[FRACTAL_CODE]]]",e.ShaderCode).replace("[[[COLOR_CODE]]]",t.shaderFunction)}(t,n),this.init()}init(){this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.initProgram()}initProgram(){this.program=g.nr(this.gl,g.B_,this.fragment_code),this.buffer=g.nW(this.gl)}run(){this.renderFrame(),this.canvas.addEventListener("mousedown",(e=>{if(0===e.button)this.cursor_anchor=new x.Z(e.offsetX,e.offsetY);else if(1===e.button){this.mm_down=!0;let t=this.canvasRange.GetPercentage(e.offsetX,e.offsetY);t=this.windowRange.GetValue(t.x,1-t.y),void 0!==this.onMiddleClick&&this.onMiddleClick(new x.Z(t.x,t.y))}e.preventDefault()})),this.canvas.addEventListener("mouseup",(e=>{0===e.button?this.cursor_anchor=null:1===e.button&&(this.mm_down=!1),e.preventDefault()})),this.canvas.addEventListener("mousemove",(e=>{if(null!=this.cursor_anchor){const t=e.offsetX-this.cursor_anchor.x,n=e.offsetY-this.cursor_anchor.y;this.panCameraByScreenDelta(new x.Z(t,n)),this.cursor_anchor=new x.Z(e.offsetX,e.offsetY),this.renderFrame(),e.preventDefault()}if(this.mm_down&&void 0!==this.onMiddleClick){let t=this.canvasRange.GetPercentage(e.offsetX,e.offsetY);t=this.windowRange.GetValue(t.x,1-t.y),this.onMiddleClick(new x.Z(t.x,t.y))}})),this.canvas.addEventListener("wheel",(e=>{const t=e.deltaY/8,n=Math.pow(1.1,t),r=this.canvasRange.GetPercentage(e.offsetX,e.offsetY);this.windowRange.AspectScale(n,r.x,1-r.y),this.renderFrame(),e.preventDefault()})),this.canvas.addEventListener("touchstart",(e=>{if(!(e.targetTouches.length>=3||0===e.targetTouches.length)){for(let t=0;t<e.targetTouches.length;t++){const n=e.targetTouches.item(t);this.touch_anchors[n.identifier]=w(n)}e.preventDefault()}})),this.canvas.addEventListener("touchmove",(e=>{if(e.touches.length>=3||0===e.touches.length)return;const t=[];for(let n=0;n<e.targetTouches.length;n++){const r=e.targetTouches.item(n),a=w(r),i=this.touch_anchors[r.identifier];if(void 0===i)return;t.push([i,a]),this.touch_anchors[r.identifier]=a}if(1===t.length)this.panCameraByScreenDelta(x.Z.subtract(t[0][1],t[0][0]));else if(2===t.length){const e=x.Z.Multiply(x.Z.add(t[0][0],t[1][0]),.5,.5),n=x.Z.Multiply(x.Z.add(t[0][1],t[1][1]),.5,.5),r=this.panCameraByScreenDelta(n.SubtractWith(e)),a=x.Z.subtract(t[0][0],t[1][0]).Length()/x.Z.subtract(t[0][1],t[1][1]).Length();this.windowRange.AspectScale(a,r.x,1-r.y)}this.renderFrame(),e.preventDefault()})),this.canvas.addEventListener("touchend",(e=>{this.touch_anchors={},e.preventDefault()})),this.canvas.addEventListener("touchcancel",(e=>{this.touch_anchors={},e.preventDefault()}))}panCameraByScreenDelta(e){const t=this.canvasRange.GetPercentage(e.x,e.y);return this.windowRange.ShiftByPercentage(-t.x,t.y),t}renderFrame(){g.os(this.gl,this.program,this.buffer,(e=>{e.uniform1f(e.getUniformLocation(this.program,"MAX_ABSSQ"),this.fractal.MaxAmplitude),e.uniform2fv(e.getUniformLocation(this.program,"window_pos"),[this.windowRange.xRange.min,this.windowRange.yRange.min]),e.uniform2fv(e.getUniformLocation(this.program,"window_size"),[this.windowRange.xRange.Length(),this.windowRange.yRange.Length()])}))}cleanup(){}}function w(e){const t=e.target.getBoundingClientRect();return new x.Z(e.pageX-t.left,e.pageY-t.top)}class _{constructor(e,t,n,r){this.canvas=e,this.colorFunction=n,this.audioPlayer=r,this.mandelbrot=new b(e,t,n,{x:-2,y:-2,w:4,h:4},(e=>{this.playSound(e,t)})),this.mandelbrot.run()}cleanup(){this.mandelbrot.cleanup()}playSound(e,t){this.audioPlayer.Play(new a.Zz(e.x,e.y),t)}}var A=n(4077);const E=[v,p,m,y],C=[o,s,c,l];function R(){const e=r.useRef(),t=r.useRef(),[n,a]=r.useState(v),[o,c]=r.useState(i[0]),[l,u]=r.useState(s);return r.useEffect((()=>{const r=new d(t.current,o),a=new _(e.current,n,l,r);return()=>{a.cleanup(),r.Cleanup()}}),[e,n,o,l]),r.createElement("div",{className:"conway conway_body full_body"},r.createElement("div",{style:{width:"80%",height:"100%",position:"absolute"}},r.createElement("canvas",{ref:e,style:{position:"absolute",width:"100%",height:"100%",top:0,left:0}}),r.createElement("canvas",{ref:t,style:{position:"absolute",width:"100%",height:"100%",pointerEvents:"none",top:0,left:0}})),r.createElement("div",{style:{width:"20%",height:"100%",background:"#333",position:"absolute",left:"80%"}},r.createElement("label",null,"Fractal:"),r.createElement(A.f,{options:E,value:n,getName:e=>e.Name,onChange:e=>a(e)}),r.createElement("label",null,"Color:"),r.createElement(A.f,{options:C,value:l,getName:e=>e.Name,onChange:e=>u(e)}),r.createElement("label",null,"Amplitude Function:"),r.createElement(A.f,{options:i,value:o,getName:e=>e.Name,onChange:e=>c(e)}),r.createElement("div",{style:{bottom:0,position:"absolute",color:"#999",textAlign:"center",width:"100%"}},"Inspired by ",r.createElement("a",{href:"https://www.youtube.com/watch?v=GiAj9WW1OfQ"},"this video"))))}}}]);
//# sourceMappingURL=582.bundle.js.map