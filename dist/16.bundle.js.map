{"version":3,"sources":["webpack:///./src/views/common/ObjDropdownComponent.tsx","webpack:///./src/projects/glsl-fracaudio/AmplitudeMode.ts","webpack:///./src/projects/glsl-fracaudio/ColorFunctions/FireColor.ts","webpack:///./src/projects/glsl-fracaudio/ColorFunctions/GrayscaleColor.ts","webpack:///./src/projects/glsl-fracaudio/FractalAudioPlayer.ts","webpack:///./src/projects/glsl-fracaudio/Fractals/BurningShip.ts","webpack:///./src/projects/glsl-fracaudio/Fractals/Mandelbrot.ts","webpack:///./src/projects/glsl-fracaudio/ShaderCode.ts","webpack:///./src/projects/glsl-fracaudio/GlslFrameRenderer.ts","webpack:///./src/projects/glsl-fracaudio/RendererWrapperComponent.ts","webpack:///./src/views/projects/glsl-fracaudio/GlslFractalAudioComponent.tsx","webpack:///./src/projects/common/position/Point.ts","webpack:///./node_modules/react-dropdown/dist/index.js","webpack:///./src/projects/common/3d/GlslHelpers.ts","webpack:///./node_modules/classnames/index.js"],"names":["ObjDropdownComponent","props","names","options","map","getName","value","onChange","chng","find","v","Name","min","max","range","subtract","real","imaginary","deltaSize","delta","add","shaderFunction","canvas","amplitude","clientWidth","clientHeight","this","ctx","getContext","strokeStyle","audio","AudioContext","gain","createGain","connect","destination","close","point","fractal","currentAudio","stop","clearRect","width","height","start","beginPath","Complex","maxBounds","negate","minBounds","i","arr","length","xp","yp","tgtX","tgtY","moveTo","lineTo","stroke","Array","sampleRate","init","z","Init","Infinity","Iterate","Math","result","GetAmplitude","tgt","buffer","createBuffer","upsampleRate","source","createBufferSource","channelData","getChannelData","index","prev","floor","next","ceil","percent","interpReal","interp","interpImaginary","perc","cos","ShaderCode","MaxAmplitude","c","tx","ty","abs","mult","addWith","GENERAL_SHADER","color","bounds","onMiddleClick","cursor_anchor","mm_down","gl","touch_anchors","canvasRange","windowRange","fragment_code","replace","CreateShaderCode","clearColor","clear","COLOR_BUFFER_BIT","initProgram","program","renderFrame","addEventListener","e","button","Point","offsetX","offsetY","GetPercentage","GetValue","x","y","undefined","preventDefault","dx","dy","panCameraByScreenDelta","scalePercentage","deltaY","scalePerc","pow","AspectScale","ev","targetTouches","touch","item","identifier","touchOffset","touches","moves","pos","oldPos","push","dragStart","Multiply","dragEnd","worldPos","SubtractWith","scaleAmt","Length","ShiftByPercentage","uniform1f","getUniformLocation","uniform2fv","xRange","yRange","target","getBoundingClientRect","pageX","left","pageY","top","colorFunction","audioPlayer","mandelbrot","w","h","jpt","playSound","run","cleanup","pt","Play","fractals","colors","GlslFractalAudioComponent","overlayCanvas","frac","setFrac","setAmplitude","setColor","current","renderer","Cleanup","className","style","position","ref","pointerEvents","background","f","a","angle","distance","sin","Dot","sqrt","LengthSq","p1","p2","other","len","atan2","nx","ny","splitArgs","splitArgsOrSingle","src","b","sy","p","pts","t","Bezier","slice","theta","fromAngle","Object","defineProperty","exports","_react","obj","__esModule","_typeof","cache","_getRequireWildcardCache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_interopRequireWildcard","_reactDom","_interopRequireDefault","_classnames","WeakMap","Symbol","iterator","constructor","_defineProperty","enumerable","configurable","writable","_defineProperties","descriptor","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_assertThisInitialized","self","ReferenceError","_setPrototypeOf","Dropdown","_Component","_this","instance","Constructor","TypeError","_classCallCheck","state","selected","parseValue","label","placeholder","isOpen","mounted","handleDocumentClick","bind","fireChangeEvent","protoProps","staticProps","subClass","superClass","create","_inherits","newProps","setState","document","removeEventListener","event","onFocus","type","stopPropagation","disabled","option","num","match","items","filter","newState","_classes","isSelected","classes","concat","baseClassName","optionClass","createElement","onMouseDown","setValue","onClick","role","_this2","_this$props","ops","groupTitle","name","_options","renderOption","tabIndex","findDOMNode","contains","_classNames","_classNames2","_classNames3","_classNames4","_classNames5","_this$props2","controlClassName","placeholderClassName","menuClassName","arrowClassName","arrowClosed","arrowOpen","disabledClass","placeHolderValue","dropdownClass","controlClass","placeholderClass","isValueSelected","menuClass","arrowClass","menu","buildMenu","handleMouseDown","onTouchEnd","Component","defaultProps","_default","loadShader","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","alert","VERTEX_SHADER","FRAGMENT_SHADER","getShaderInfoLog","deleteShader","initShaderProgram","vertexShaderSource","fragmentShaderSource","vertexShader","fragmentShader","shaderProgram","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","shaderDrawMultiple","positionBuffer","positionNumComponents","renderMode","drawCounts","getGeom","bindUniforms","clearDepth","enable","DEPTH_TEST","depthFunc","LEQUAL","DEPTH_BUFFER_BIT","FLOAT","normalize","stride","offset","bindBuffer","ARRAY_BUFFER","vertexAttribPointer","getAttribLocation","enableVertexAttribArray","useProgram","bufferOffset","bufferCount","drawArrays","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","fragmentShaderOnlyDraw","numComponents","fragmentShaderOnlyInitBuffer","right","bottom","l","r","positions","bufferData","Float32Array","STATIC_DRAW","initGLBuffer","components","defaultVertexShader","hasOwn","classNames","arguments","arg","argType","isArray","inner","apply","join","module","default"],"mappings":"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","file":"16.bundle.js","sourcesContent":["import * as React from 'react';\r\nimport Dropdown from 'react-dropdown';\r\n\r\nexport function ObjDropdownComponent<T>(props: {options: T[], getName: (item:T) => string, value: T, onChange: (item:T)=>void}) {\r\n    const names = props.options.map(props.getName);\r\n    return <Dropdown options={names} value={props.getName(props.value)} onChange={chng => props.onChange(props.options.find(v => props.getName(v) === chng.value))}></Dropdown>\r\n}","import { Complex } from \"../common\";\r\n\r\nexport interface IAmplitudeFunction {\r\n    Name: string;\r\n    GetAmplitude(min: Complex, max: Complex): { min: Complex, max: Complex };\r\n}\r\n\r\nclass DefaultAmplitudeFunction implements IAmplitudeFunction {\r\n    Name: string = 'Fill';\r\n    GetAmplitude(min: Complex, max: Complex): {min: Complex, max: Complex}\r\n    {\r\n        return {min, max};\r\n    }\r\n}\r\n\r\nclass FixedAspectAmplitudeFunction implements IAmplitudeFunction {\r\n    Name: string = 'Square';\r\n    GetAmplitude(min: Complex, max: Complex): {min: Complex, max: Complex}\r\n    {\r\n        const range = Complex.subtract(max, min);\r\n        if(range.real === range.imaginary) return {min, max};\r\n        if(range.real > range.imaginary) {\r\n            var deltaSize = (range.real - range.imaginary)/2;\r\n            var delta = new Complex(0, deltaSize);\r\n\r\n            return { min: Complex.subtract(min, delta), max: Complex.add(max, delta) };\r\n        }\r\n        else {\r\n            var deltaSize = (range.imaginary - range.real)/2;\r\n            var delta = new Complex(deltaSize, 0);\r\n\r\n            return { min: Complex.subtract(min, delta), max: Complex.add(max, delta) };\r\n        }\r\n    }\r\n}\r\n\r\nconst AllAspectFunctions = [ new DefaultAmplitudeFunction(), new FixedAspectAmplitudeFunction() ];\r\nexport default AllAspectFunctions;","import { IColorFunction } from \"./IColorFunction\";\r\n\r\nclass FireColor implements IColorFunction {\r\n    Name = 'Fire';\r\n    shaderFunction = `\r\nvec3 floatToColor(float perc) {\r\n    if(perc <= 0.5) {\r\n        return vec3(perc * 2.0, perc, 0.0);\r\n    }\r\n    perc = (perc - 0.5) * 2.0;\r\n    return vec3(1.0, 0.5 + perc / 2.0, perc);\r\n}\r\n    `;\r\n}\r\n\r\nconst fireColor = new FireColor();\r\nexport default fireColor;","import { IColorFunction } from \"./IColorFunction\";\r\n\r\nclass GrayscaleColor implements IColorFunction {\r\n    Name = 'Grayscale';\r\n    shaderFunction = `\r\nvec3 floatToColor(float perc) {\r\n    return vec3(perc, perc, perc);\r\n}\r\n    `;\r\n}\r\n\r\nconst grayscaleColor = new GrayscaleColor();\r\nexport default grayscaleColor;","import { start } from \"repl\";\r\nimport { ResizeCanvas } from \"../common/CanvasHelpers\";\r\nimport { Complex } from \"../common/Complex\";\r\nimport { IAmplitudeFunction } from \"./AmplitudeMode\";\r\nimport { IFractal } from \"./Fractals/IFractal\";\r\n\r\nconst sampleRate = 8820; // 44100;\r\nconst upsampleRate = 44100;\r\nconst sampleTimeSeconds = 1;\r\nconst GAIN = 0.3;\r\n\r\nexport default class FractalAudioPlayer {\r\n    private ctx: CanvasRenderingContext2D;\r\n    private currentAudio: PlayingAudio;\r\n    private audio: AudioContext;\r\n    private gain: GainNode;\r\n\r\n    constructor(private canvas: HTMLCanvasElement, private amplitude: IAmplitudeFunction)\r\n    {\r\n        ResizeCanvas(canvas, canvas.clientWidth, canvas.clientHeight);\r\n        this.ctx = canvas.getContext('2d');\r\n        this.ctx.strokeStyle = 'red';\r\n        this.audio = new AudioContext();\r\n        this.gain = this.audio.createGain();\r\n        this.gain.gain.value = GAIN;\r\n        this.gain.connect(this.audio.destination);\r\n    }\r\n\r\n    public Cleanup() {\r\n        this.audio.close();\r\n    }\r\n\r\n    public Play(point: Complex, fractal: IFractal){\r\n        this.currentAudio?.stop();\r\n        this.currentAudio = new PlayingAudio(this.audio, point, fractal, this.amplitude);\r\n        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n\r\n        this.currentAudio.start(this.gain);\r\n\r\n        this.ctx.beginPath();\r\n        const range = Complex.add(this.currentAudio.maxBounds, Complex.negate(this.currentAudio.minBounds));\r\n        for(let i = 0; i < this.currentAudio.arr.length; i++) {\r\n            const xp = (this.currentAudio.arr[i].real - this.currentAudio.minBounds.real) / range.real;\r\n            const yp = (this.currentAudio.arr[i].imaginary - this.currentAudio.minBounds.imaginary) / range.imaginary ;\r\n            \r\n            const tgtX = xp * this.canvas.width;\r\n            const tgtY = yp * this.canvas.height;\r\n            if(i === 0) this.ctx.moveTo(tgtX, tgtY);\r\n            else this.ctx.lineTo(tgtX, tgtY);\r\n        }\r\n        this.ctx.stroke();\r\n    }\r\n}\r\n\r\nclass PlayingAudio {\r\n    arr: Complex[];\r\n    minBounds: Complex;\r\n    maxBounds: Complex;\r\n    source: AudioBufferSourceNode;\r\n    constructor(private audio: AudioContext, point: Complex, fractal: IFractal, amplitude: IAmplitudeFunction) {\r\n        this.arr = new Array(sampleRate * sampleTimeSeconds);\r\n\r\n        const init = point;\r\n        let z = fractal.Init(init);\r\n        this.minBounds = new Complex(Infinity,Infinity);\r\n        this.maxBounds = new Complex(-Infinity,-Infinity);\r\n        for(let i = 0; i < this.arr.length; i++) {\r\n            z = fractal.Iterate(z, init);\r\n            this.arr[i] = new Complex(z.real, z.imaginary);\r\n            this.minBounds.real = Math.min(this.minBounds.real, z.real);\r\n            this.minBounds.imaginary = Math.min(this.minBounds.imaginary, z.imaginary);\r\n            \r\n            this.maxBounds.real = Math.max(this.maxBounds.real, z.real);\r\n            this.maxBounds.imaginary = Math.max(this.maxBounds.imaginary, z.imaginary);\r\n        }\r\n\r\n        const result = amplitude.GetAmplitude(this.minBounds, this.maxBounds);\r\n        this.minBounds = result.min;\r\n        this.maxBounds = result.max;\r\n    }\r\n\r\n    start(tgt: GainNode) {\r\n        const buffer = this.audio.createBuffer(2, upsampleRate * sampleTimeSeconds, upsampleRate);\r\n        const source = this.audio.createBufferSource();\r\n\r\n        const channelData = [buffer.getChannelData(0), buffer.getChannelData(1)];\r\n        const range = Complex.add(this.maxBounds, Complex.negate(this.minBounds));\r\n        for(let i = 0; i < channelData[0].length; i++) {\r\n\r\n            const index = (i * sampleRate)/upsampleRate;\r\n            const prev = Math.max(0, Math.floor(index));\r\n            const next = Math.min(this.arr.length - 1, Math.ceil(index));\r\n            const percent = index % 1;\r\n\r\n            const interpReal = interp(this.arr[prev].real, this.arr[next].real, percent);\r\n            const interpImaginary = interp(this.arr[prev].imaginary, this.arr[next].imaginary, percent);\r\n\r\n            const xp = (interpReal - this.minBounds.real) / range.real;\r\n            const yp = (interpImaginary - this.minBounds.imaginary) / range.imaginary;\r\n \r\n            channelData[0][i] = xp * 2 - 1; \r\n            channelData[1][i] = yp * 2 - 1;\r\n        }\r\n\r\n        source.buffer = buffer;\r\n\r\n        source.connect(tgt);\r\n        source.start();\r\n\r\n        this.source = source;\r\n    }\r\n\r\n    stop() {\r\n        this.source?.stop();\r\n    }\r\n}\r\n\r\n\r\nfunction interp(prev: number, next: number, perc: number)\r\n{\r\n    perc = (-Math.cos(perc) + 1) / 2;\r\n    return prev * (1-perc) + next * perc;\r\n}","import { Complex } from \"../../common\";\r\nimport { IFractal } from \"./IFractal\";\r\n\r\nclass BurningShip implements IFractal\r\n{\r\n    Name: string = 'Burning Ship';\r\n    ShaderCode: string = `\r\n    vec2 init_fractal(vec2 coords) {\r\n        return vec2(0,0);\r\n    }\r\n\r\n    vec2 step_fractal(vec2 v, vec2 c) {\r\n        float tx = v.x * v.x - v.y * v.y - c.x;\r\n        float ty = 2.0 * abs(v.x * v.y) - c.y;\r\n        return vec2(tx, ty);\r\n    }\r\n    `;\r\n\r\n    MaxAmplitude: number = 16;\r\n\r\n    Init (c: Complex):Complex{\r\n        return c;\r\n    }\r\n\r\n    Iterate(z: Complex, c: Complex): Complex\r\n    {\r\n        const tx = z.real * z.real - z.imaginary * z.imaginary - c.real;\r\n        const ty = 2 * Math.abs(z.real * z.imaginary) - c.imaginary;\r\n        return new Complex(tx, ty);\r\n    }\r\n}\r\n\r\nconst burningShip = new BurningShip();\r\nexport default burningShip;","import { Complex } from \"../../common\";\r\nimport { IFractal } from \"./IFractal\";\r\n\r\nclass Mandelbrot implements IFractal\r\n{\r\n    Name: string = 'Mandelbrot';\r\n    ShaderCode: string = `\r\n    vec2 init_fractal(vec2 coords) {\r\n        return coords;\r\n    }\r\n\r\n    vec2 step_fractal(vec2 v, vec2 c) {\r\n        return cplx_mult(v, v) + c;\r\n    }\r\n    `;\r\n\r\n    MaxAmplitude: number = 2;\r\n\r\n    Init (c: Complex):Complex{\r\n        return c;\r\n    }\r\n\r\n    Iterate(z: Complex, c: Complex): Complex\r\n    {\r\n        return Complex.mult(z, z).addWith(c);\r\n    }\r\n}\r\n\r\nconst mandelbrot = new Mandelbrot();\r\nexport default mandelbrot;","import { IColorFunction } from \"./ColorFunctions/IColorFunction\";\r\nimport { IFractal } from \"./Fractals/IFractal\";\r\n\r\nexport function CreateShaderCode(fractal: IFractal, color: IColorFunction): string {\r\n    return GENERAL_SHADER\r\n        .replace(\"[[[FRACTAL_CODE]]]\", fractal.ShaderCode)\r\n        .replace(\"[[[COLOR_CODE]]]\", color.shaderFunction);;\r\n}\r\n\r\nexport const GENERAL_SHADER = `\r\nprecision highp float;\r\nvarying vec3 vPos;\r\nuniform vec2 window_pos;\r\nuniform vec2 window_size;\r\nuniform float MAX_ABSSQ;\r\n\r\nconst int MAX_ITER = 256;\r\n\r\nvec2 cplx_mult(vec2 a, vec2 b) {\r\n    return vec2(a.x * b.x - a.y * b.y, a.x * b.y + a.y * b.x);\r\n}\r\n\r\nfloat cplx_abssq(vec2 v) {\r\n    return dot(v, v);\r\n}\r\n\r\n[[[FRACTAL_CODE]]]\r\n\r\nfloat calcIterations(vec2 coords) {\r\n    vec2 roll = init_fractal(coords);\r\n    for(int iter = 0; iter < MAX_ITER; iter++) {\r\n        roll = step_fractal(roll, coords);\r\n        if (cplx_abssq(roll) >= MAX_ABSSQ) {\r\n            return float(iter)/float(MAX_ITER);\r\n        }\r\n    }\r\n    return 1.0;\r\n}\r\n\r\n[[[COLOR_CODE]]]\r\n\r\nvoid main() {\r\n    vec2 adjpos = vPos.xy;\r\n    adjpos += 1.0;\r\n    adjpos /= 2.0;\r\n    // adjpos is now 0, 1\r\n    // Convert that to world-space\r\n    adjpos = window_pos + adjpos * window_size;\r\n\r\n    float mb_perc = calcIterations(adjpos);\r\n    gl_FragColor = vec4(floatToColor(mb_perc), 1.0);\r\n}`;","import { Range, Range2d } from \"../common\";\r\nimport * as GLSL from \"../common/3d/GlslHelpers\";\r\nimport { ResizeCanvas } from \"../common/CanvasHelpers\";\r\nimport Point from \"../common/position/Point\";\r\nimport Rect from \"../common/position/Rectangle\";\r\nimport { IColorFunction } from \"./ColorFunctions/IColorFunction\";\r\nimport { IFractal } from \"./Fractals/IFractal\";\r\nimport { CreateShaderCode } from \"./ShaderCode\";\r\n\r\nconst SCROLL_DIV = 8;\r\nconst SCROLL_POW = 1.1;\r\n\r\nexport default class GlslFrameRenderer {\r\n    protected gl: WebGLRenderingContext;\r\n    protected program: WebGLProgram;\r\n    protected buffer: WebGLBuffer;\r\n\r\n    private cursor_anchor: Point | null;\r\n    private mm_down: boolean;\r\n\r\n    protected canvasRange: Range2d;\r\n    protected windowRange: Range2d;\r\n\r\n    private fragment_code:string;\r\n\r\n    private touch_anchors: { [key: number]: Point }\r\n\r\n    constructor(private canvas: HTMLCanvasElement, private fractal: IFractal, private color: IColorFunction, private bounds: { x: number, y: number, w: number, h: number}, private onMiddleClick?: (pt: Point) => void) {\r\n        ResizeCanvas(canvas, canvas.clientWidth, canvas.clientHeight);\r\n        this.cursor_anchor = null;\r\n        this.mm_down = false;\r\n        this.gl = canvas.getContext('webgl');\r\n        this.touch_anchors = {};\r\n        \r\n        this.canvasRange = new Range2d(new Range(0, canvas.clientWidth), new Range(0, canvas.clientHeight));\r\n        this.windowRange = new Range2d(new Range(-1, 1), new Range(-1, (canvas.height / canvas.width)));\r\n\r\n        this.fragment_code = CreateShaderCode(fractal, color);\r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n        this.gl.clearColor(0.0, 0.0, 0.0, 1.0);\r\n        this.gl.clear(this.gl.COLOR_BUFFER_BIT);\r\n        this.initProgram();\r\n    }\r\n\r\n    initProgram() {\r\n        this.program = GLSL.initShaderProgram(this.gl, GLSL.defaultVertexShader, this.fragment_code);\r\n        this.buffer = GLSL.fragmentShaderOnlyInitBuffer(this.gl);\r\n    }\r\n\r\n    run() {\r\n        this.renderFrame();\r\n\r\n        this.canvas.addEventListener('mousedown', e => {\r\n            if(e.button === 0) {\r\n                this.cursor_anchor = new Point(e.offsetX, e.offsetY);\r\n            }\r\n            else if(e.button === 1) {\r\n                this.mm_down = true;\r\n                let perc = this.canvasRange.GetPercentage(e.offsetX, e.offsetY);\r\n                perc = this.windowRange.GetValue(perc.x, 1-perc.y);\r\n                if(this.onMiddleClick !== undefined) {\r\n                    this.onMiddleClick(new Point(perc.x, perc.y));\r\n                }\r\n            }\r\n            e.preventDefault();\r\n        });\r\n        this.canvas.addEventListener('mouseup', e => {\r\n            if(e.button === 0)\r\n                this.cursor_anchor = null;\r\n            else if(e.button === 1)\r\n                this.mm_down = false;\r\n            e.preventDefault();\r\n        });\r\n        this.canvas.addEventListener('mousemove', e => {\r\n            if(this.cursor_anchor != null) {\r\n                const dx = e.offsetX - this.cursor_anchor.x;\r\n                const dy = e.offsetY - this.cursor_anchor.y;\r\n                this.panCameraByScreenDelta(new Point(dx, dy));\r\n                this.cursor_anchor = new Point(e.offsetX, e.offsetY);\r\n                this.renderFrame();\r\n                e.preventDefault();\r\n            }\r\n            if(this.mm_down && this.onMiddleClick !== undefined){\r\n                let perc = this.canvasRange.GetPercentage(e.offsetX, e.offsetY);\r\n                perc = this.windowRange.GetValue(perc.x, 1-perc.y);\r\n                this.onMiddleClick(new Point(perc.x, perc.y));\r\n            }\r\n        });\r\n        this.canvas.addEventListener('wheel', e => {\r\n            const scalePercentage = e.deltaY / SCROLL_DIV;\r\n            const scalePerc = Math.pow(SCROLL_POW, scalePercentage);\r\n            const perc = this.canvasRange.GetPercentage(e.offsetX, e.offsetY);\r\n\r\n            this.windowRange.AspectScale(scalePerc, perc.x, 1-perc.y);\r\n            this.renderFrame();\r\n            e.preventDefault();\r\n        });\r\n        this.canvas.addEventListener('touchstart', ev => { \r\n            if(ev.targetTouches.length >= 3 || ev.targetTouches.length === 0) return;\r\n            for(let i = 0; i < ev.targetTouches.length; i++){\r\n                const touch = ev.targetTouches.item(i);\r\n                this.touch_anchors[touch.identifier] = touchOffset(touch);\r\n            }\r\n            ev.preventDefault();\r\n        });\r\n        this.canvas.addEventListener('touchmove', ev => {\r\n            if(ev.touches.length >= 3 || ev.touches.length === 0) return;\r\n            const moves: [Point, Point][] = [];\r\n            for(let i = 0; i < ev.targetTouches.length; i++){\r\n                const touch = ev.targetTouches.item(i);\r\n                const pos = touchOffset(touch);\r\n                const oldPos = this.touch_anchors[touch.identifier];\r\n                if(oldPos === undefined) return;\r\n                moves.push([oldPos, pos]);\r\n                this.touch_anchors[touch.identifier] = pos;\r\n            }\r\n\r\n            if(moves.length === 1) {\r\n                // Just pan the camera\r\n                this.panCameraByScreenDelta(Point.subtract(moves[0][1], moves[0][0]));\r\n            }\r\n            else if(moves.length === 2) {\r\n                // Average the start + End positions to find the move amt\r\n                const dragStart = Point.Multiply(Point.add(moves[0][0], moves[1][0]), 0.5, 0.5);\r\n                const dragEnd = Point.Multiply(Point.add(moves[0][1], moves[1][1]), 0.5, 0.5);\r\n                const worldPos = this.panCameraByScreenDelta(dragEnd.SubtractWith(dragStart));\r\n                const startDist = Point.subtract(moves[0][0], moves[1][0]).Length();\r\n                const endDist = Point.subtract(moves[0][1], moves[1][1]).Length();\r\n                const scaleAmt = startDist / endDist;\r\n                this.windowRange.AspectScale(scaleAmt, worldPos.x, 1-worldPos.y);\r\n            }\r\n\r\n            this.renderFrame();\r\n            ev.preventDefault();\r\n        });\r\n        this.canvas.addEventListener('touchend', ev => {\r\n            this.touch_anchors = {};\r\n            ev.preventDefault();\r\n        });\r\n        this.canvas.addEventListener('touchcancel', ev => {\r\n            this.touch_anchors = {};\r\n            ev.preventDefault();\r\n        });\r\n    }\r\n\r\n    private panCameraByScreenDelta(delta: Point) {\r\n        const perc = this.canvasRange.GetPercentage(delta.x, delta.y);\r\n        this.windowRange.ShiftByPercentage(-perc.x, perc.y);\r\n        return perc;\r\n    }\r\n\r\n    renderFrame() {\r\n        GLSL.fragmentShaderOnlyDraw(this.gl, this.program, this.buffer, gl => {\r\n            gl.uniform1f(gl.getUniformLocation(this.program, 'MAX_ABSSQ'), this.fractal.MaxAmplitude);\r\n            gl.uniform2fv(gl.getUniformLocation(this.program, 'window_pos'), [this.windowRange.xRange.min, this.windowRange.yRange.min]);\r\n            gl.uniform2fv(gl.getUniformLocation(this.program, 'window_size'), [this.windowRange.xRange.Length(), this.windowRange.yRange.Length()]);\r\n        });\r\n    }\r\n\r\n    cleanup() {\r\n        \r\n    }\r\n}\r\n\r\nfunction touchOffset(touch: Touch): Point {\r\n    const tgt = (touch.target as HTMLElement).getBoundingClientRect();\r\n    return new Point(touch.pageX - tgt.left, touch.pageY - tgt.top);\r\n}","import { Complex, Range, Range2d } from \"../common\";\r\nimport * as GLSL from \"../common/3d/GlslHelpers\";\r\nimport { ResizeCanvas } from \"../common/CanvasHelpers\";\r\nimport Point from \"../common/position/Point\";\r\nimport { IColorFunction } from \"./ColorFunctions/IColorFunction\";\r\nimport FractalAudioPlayer from \"./FractalAudioPlayer\";\r\nimport { IFractal } from \"./Fractals/IFractal\";\r\nimport GlslFrameRenderer from \"./GlslFrameRenderer\";\r\nimport { CreateShaderCode } from \"./ShaderCode\";\r\n\r\nexport default class RendererWrapperComponent {\r\n    private mandelbrot: GlslFrameRenderer;\r\n\r\n    constructor(private canvas: HTMLCanvasElement, fractal: IFractal, private colorFunction: IColorFunction, private audioPlayer: FractalAudioPlayer) {\r\n\r\n        this.mandelbrot = new GlslFrameRenderer(canvas, fractal, colorFunction, { x: -2, y: -2, w: 4, h:4 }, (jpt) => {\r\n            this.playSound(jpt, fractal);\r\n        });\r\n        this.mandelbrot.run();\r\n    }\r\n\r\n    cleanup() {\r\n        this.mandelbrot.cleanup();\r\n    }\r\n\r\n    playSound(pt: Point, fractal: IFractal)\r\n    {\r\n        this.audioPlayer.Play(new Complex(pt.x, pt.y), fractal);\r\n    }\r\n}","import * as React from 'react';\r\nimport AllAmplitudeFunctions, { IAmplitudeFunction } from '../../../projects/glsl-fracaudio/AmplitudeMode';\r\nimport fireColor from '../../../projects/glsl-fracaudio/ColorFunctions/FireColor';\r\nimport grayscaleColor from '../../../projects/glsl-fracaudio/ColorFunctions/GrayscaleColor';\r\nimport { IColorFunction } from '../../../projects/glsl-fracaudio/ColorFunctions/IColorFunction';\r\nimport FractalAudioPlayer from '../../../projects/glsl-fracaudio/FractalAudioPlayer';\r\nimport burningShip from '../../../projects/glsl-fracaudio/Fractals/BurningShip';\r\nimport { IFractal } from '../../../projects/glsl-fracaudio/Fractals/IFractal';\r\nimport mandelbrot from '../../../projects/glsl-fracaudio/Fractals/Mandelbrot';\r\nimport RendererWrapperComponent from '../../../projects/glsl-fracaudio/RendererWrapperComponent';\r\nimport { ObjDropdownComponent } from '../../common/ObjDropdownComponent';\r\n\r\nconst fractals: IFractal[] = [\r\n    mandelbrot,\r\n    burningShip\r\n];\r\nconst colors: IColorFunction[] = [\r\n    grayscaleColor,\r\n    fireColor\r\n];\r\n\r\nexport default function GlslFractalAudioComponent() {\r\n    const canvas = React.useRef<HTMLCanvasElement>();\r\n    const overlayCanvas = React.useRef<HTMLCanvasElement>();\r\n    const [frac, setFrac] = React.useState<IFractal>(mandelbrot);\r\n    const [amplitude, setAmplitude] = React.useState<IAmplitudeFunction>(AllAmplitudeFunctions[0]);\r\n    const [color, setColor] = React.useState<IColorFunction>(fireColor);\r\n\r\n    React.useEffect(() => {\r\n        const audio = new FractalAudioPlayer(overlayCanvas.current, amplitude);\r\n        const renderer = new RendererWrapperComponent(canvas.current, frac, color, audio);\r\n        return () => \r\n        {\r\n            renderer.cleanup();\r\n            audio.Cleanup();\r\n        }\r\n    }, [canvas, frac, amplitude, color]);\r\n\r\n    return <div className='conway conway_body full_body'>\r\n        <div style={{ width: '80%', height: '100%', position: 'absolute' }}>\r\n            <canvas ref={canvas} style={{ position: 'absolute', width: '100%', height: '100%', top:0, left:0 }}></canvas>\r\n            <canvas ref={overlayCanvas} style={{ position: 'absolute', width: '100%', height: '100%', pointerEvents: 'none', top:0, left:0}}></canvas>\r\n        </div>\r\n        <div style={{ width: '20%', height: '100%', background: 'gray', position: 'absolute', left: '80%' }}>\r\n            <label>Fractal:</label>\r\n            <ObjDropdownComponent options={fractals} value={frac} getName={f => f.Name} onChange={f => setFrac(f)} />\r\n            <label>Color:</label>\r\n            <ObjDropdownComponent options={colors} value={color} getName={c => c.Name} onChange={c => setColor(c)} />\r\n            <label>Amplitude Function:</label>\r\n            <ObjDropdownComponent options={AllAmplitudeFunctions} value={amplitude} getName={a => a.Name} onChange={a => setAmplitude(a)} />\r\n        </div>\r\n    </div>;\r\n}","export default class Point {\r\n\r\n    static zero(): Point  {\r\n        return new Point(0,0);\r\n    }\r\n\r\n    constructor(public x: number, public y: number) {\r\n\r\n    }\r\n\r\n    public static fromAngle(angle: number, distance?: number) : Point {\r\n        return new Point(Math.cos(angle) * (distance ?? 1), Math.sin(angle) * (distance ?? 1));\r\n    }\r\n\r\n    public LengthSq(): number {\r\n        return Point.Dot(this, this);\r\n    }\r\n\r\n    public Length(): number {\r\n        return Math.sqrt(this.LengthSq());\r\n    }\r\n\r\n    public Clone(): Point {\r\n        return new Point(this.x, this.y);\r\n    }\r\n\r\n    public Negate(): Point {\r\n        return new Point(-this.x, -this.y);\r\n    }\r\n\r\n    public NegateInPlace(): this {\r\n        this.x = -this.x;\r\n        this.y = -this.y;\r\n        return this;\r\n    }\r\n\r\n    public static Dot(p1: Point, p2: Point): number {\r\n        return p1.x * p2.x + p1.y * p2.y;\r\n    }\r\n\r\n    public DotWith(other: Point): number {\r\n        return Point.Dot(this, other);\r\n    }\r\n\r\n    public normalize(): Point {\r\n        let len = this.Length();\r\n        return Point.Multiply(this, 1 / len);\r\n    }\r\n\r\n    public Direction(): number {\r\n        return Math.atan2(this.y, this.x);\r\n    }\r\n\r\n    public AddWith(x: number, y: number): this;\r\n    public AddWith(other: Point): this;\r\n    public AddWith(other: number|Point, y?: number): this {\r\n        const {x: nx, y: ny} = splitArgs(other, y);\r\n        this.x += nx;\r\n        this.y += ny;\r\n        return this;\r\n    }\r\n\r\n    public MultWith(s: number): this;\r\n    public MultWith(x: number, y: number): this;\r\n    public MultWith(other: Point): this;\r\n    public MultWith(other: number|Point, y?: number): this {\r\n        const {x: nx, y: ny} = splitArgsOrSingle(other, y);\r\n        this.x *= nx;\r\n        this.y *= ny;\r\n        return this;\r\n    }\r\n\r\n    public SubtractWith(x: number, y: number): this;\r\n    public SubtractWith(other: Point): this;\r\n    public SubtractWith(other: number|Point, y?: number): this {\r\n        const {x: nx, y: ny} = splitArgs(other, y);\r\n        this.x -= nx;\r\n        this.y -= ny;\r\n        return this;\r\n    }\r\n\r\n    public DivideWith(x: number, y: number): this;\r\n    public DivideWith(other: Point): this;\r\n    public DivideWith(other: number|Point, y?: number): this {\r\n        const {x: nx, y: ny} = splitArgs(other, y);\r\n        this.x /= nx;\r\n        this.y /= ny;\r\n        return this;\r\n    }\r\n\r\n    public Equals(other: Point): boolean {\r\n        return this.x === other.x && this.y === other.y;\r\n    }\r\n\r\n    \r\n    static add(src: Point, x: number, y: number): Point;\r\n    static add(src: Point, other: Point): Point;\r\n    static add(src: Point, other: number|Point, y?: number): Point {\r\n        const {x: nx, y: ny} = splitArgs(other, y);\r\n        return new Point(src.x + nx, src.y + ny);\r\n    }\r\n\r\n    static subtract(src: Point, x: number, y: number): Point;\r\n    static subtract(src: Point, other: Point): Point;\r\n    static subtract(src: Point, other: number|Point, y?: number): Point {\r\n        const {x: nx, y: ny} = splitArgs(other, y);\r\n        return new Point(src.x - nx, src.y - ny);\r\n    }\r\n\r\n    static Multiply(a: Point, s: number, sy?: number): Point;\r\n    static Multiply(a: Point, b: Point): Point;\r\n    static Multiply(a: Point, b: Point|number, sy ?: number): Point {\r\n        if (sy !== undefined) {\r\n            return new Point(a.x * (b as number), a.y * sy);\r\n        }\r\n        else if ((b as any).x !== undefined) {\r\n            return new Point(a.x * (b as Point).x, a.y * (b as Point).y);\r\n        } else {\r\n            return new Point(a.x * (b as number), a.y * (b as number));\r\n        }\r\n    }\r\n\r\n    static interpolate(a: Point, b: Point, p: number): Point {\r\n        return new Point(a.x + (b.x - a.x) * p, a.y + (b.y - a.y) * p);\r\n    }\r\n\r\n    static componentMin(a: Point, b: Point): Point {\r\n        if(a.x <= b.x && a.y <= b.y) return a;\r\n        if(b.x <= a.x && b.y <= a.y) return b;\r\n        return new Point(Math.min(a.x, b.x), Math.min(a.y, b.y));\r\n    }\r\n    \r\n    static componentMax(a: Point, b: Point): Point {\r\n        if(a.x >= b.x && a.y >= b.y) return a;\r\n        if(b.x >= a.x && b.y >= a.y) return b;\r\n        return new Point(Math.max(a.x, b.x), Math.max(a.y, b.y));\r\n    }\r\n\r\n    static Bezier(pts: Point[], t: number): Point {\r\n        if(pts.length === 1) return pts[0];\r\n        else if(pts.length === 2) return Point.add(Point.Multiply(pts[1], t), Point.Multiply(pts[0], 1-t));\r\n        return Point.add(\r\n            Point.Multiply(Point.Bezier(pts.slice(1), t), t),\r\n            Point.Multiply(Point.Bezier(pts.slice(0, pts.length - 1), t), 1-t));\r\n    }\r\n\r\n    rotate(theta: number): Point {\r\n        const angle = Math.atan2(this.y, this.x);\r\n        const len = this.Length();\r\n        return Point.fromAngle(angle + theta, len);\r\n    }\r\n}\r\n\r\nfunction splitArgs(x: Point|number, y ?: number): {x: number, y: number} {\r\n    if(y === undefined) return { x: (<Point>x).x, y: (<Point>x).y };\r\n    return {x: <number>x, y};\r\n}\r\n\r\nfunction splitArgsOrSingle(x: Point|number, y ?: number): {x: number, y: number} {\r\n    if(y === undefined)\r\n    {\r\n        if((x as Point).x !== undefined) {\r\n            return { x: (<Point>x).x, y: (<Point>x).y };\r\n        }\r\n        return { x: x as number, y: x as number };\r\n    } \r\n    return {x: <number>x, y};\r\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactDom = _interopRequireDefault(require(\"react-dom\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar DEFAULT_PLACEHOLDER_STRING = 'Select...';\n\nvar Dropdown =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Dropdown, _Component);\n\n  function Dropdown(props) {\n    var _this;\n\n    _classCallCheck(this, Dropdown);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Dropdown).call(this, props));\n    _this.state = {\n      selected: _this.parseValue(props.value, props.options) || {\n        label: typeof props.placeholder === 'undefined' ? DEFAULT_PLACEHOLDER_STRING : props.placeholder,\n        value: ''\n      },\n      isOpen: false\n    };\n    _this.mounted = true;\n    _this.handleDocumentClick = _this.handleDocumentClick.bind(_assertThisInitialized(_this));\n    _this.fireChangeEvent = _this.fireChangeEvent.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Dropdown, [{\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(newProps) {\n      if (newProps.value) {\n        var selected = this.parseValue(newProps.value, newProps.options);\n\n        if (selected !== this.state.selected) {\n          this.setState({\n            selected: selected\n          });\n        }\n      } else {\n        this.setState({\n          selected: {\n            label: typeof newProps.placeholder === 'undefined' ? DEFAULT_PLACEHOLDER_STRING : newProps.placeholder,\n            value: ''\n          }\n        });\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      document.addEventListener('click', this.handleDocumentClick, false);\n      document.addEventListener('touchend', this.handleDocumentClick, false);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.mounted = false;\n      document.removeEventListener('click', this.handleDocumentClick, false);\n      document.removeEventListener('touchend', this.handleDocumentClick, false);\n    }\n  }, {\n    key: \"handleMouseDown\",\n    value: function handleMouseDown(event) {\n      if (this.props.onFocus && typeof this.props.onFocus === 'function') {\n        this.props.onFocus(this.state.isOpen);\n      }\n\n      if (event.type === 'mousedown' && event.button !== 0) return;\n      event.stopPropagation();\n      event.preventDefault();\n\n      if (!this.props.disabled) {\n        this.setState({\n          isOpen: !this.state.isOpen\n        });\n      }\n    }\n  }, {\n    key: \"parseValue\",\n    value: function parseValue(value, options) {\n      var option;\n\n      if (typeof value === 'string') {\n        for (var i = 0, num = options.length; i < num; i++) {\n          if (options[i].type === 'group') {\n            var match = options[i].items.filter(function (item) {\n              return item.value === value;\n            });\n\n            if (match.length) {\n              option = match[0];\n            }\n          } else if (typeof options[i].value !== 'undefined' && options[i].value === value) {\n            option = options[i];\n          }\n        }\n      }\n\n      return option || value;\n    }\n  }, {\n    key: \"setValue\",\n    value: function setValue(value, label) {\n      var newState = {\n        selected: {\n          value: value,\n          label: label\n        },\n        isOpen: false\n      };\n      this.fireChangeEvent(newState);\n      this.setState(newState);\n    }\n  }, {\n    key: \"fireChangeEvent\",\n    value: function fireChangeEvent(newState) {\n      if (newState.selected !== this.state.selected && this.props.onChange) {\n        this.props.onChange(newState.selected);\n      }\n    }\n  }, {\n    key: \"renderOption\",\n    value: function renderOption(option) {\n      var _classes;\n\n      var value = option.value;\n\n      if (typeof value === 'undefined') {\n        value = option.label || option;\n      }\n\n      var label = option.label || option.value || option;\n      var isSelected = value === this.state.selected.value || value === this.state.selected;\n      var classes = (_classes = {}, _defineProperty(_classes, \"\".concat(this.props.baseClassName, \"-option\"), true), _defineProperty(_classes, option.className, !!option.className), _defineProperty(_classes, 'is-selected', isSelected), _classes);\n      var optionClass = (0, _classnames[\"default\"])(classes);\n      return _react[\"default\"].createElement(\"div\", {\n        key: value,\n        className: optionClass,\n        onMouseDown: this.setValue.bind(this, value, label),\n        onClick: this.setValue.bind(this, value, label),\n        role: \"option\",\n        \"aria-selected\": isSelected ? 'true' : 'false'\n      }, label);\n    }\n  }, {\n    key: \"buildMenu\",\n    value: function buildMenu() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          options = _this$props.options,\n          baseClassName = _this$props.baseClassName;\n      var ops = options.map(function (option) {\n        if (option.type === 'group') {\n          var groupTitle = _react[\"default\"].createElement(\"div\", {\n            className: \"\".concat(baseClassName, \"-title\")\n          }, option.name);\n\n          var _options = option.items.map(function (item) {\n            return _this2.renderOption(item);\n          });\n\n          return _react[\"default\"].createElement(\"div\", {\n            className: \"\".concat(baseClassName, \"-group\"),\n            key: option.name,\n            role: \"listbox\",\n            tabIndex: \"-1\"\n          }, groupTitle, _options);\n        } else {\n          return _this2.renderOption(option);\n        }\n      });\n      return ops.length ? ops : _react[\"default\"].createElement(\"div\", {\n        className: \"\".concat(baseClassName, \"-noresults\")\n      }, \"No options found\");\n    }\n  }, {\n    key: \"handleDocumentClick\",\n    value: function handleDocumentClick(event) {\n      if (this.mounted) {\n        if (!_reactDom[\"default\"].findDOMNode(this).contains(event.target)) {\n          if (this.state.isOpen) {\n            this.setState({\n              isOpen: false\n            });\n          }\n        }\n      }\n    }\n  }, {\n    key: \"isValueSelected\",\n    value: function isValueSelected() {\n      return typeof this.state.selected === 'string' || this.state.selected.value !== '';\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _classNames, _classNames2, _classNames3, _classNames4, _classNames5;\n\n      var _this$props2 = this.props,\n          baseClassName = _this$props2.baseClassName,\n          controlClassName = _this$props2.controlClassName,\n          placeholderClassName = _this$props2.placeholderClassName,\n          menuClassName = _this$props2.menuClassName,\n          arrowClassName = _this$props2.arrowClassName,\n          arrowClosed = _this$props2.arrowClosed,\n          arrowOpen = _this$props2.arrowOpen,\n          className = _this$props2.className;\n      var disabledClass = this.props.disabled ? 'Dropdown-disabled' : '';\n      var placeHolderValue = typeof this.state.selected === 'string' ? this.state.selected : this.state.selected.label;\n      var dropdownClass = (0, _classnames[\"default\"])((_classNames = {}, _defineProperty(_classNames, \"\".concat(baseClassName, \"-root\"), true), _defineProperty(_classNames, className, !!className), _defineProperty(_classNames, 'is-open', this.state.isOpen), _classNames));\n      var controlClass = (0, _classnames[\"default\"])((_classNames2 = {}, _defineProperty(_classNames2, \"\".concat(baseClassName, \"-control\"), true), _defineProperty(_classNames2, controlClassName, !!controlClassName), _defineProperty(_classNames2, disabledClass, !!disabledClass), _classNames2));\n      var placeholderClass = (0, _classnames[\"default\"])((_classNames3 = {}, _defineProperty(_classNames3, \"\".concat(baseClassName, \"-placeholder\"), true), _defineProperty(_classNames3, placeholderClassName, !!placeholderClassName), _defineProperty(_classNames3, 'is-selected', this.isValueSelected()), _classNames3));\n      var menuClass = (0, _classnames[\"default\"])((_classNames4 = {}, _defineProperty(_classNames4, \"\".concat(baseClassName, \"-menu\"), true), _defineProperty(_classNames4, menuClassName, !!menuClassName), _classNames4));\n      var arrowClass = (0, _classnames[\"default\"])((_classNames5 = {}, _defineProperty(_classNames5, \"\".concat(baseClassName, \"-arrow\"), true), _defineProperty(_classNames5, arrowClassName, !!arrowClassName), _classNames5));\n\n      var value = _react[\"default\"].createElement(\"div\", {\n        className: placeholderClass\n      }, placeHolderValue);\n\n      var menu = this.state.isOpen ? _react[\"default\"].createElement(\"div\", {\n        className: menuClass,\n        \"aria-expanded\": \"true\"\n      }, this.buildMenu()) : null;\n      return _react[\"default\"].createElement(\"div\", {\n        className: dropdownClass\n      }, _react[\"default\"].createElement(\"div\", {\n        className: controlClass,\n        onMouseDown: this.handleMouseDown.bind(this),\n        onTouchEnd: this.handleMouseDown.bind(this),\n        \"aria-haspopup\": \"listbox\"\n      }, value, _react[\"default\"].createElement(\"div\", {\n        className: \"\".concat(baseClassName, \"-arrow-wrapper\")\n      }, arrowOpen && arrowClosed ? this.state.isOpen ? arrowOpen : arrowClosed : _react[\"default\"].createElement(\"span\", {\n        className: arrowClass\n      }))), menu);\n    }\n  }]);\n\n  return Dropdown;\n}(_react.Component);\n\nDropdown.defaultProps = {\n  baseClassName: 'Dropdown'\n};\nvar _default = Dropdown;\nexports[\"default\"] = _default;\n","export function loadShader(gl: WebGLRenderingContext, type: number, source: string) {\r\n    const shader = gl.createShader(type);\r\n    // Send the source to the shader object\r\n    gl.shaderSource(shader, source);\r\n    // Compile the shader program\r\n    gl.compileShader(shader);\r\n    // See if it compiled successfully\r\n    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\r\n      alert(`An error occurred compiling the ${(type === gl.VERTEX_SHADER ? 'vertex' : type === gl.FRAGMENT_SHADER ? 'fragment' : '')} shaders: ` + gl.getShaderInfoLog(shader));\r\n      gl.deleteShader(shader);\r\n      return undefined;\r\n    }\r\n\r\n    return shader;\r\n}\r\n\r\n\r\nexport function initShaderProgram(gl: WebGLRenderingContext, vertexShaderSource: string, fragmentShaderSource: string) {\r\n    const vertexShader = loadShader(gl, gl.VERTEX_SHADER, vertexShaderSource);\r\n    const fragmentShader = loadShader(gl, gl.FRAGMENT_SHADER, fragmentShaderSource);\r\n\r\n    // Create the shader program\r\n\r\n    const shaderProgram = gl.createProgram();\r\n    gl.attachShader(shaderProgram, vertexShader);\r\n    gl.attachShader(shaderProgram, fragmentShader);\r\n    gl.linkProgram(shaderProgram);\r\n\r\n    // If creating the shader program failed, alert\r\n\r\n    if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {\r\n      alert('Unable to initialize the shader program: ' + gl.getProgramInfoLog(shaderProgram));\r\n      return undefined;\r\n    }\r\n\r\n    return shaderProgram;\r\n  }\r\n\r\n\r\nexport function shaderDraw(gl: WebGLRenderingContext, shader: WebGLProgram, positionBuffer: WebGLBuffer, positionNumComponents: number, renderMode: 'triangle'|'tristrip'|'trifan', bufferOffset: number, bufferCount: number, bindUniforms: (gl: WebGLRenderingContext) => void) {\r\n    gl.clearColor(0.0, 0.0, 0.0, 1.0);  // Clear to black, fully opaque\r\n    gl.clearDepth(1.0);                 // Clear everything\r\n    gl.enable(gl.DEPTH_TEST);           // Enable depth testing\r\n    gl.depthFunc(gl.LEQUAL);            // Near things obscure far things\r\n\r\n    // Clear the canvas before we start drawing on it.\r\n\r\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n\r\n    // Tell WebGL how to pull out the positions from the position\r\n    // buffer into the vertexPosition attribute.\r\n    {\r\n      const type = gl.FLOAT;    // the data in the buffer is 32bit floats\r\n      const normalize = false;  // don't normalize\r\n      const stride = 0;         // how many bytes to get from one set of values to the next\r\n                                // 0 = use type and numComponents above\r\n      const offset = 0;         // how many bytes inside the buffer to start from\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\r\n      gl.vertexAttribPointer(\r\n            gl.getAttribLocation(shader, 'aVertexPosition'),\r\n            positionNumComponents,\r\n            type,\r\n            normalize,\r\n            stride,\r\n            offset);\r\n      gl.enableVertexAttribArray(\r\n        gl.getAttribLocation(shader, 'aVertexPosition'));\r\n    }\r\n\r\n    // Tell WebGL to use our program when drawing\r\n\r\n    gl.useProgram(shader);\r\n    bindUniforms(gl);\r\n    gl.drawArrays(\r\n      renderMode === 'triangle' ? gl.TRIANGLES :\r\n      renderMode === 'tristrip' ? gl.TRIANGLE_STRIP :\r\n      gl.TRIANGLE_FAN, bufferOffset, bufferCount);\r\n}\r\n\r\n\r\nexport function shaderDrawMultiple(gl: WebGLRenderingContext, shader: WebGLProgram, positionBuffer: WebGLBuffer, positionNumComponents: number, renderMode: 'triangle'|'tristrip'|'trifan', drawCounts: number, getGeom: (i: number) => {bufferOffset: number, bufferCount: number}, bindUniforms: (gl: WebGLRenderingContext, i: number) => void) {\r\n  gl.clearColor(0.0, 0.0, 0.0, 1.0);  // Clear to black, fully opaque\r\n  gl.clearDepth(1.0);                 // Clear everything\r\n  gl.enable(gl.DEPTH_TEST);           // Enable depth testing\r\n  gl.depthFunc(gl.LEQUAL);            // Near things obscure far things\r\n\r\n  // Clear the canvas before we start drawing on it.\r\n\r\n  gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n\r\n  // Tell WebGL how to pull out the positions from the position\r\n  // buffer into the vertexPosition attribute.\r\n  {\r\n    const type = gl.FLOAT;    // the data in the buffer is 32bit floats\r\n    const normalize = false;  // don't normalize\r\n    const stride = 0;         // how many bytes to get from one set of values to the next\r\n                              // 0 = use type and numComponents above\r\n    const offset = 0;         // how many bytes inside the buffer to start from\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\r\n    gl.vertexAttribPointer(\r\n          gl.getAttribLocation(shader, 'aVertexPosition'),\r\n          positionNumComponents,\r\n          type,\r\n          normalize,\r\n          stride,\r\n          offset);\r\n    gl.enableVertexAttribArray(\r\n      gl.getAttribLocation(shader, 'aVertexPosition'));\r\n  }\r\n\r\n  // Tell WebGL to use our program when drawing\r\n\r\n  gl.useProgram(shader);\r\n  for(let i = 0; i < drawCounts; i++) {\r\n    bindUniforms(gl, i);\r\n    let {bufferOffset, bufferCount} = getGeom(i);\r\n    gl.drawArrays(\r\n      renderMode === 'triangle' ? gl.TRIANGLES :\r\n      renderMode === 'tristrip' ? gl.TRIANGLE_STRIP :\r\n      gl.TRIANGLE_FAN, bufferOffset, bufferCount);\r\n  }\r\n}\r\n\r\nexport function fragmentShaderOnlyDraw(gl: WebGLRenderingContext, shader: WebGLProgram, positionBuffer: WebGLBuffer, bindUniforms: (gl: WebGLRenderingContext) => void) {\r\n    gl.clearColor(0.0, 0.0, 0.0, 1.0);  // Clear to black, fully opaque\r\n    gl.clearDepth(1.0);                 // Clear everything\r\n    gl.enable(gl.DEPTH_TEST);           // Enable depth testing\r\n    gl.depthFunc(gl.LEQUAL);            // Near things obscure far things\r\n\r\n    // Clear the canvas before we start drawing on it.\r\n\r\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n\r\n    // Tell WebGL how to pull out the positions from the position\r\n    // buffer into the vertexPosition attribute.\r\n    {\r\n      const numComponents = 2;  // pull out 2 values per iteration\r\n      const type = gl.FLOAT;    // the data in the buffer is 32bit floats\r\n      const normalize = false;  // don't normalize\r\n      const stride = 0;         // how many bytes to get from one set of values to the next\r\n                                // 0 = use type and numComponents above\r\n      const offset = 0;         // how many bytes inside the buffer to start from\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\r\n      gl.vertexAttribPointer(\r\n            gl.getAttribLocation(shader, 'aVertexPosition'),\r\n            numComponents,\r\n            type,\r\n            normalize,\r\n            stride,\r\n            offset);\r\n      gl.enableVertexAttribArray(\r\n        gl.getAttribLocation(shader, 'aVertexPosition'));\r\n    }\r\n\r\n    // Tell WebGL to use our program when drawing\r\n\r\n    gl.useProgram(shader);\r\n    bindUniforms(gl);\r\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\r\n}\r\n\r\nexport function fragmentShaderOnlyInitBuffer(gl: WebGLRenderingContext, left?: number, top?: number, right?: number, bottom?: number) {\r\n     // Create a buffer for the square's positions.\r\n     const positionBuffer = gl.createBuffer();\r\n\r\n     // Select the positionBuffer as the one to apply buffer\r\n     // operations to from here out.\r\n     gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\r\n\r\n     const l = left ?? -1.0;\r\n     const r = right ?? 1.0;\r\n     const t = top ?? -1.0;\r\n     const b = bottom ?? 1.0;\r\n \r\n     // Now create an array of positions for the square.\r\n     const positions = [\r\n         b, r,\r\n         t, r,\r\n         b, l,\r\n         t, l,\r\n     ];\r\n \r\n     // Now pass the list of positions into WebGL to build the\r\n     // shape. We do this by creating a Float32Array from the\r\n     // JavaScript array, then use it to fill the current buffer.\r\n     gl.bufferData(gl.ARRAY_BUFFER,\r\n                   new Float32Array(positions),\r\n                   gl.STATIC_DRAW);\r\n \r\n     return positionBuffer;\r\n}\r\n\r\nexport function initGLBuffer(gl: WebGLRenderingContext, components: number[]) {\r\n  const positionBuffer = gl.createBuffer();\r\n\r\n  gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\r\n\r\n  gl.bufferData(gl.ARRAY_BUFFER,\r\n                new Float32Array(components),\r\n                gl.STATIC_DRAW);\r\n\r\n  return positionBuffer;\r\n}\r\n\r\nexport const defaultVertexShader = `attribute vec4 aVertexPosition;\r\nvarying vec3 vPos;\r\nvoid main() {\r\n  vPos = vec3(aVertexPosition.xy, 0.0);\r\n  gl_Position = aVertexPosition;\r\n}`;","/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg) && arg.length) {\n\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\tif (inner) {\n\t\t\t\t\tclasses.push(inner);\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n"],"sourceRoot":""}