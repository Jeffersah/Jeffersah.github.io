{"version":3,"file":"blendTest.bundle.js","mappings":"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","sources":["webpack://trading-game/./src/projects/common/position/Direction.ts","webpack://trading-game/./src/projects/common/position/Point.ts","webpack://trading-game/./src/projects/common-assets/RockLavaAllBlends_crop.png","webpack://trading-game/./src/projects/common-assets/Selectors16x16.png","webpack://trading-game/./src/projects/tile-blend-test-1/Terrain.ts","webpack://trading-game/./src/projects/tile-blend-test-1/index.ts"],"sourcesContent":["import Point from './Point';\n\nexport enum Direction {\n    Up = 0,\n    UpRight,\n    Right,\n    DownRight,\n    Down,\n    DownLeft,\n    Left,\n    UpLeft,\n}\n\nexport type ECardinalDirection = Direction.Up | Direction.Right | Direction.Down | Direction.Left;\nexport type EDiagonalDirection = Direction.UpRight | Direction.DownRight | Direction.DownLeft | Direction.UpLeft;\n\nexport const directionValues: Point[] = [\n    new Point(0, -1),\n    new Point(1, -1),\n    new Point(1, 0),\n    new Point(1, 1),\n    new Point(0, 1),\n    new Point(-1, 1),\n    new Point(-1, 0),\n    new Point(-1, -1),\n];\n\nexport const allDirections: Direction[] = [\n    Direction.Up,\n    Direction.UpRight,\n    Direction.Right,\n    Direction.DownRight,\n    Direction.Down,\n    Direction.DownLeft,\n    Direction.Left,\n    Direction.UpLeft,\n];\nexport const cardinalDirections: ECardinalDirection[] = [\n    Direction.Up,\n    Direction.Right,\n    Direction.Down,\n    Direction.Left\n];\nexport const diagonalDirections: EDiagonalDirection[] = [\n    Direction.UpRight,\n    Direction.DownRight,\n    Direction.DownLeft,\n    Direction.UpLeft,\n];\n\nexport function ToPoint(direction: Direction): Point {\n    return directionValues[direction];\n}","export default class Point {\n\n    static zero(): Point  {\n        return new Point(0,0);\n    }\n\n    constructor(public x: number, public y: number) {\n\n    }\n\n    public static fromAngle(angle: number, distance?: number) : Point {\n        return new Point(Math.cos(angle) * (distance ?? 1), Math.sin(angle) * (distance ?? 1));\n    }\n\n    public lengthSq(): number {\n        return Point.dot(this, this);\n    }\n\n    public length(): number {\n        return Math.sqrt(this.lengthSq());\n    }\n\n    public clone(): Point {\n        return new Point(this.x, this.y);\n    }\n\n    public negate(): Point {\n        return new Point(-this.x, -this.y);\n    }\n\n    public negateInPlace(): this {\n        this.x = -this.x;\n        this.y = -this.y;\n        return this;\n    }\n\n    public static dot(p1: Point, p2: Point): number {\n        return p1.x * p2.x + p1.y * p2.y;\n    }\n\n    public dotWith(other: Point): number {\n        return Point.dot(this, other);\n    }\n\n    public normalize(): Point {\n        let len = this.length();\n        return Point.multiply(this, 1 / len);\n    }\n\n    public direction(): number {\n        return Math.atan2(this.y, this.x);\n    }\n\n    public truncate(): Point {\n        return new Point(Math.trunc(this.x), Math.trunc(this.y));\n    }\n\n    public addWith(x: number, y: number): this;\n    public addWith(other: Point): this;\n    public addWith(other: number|Point, y?: number): this {\n        const {x: nx, y: ny} = splitArgs(other, y);\n        this.x += nx;\n        this.y += ny;\n        return this;\n    }\n\n    public multWith(s: number): this;\n    public multWith(x: number, y: number): this;\n    public multWith(other: Point): this;\n    public multWith(other: number|Point, y?: number): this {\n        const {x: nx, y: ny} = splitArgsOrSingle(other, y);\n        this.x *= nx;\n        this.y *= ny;\n        return this;\n    }\n\n    public subtractWith(x: number, y: number): this;\n    public subtractWith(other: Point): this;\n    public subtractWith(other: number|Point, y?: number): this {\n        const {x: nx, y: ny} = splitArgs(other, y);\n        this.x -= nx;\n        this.y -= ny;\n        return this;\n    }\n\n    public divideWith(x: number, y: number): this;\n    public divideWith(other: Point): this;\n    public divideWith(other: number|Point, y?: number): this {\n        const {x: nx, y: ny} = splitArgs(other, y);\n        this.x /= nx;\n        this.y /= ny;\n        return this;\n    }\n\n    public equals(other: Point): boolean {\n        return this.x === other.x && this.y === other.y;\n    }\n\n    \n    static add(src: Point, x: number, y: number): Point;\n    static add(src: Point, other: Point): Point;\n    static add(src: Point, other: number|Point, y?: number): Point {\n        const {x: nx, y: ny} = splitArgs(other, y);\n        return new Point(src.x + nx, src.y + ny);\n    }\n\n    static subtract(src: Point, x: number, y: number): Point;\n    static subtract(src: Point, other: Point): Point;\n    static subtract(src: Point, other: number|Point, y?: number): Point {\n        const {x: nx, y: ny} = splitArgs(other, y);\n        return new Point(src.x - nx, src.y - ny);\n    }\n\n    static multiply(a: Point, s: number, sy?: number): Point;\n    static multiply(a: Point, b: Point): Point;\n    static multiply(a: Point, b: Point|number, sy ?: number): Point {\n        if (sy !== undefined) {\n            return new Point(a.x * (b as number), a.y * sy);\n        }\n        else if ((b as any).x !== undefined) {\n            return new Point(a.x * (b as Point).x, a.y * (b as Point).y);\n        } else {\n            return new Point(a.x * (b as number), a.y * (b as number));\n        }\n    }\n\n    static interpolate(a: Point, b: Point, p: number): Point {\n        return new Point(a.x + (b.x - a.x) * p, a.y + (b.y - a.y) * p);\n    }\n\n    static componentMin(a: Point, b: Point): Point {\n        if(a.x <= b.x && a.y <= b.y) return a;\n        if(b.x <= a.x && b.y <= a.y) return b;\n        return new Point(Math.min(a.x, b.x), Math.min(a.y, b.y));\n    }\n    \n    static componentMax(a: Point, b: Point): Point {\n        if(a.x >= b.x && a.y >= b.y) return a;\n        if(b.x >= a.x && b.y >= a.y) return b;\n        return new Point(Math.max(a.x, b.x), Math.max(a.y, b.y));\n    }\n\n    static Bezier(pts: Point[], t: number): Point {\n        if(pts.length === 1) return pts[0];\n        else if(pts.length === 2) return Point.add(Point.multiply(pts[1], t), Point.multiply(pts[0], 1-t));\n        return Point.add(\n            Point.multiply(Point.Bezier(pts.slice(1), t), t),\n            Point.multiply(Point.Bezier(pts.slice(0, pts.length - 1), t), 1-t));\n    }\n\n    rotate(theta: number): Point {\n        const angle = Math.atan2(this.y, this.x);\n        const len = this.length();\n        return Point.fromAngle(angle + theta, len);\n    }\n}\n\nfunction splitArgs(x: Point|number, y ?: number): {x: number, y: number} {\n    if(y === undefined) return { x: (<Point>x).x, y: (<Point>x).y };\n    return {x: <number>x, y};\n}\n\nfunction splitArgsOrSingle(x: Point|number, y ?: number): {x: number, y: number} {\n    if(y === undefined)\n    {\n        if((x as Point).x !== undefined) {\n            return { x: (<Point>x).x, y: (<Point>x).y };\n        }\n        return { x: x as number, y: x as number };\n    } \n    return {x: <number>x, y};\n}","export default __webpack_public_path__ + \"e6ca7ebcac9136ce5511288e898c8371.png\";","export default __webpack_public_path__ + \"f1cd5c392c5447559f3a20ac58e20646.png\";","import { Direction, cardinalDirections, diagonalDirections, ToPoint, allDirections } from '../common/position/Direction';\n\nexport enum TileType {\n    Rock,\n    Lava\n}\n\nexport class Terrain {\n    private tiles: TileType[];\n    private subTileIds: number[];\n\n    constructor(public tilesWide: number, public tilesHigh: number) {\n        this.tiles = new Array(tilesHigh * tilesWide);\n        for (let x = 0; x < tilesWide * tilesHigh; x++) {\n            this.tiles[x] = TileType.Rock;\n        }\n\n        this.subTileIds = new Array(tilesHigh * tilesWide * 4);\n        for (let x = 0; x < tilesWide * tilesHigh * 4; x++) {\n            this.subTileIds[x] = 0;\n        }\n\n        for (let x = 0; x < tilesWide; x++) {\n            for (let y = 0; y < tilesHigh; y++) {\n                this.updateTile(x, y);\n            }\n        }\n    }\n\n    private fixCoords(x: number, y: number) {\n        return x + y * this.tilesWide;\n    }\n\n    private fixSubCoords(x: number, y: number, d: Direction) {\n        return x * 4 + (y * this.tilesWide * 4) + ((d - Direction.UpRight) / 2);\n    }\n\n    public getTile(x: number, y: number): TileType {\n        if (x < 0 || y < 0 || x >= this.tilesWide || y >= this.tilesWide) return TileType.Lava;\n        const coords = this.fixCoords(x, y);\n        return this.tiles[this.fixCoords(x, y)];\n    }\n\n    public getSubTileId(x: number, y: number, d: Direction) {\n        if (x < 0 || y < 0 || x >= this.tilesWide || y >= this.tilesWide) return 0;\n        const coords = this.fixSubCoords(x, y, d);\n        return this.subTileIds[coords];\n    }\n\n    public setTile(x: number, y: number, t: TileType) {\n        if (x < 0 || y < 0 || x >= this.tilesWide || y >= this.tilesWide) return;\n        const coords = this.fixCoords(x, y);\n        if (this.tiles[coords] === t) return;\n\n        this.tiles[coords] = t;\n        this.updateSelfAndAdjacent(x, y);\n    }\n\n    private updateSelfAndAdjacent(tx: number, ty: number) {\n        for (let dx = -1; dx <= 1; dx++) {\n            for (let dy = -1; dy <= 1; dy++) {\n                this.updateTile(tx + dx, ty + dy);\n            }\n        }\n    }\n\n    private updateTile(tx: number, ty: number): void {\n        if (tx < 0 || ty < 0 || tx >= this.tilesWide || ty >= this.tilesWide) return;\n        const tid = this.fixCoords(tx, ty);\n        const type = this.tiles[tid];\n\n        let adjacency = 0x00;\n        allDirections.forEach((dir, i) => {\n            const adjMask = 1 << i;\n            const pt = ToPoint(dir);\n            if (this.getTile(pt.x + tx, pt.y + ty) !== type) {\n                adjacency |= adjMask;\n            }\n        });\n\n        // adjacency now contains a bitmask of (adjacent=different) where\n        // b[0] == T diff, b[1] = TR diff, b[2] = R diff, etc...\n        // Therefore, bits [0..2] are the TopRight id,\n        // bits [2..4] are the BottomRight id,\n        // bits [4..6] are the BottomLeft id,\n        // bits [6, 7, 0] are the TopLeft id\n\n        this.subTileIds[this.fixSubCoords(tx, ty, Direction.UpRight)] = adjacency & 0b111;\n        this.subTileIds[this.fixSubCoords(tx, ty, Direction.DownRight)] = (adjacency >> 2) & 0b111;\n        this.subTileIds[this.fixSubCoords(tx, ty, Direction.DownLeft)] = (adjacency >> 4) & 0b111;\n        this.subTileIds[this.fixSubCoords(tx, ty, Direction.UpLeft)] = (adjacency >> 6) | ((adjacency & 1) << 2) & 0b111;\n    }\n}","import AssetLoader from '../common/assets/AssetLoader';\nimport { SpriteSheet } from '../common/assets/SpriteSheet';\nimport { ResizeCanvas, NearestNeighborScaling } from '../common/CanvasHelpers';\nimport blendTilesUrl from '../common-assets/RockLavaAllBlends_crop.png';\nimport seletorsUrl from '../common-assets/Selectors16x16.png';\nimport { Terrain, TileType } from './Terrain';\nimport { Direction, ToPoint } from '../common/position/Direction';\nimport Point from '../common/position/Point';\n\nlet tiles: SpriteSheet;\nlet selectors: SpriteSheet;\nlet pvMousePos: Point | undefined;\nlet terrain: Terrain;\nlet context: CanvasRenderingContext2D;\n\nconst SCALE_FACTOR = 3;\n\n\nfunction Run() {\n    const assetLoader = new AssetLoader();\n    tiles = new SpriteSheet(8, 8, blendTilesUrl, assetLoader.registerAssetLoadCallback());\n    selectors = new SpriteSheet(16, 16, seletorsUrl, assetLoader.registerAssetLoadCallback());\n    pvMousePos = undefined;\n\n    assetLoader.onAllFinished(assetLoadDone);\n}\n\nfunction assetLoadDone() {\n    const canvas = document.getElementById('canvas') as HTMLCanvasElement;\n    terrain = new Terrain(20, 20);\n\n    ResizeCanvas(canvas, terrain.tilesWide * 16 * SCALE_FACTOR, terrain.tilesHigh * 16 * SCALE_FACTOR);\n    context = canvas.getContext('2d');\n    NearestNeighborScaling(context);\n\n    RenderTerrain(context, terrain, tiles);\n\n    canvas.addEventListener('mousemove', onMouseMove);\n    canvas.addEventListener('mouseleave', onMouseLeave);\n    canvas.addEventListener('mousedown', onMouseClick);\n}\n\nfunction RenderTerrain(ctx: CanvasRenderingContext2D, terr: Terrain, sprites: SpriteSheet) {\n    for (let x = 0; x < terr.tilesWide; x++) {\n        for (let y = 0; y < terr.tilesHigh; y++) {\n            RenderTerrainCell(ctx, terr, sprites, x, y);\n        }\n    }\n}\nfunction RenderTerrainCell(ctx: CanvasRenderingContext2D, terr: Terrain, sprites: SpriteSheet, x: number, y: number) {\n    for (let d = 0; d < 4; d++) {\n        const dir = Direction.UpRight + (d * 2);\n        const spriteSheetX = terr.getSubTileId(x, y, dir);\n        let spriteSheetY = d;\n        if (terr.getTile(x, y) === TileType.Lava) spriteSheetY += 4;\n\n        const rtx = x * 16 + (ToPoint(dir).x === 1 ? 8 : 0);\n        const rty = y * 16 + (ToPoint(dir).y === 1 ? 8 : 0);\n        sprites.render(ctx, rtx * SCALE_FACTOR, rty * SCALE_FACTOR, 8 * SCALE_FACTOR, 8 * SCALE_FACTOR,\n            spriteSheetX, spriteSheetY);\n    }\n}\n\nfunction onMouseMove(ev: MouseEvent) {\n    const mouseCoords = new Point(Math.floor(ev.offsetX / (16 * SCALE_FACTOR)), Math.floor(ev.offsetY / (16 * SCALE_FACTOR)));\n    if (pvMousePos !== undefined) {\n        if (!mouseCoords.equals(pvMousePos)) {\n            RenderTerrainCell(context, terrain, tiles, pvMousePos.x, pvMousePos.y);\n            selectors.render(context, mouseCoords.x * 16 * SCALE_FACTOR, mouseCoords.y * 16 * SCALE_FACTOR, 16 * SCALE_FACTOR, 16 * SCALE_FACTOR,\n                1, 0);\n            pvMousePos = mouseCoords;\n        }\n    }\n    else {\n        selectors.render(context, mouseCoords.x * 16 * SCALE_FACTOR, mouseCoords.y * 16 * SCALE_FACTOR, 16 * SCALE_FACTOR, 16 * SCALE_FACTOR,\n            1, 0);\n        pvMousePos = mouseCoords;\n    }\n}\n\nfunction onMouseLeave(ev: MouseEvent) {\n    if (pvMousePos !== undefined) {\n        pvMousePos = undefined;\n    }\n}\n\nfunction onMouseClick(ev: MouseEvent) {\n    const mouseCoords = new Point(Math.floor(ev.offsetX / (16 * SCALE_FACTOR)), Math.floor(ev.offsetY / (16 * SCALE_FACTOR)));\n    const tile = terrain.getTile(mouseCoords.x, mouseCoords.y);\n    terrain.setTile(mouseCoords.x, mouseCoords.y, tile === TileType.Lava ? TileType.Rock : TileType.Lava);\n\n    for (let dx = -1; dx <= 1; dx ++) {\n        for (let dy = -1; dy <= 1; dy++) {\n            RenderTerrainCell(context, terrain, tiles, pvMousePos.x + dx, pvMousePos.y + dy);\n        }\n    }\n\n    selectors.render(context, mouseCoords.x * 16 * SCALE_FACTOR, mouseCoords.y * 16 * SCALE_FACTOR, 16 * SCALE_FACTOR, 16 * SCALE_FACTOR,\n        1, 0);\n}\n\nexport default Run;"],"names":["Direction","directionValues","allDirections","Up","UpRight","Right","DownRight","Down","DownLeft","Left","UpLeft","ToPoint","direction","Point","constructor","x","y","static","angle","distance","Math","cos","sin","lengthSq","dot","this","length","sqrt","clone","negate","negateInPlace","p1","p2","dotWith","other","normalize","len","multiply","atan2","truncate","trunc","addWith","nx","ny","splitArgs","multWith","undefined","splitArgsOrSingle","subtractWith","divideWith","equals","src","a","b","sy","p","min","max","pts","t","add","Bezier","slice","rotate","theta","fromAngle","TileType","Terrain","tilesWide","tilesHigh","tiles","Array","Rock","subTileIds","updateTile","fixCoords","fixSubCoords","d","getTile","Lava","getSubTileId","coords","setTile","updateSelfAndAdjacent","tx","ty","dx","dy","tid","type","adjacency","dir","i","adjMask","pt","selectors","pvMousePos","terrain","context","assetLoadDone","canvas","document","getElementById","getContext","ctx","terr","sprites","RenderTerrainCell","RenderTerrain","addEventListener","onMouseMove","onMouseLeave","onMouseClick","spriteSheetX","spriteSheetY","rtx","rty","render","ev","mouseCoords","floor","offsetX","offsetY","tile","assetLoader","AssetLoader","SpriteSheet","registerAssetLoadCallback","onAllFinished"],"sourceRoot":""}