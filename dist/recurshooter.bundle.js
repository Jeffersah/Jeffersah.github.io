"use strict";(self.webpackChunktrading_game=self.webpackChunktrading_game||[]).push([[229],{8704:(t,e,s)=>{s.r(e),s.d(e,{default:()=>l});var n=s(7363),i=s(5901),r=s(8785);class a{constructor(t,e,s){this.bounds=t,this.blockMove=e,this.blockBullets=s}}const c=new class{constructor(t,e){this.recursePosition=t,this.obstructions=e}}({center:new r.Z(400,300),scale:.25,rotation:0},[new a([new r.Z(0,0),new r.Z(100,0),new r.Z(100,600),new r.Z(0,600)],!0,!0),new a([new r.Z(700,0),new r.Z(800,0),new r.Z(800,600),new r.Z(700,600)],!0,!0)]);class o{constructor(t){this.map=t}update(){}initOffscreenCanvas(t){this.offscreenCanvas=document.createElement("canvas"),(0,i.f5)(this.offscreenCanvas,t.width,t.height),this.offscreenCtx=this.offscreenCanvas.getContext("2d")}draw(t,e){null!==this.offscreenCanvas&&void 0!==this.offscreenCanvas||this.initOffscreenCanvas(t),this.renderWorld(this.offscreenCanvas,this.offscreenCtx),e.save(),this.recursiveRender(this.offscreenCanvas,t,e),e.restore()}recursiveRender(t,e,s){for(let n=0;n<8;n++){s.drawImage(t,0,0,e.width,e.height),s.translate(-400,-300),s.scale(this.map.recursePosition.scale,this.map.recursePosition.scale),s.rotate(this.map.recursePosition.rotation);const n=this.map.recursePosition.center.rotate(-this.map.recursePosition.rotation).multWith(1/this.map.recursePosition.scale,1/this.map.recursePosition.scale);s.translate(n.x,n.y)}}renderWorld(t,e){e.save(),e.fillStyle="black",e.fillRect(0,0,800,600),e.beginPath();for(const t of this.map.obstructions){e.moveTo(t.bounds[0].x,t.bounds[0].y);for(let s=1;s<=t.bounds.length;s++)e.lineTo(t.bounds[s%t.bounds.length].x,t.bounds[s%t.bounds.length].y)}e.fillStyle="#006",e.strokeStyle="blue",e.fill(),e.stroke(),e.restore()}}class h{constructor(t){this.canvas=t,(0,i.f5)(t,800,600),this.ctx=t.getContext("2d"),this.repaintTimer=-1,this.screen=new o(c)}start(){this.runTick()}runTick(){this.tick(),this.repaintTimer=requestAnimationFrame(this.runTick.bind(this))}tick(){this.screen.update((t=>{this.screen=t})),this.ctx.save(),this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.screen.draw(this.canvas,this.ctx),this.ctx.restore()}stop(){-1!==this.repaintTimer&&cancelAnimationFrame(this.repaintTimer)}}function l(){const t=n.useRef();return n.useEffect((()=>{const e=new h(t.current);return e.start(),()=>e.stop()}),[t.current]),n.createElement("canvas",{ref:t})}}}]);
//# sourceMappingURL=recurshooter.bundle.js.map